function s0(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in t)){const s=Object.getOwnPropertyDescriptor(r,i);s&&Object.defineProperty(t,i,s.get?s:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();function Tp(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var o0={exports:{}},td={},a0={exports:{}},ke={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Nl=Symbol.for("react.element"),sI=Symbol.for("react.portal"),oI=Symbol.for("react.fragment"),aI=Symbol.for("react.strict_mode"),lI=Symbol.for("react.profiler"),uI=Symbol.for("react.provider"),cI=Symbol.for("react.context"),dI=Symbol.for("react.forward_ref"),hI=Symbol.for("react.suspense"),fI=Symbol.for("react.memo"),pI=Symbol.for("react.lazy"),Gg=Symbol.iterator;function mI(t){return t===null||typeof t!="object"?null:(t=Gg&&t[Gg]||t["@@iterator"],typeof t=="function"?t:null)}var l0={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},u0=Object.assign,c0={};function Qo(t,e,n){this.props=t,this.context=e,this.refs=c0,this.updater=n||l0}Qo.prototype.isReactComponent={};Qo.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Qo.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function d0(){}d0.prototype=Qo.prototype;function Sp(t,e,n){this.props=t,this.context=e,this.refs=c0,this.updater=n||l0}var Ip=Sp.prototype=new d0;Ip.constructor=Sp;u0(Ip,Qo.prototype);Ip.isPureReactComponent=!0;var Qg=Array.isArray,h0=Object.prototype.hasOwnProperty,Pp={current:null},f0={key:!0,ref:!0,__self:!0,__source:!0};function p0(t,e,n){var r,i={},s=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(s=""+e.key),e)h0.call(e,r)&&!f0.hasOwnProperty(r)&&(i[r]=e[r]);var a=arguments.length-2;if(a===1)i.children=n;else if(1<a){for(var u=Array(a),c=0;c<a;c++)u[c]=arguments[c+2];i.children=u}if(t&&t.defaultProps)for(r in a=t.defaultProps,a)i[r]===void 0&&(i[r]=a[r]);return{$$typeof:Nl,type:t,key:s,ref:o,props:i,_owner:Pp.current}}function gI(t,e){return{$$typeof:Nl,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function Cp(t){return typeof t=="object"&&t!==null&&t.$$typeof===Nl}function yI(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var Yg=/\/+/g;function Zd(t,e){return typeof t=="object"&&t!==null&&t.key!=null?yI(""+t.key):e.toString(36)}function Mu(t,e,n,r,i){var s=typeof t;(s==="undefined"||s==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(s){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case Nl:case sI:o=!0}}if(o)return o=t,i=i(o),t=r===""?"."+Zd(o,0):r,Qg(i)?(n="",t!=null&&(n=t.replace(Yg,"$&/")+"/"),Mu(i,e,n,"",function(c){return c})):i!=null&&(Cp(i)&&(i=gI(i,n+(!i.key||o&&o.key===i.key?"":(""+i.key).replace(Yg,"$&/")+"/")+t)),e.push(i)),1;if(o=0,r=r===""?".":r+":",Qg(t))for(var a=0;a<t.length;a++){s=t[a];var u=r+Zd(s,a);o+=Mu(s,e,n,u,i)}else if(u=mI(t),typeof u=="function")for(t=u.call(t),a=0;!(s=t.next()).done;)s=s.value,u=r+Zd(s,a++),o+=Mu(s,e,n,u,i);else if(s==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function cu(t,e,n){if(t==null)return t;var r=[],i=0;return Mu(t,r,"","",function(s){return e.call(n,s,i++)}),r}function vI(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var yn={current:null},Vu={transition:null},_I={ReactCurrentDispatcher:yn,ReactCurrentBatchConfig:Vu,ReactCurrentOwner:Pp};function m0(){throw Error("act(...) is not supported in production builds of React.")}ke.Children={map:cu,forEach:function(t,e,n){cu(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return cu(t,function(){e++}),e},toArray:function(t){return cu(t,function(e){return e})||[]},only:function(t){if(!Cp(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};ke.Component=Qo;ke.Fragment=oI;ke.Profiler=lI;ke.PureComponent=Sp;ke.StrictMode=aI;ke.Suspense=hI;ke.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=_I;ke.act=m0;ke.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=u0({},t.props),i=t.key,s=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,o=Pp.current),e.key!==void 0&&(i=""+e.key),t.type&&t.type.defaultProps)var a=t.type.defaultProps;for(u in e)h0.call(e,u)&&!f0.hasOwnProperty(u)&&(r[u]=e[u]===void 0&&a!==void 0?a[u]:e[u])}var u=arguments.length-2;if(u===1)r.children=n;else if(1<u){a=Array(u);for(var c=0;c<u;c++)a[c]=arguments[c+2];r.children=a}return{$$typeof:Nl,type:t.type,key:i,ref:s,props:r,_owner:o}};ke.createContext=function(t){return t={$$typeof:cI,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:uI,_context:t},t.Consumer=t};ke.createElement=p0;ke.createFactory=function(t){var e=p0.bind(null,t);return e.type=t,e};ke.createRef=function(){return{current:null}};ke.forwardRef=function(t){return{$$typeof:dI,render:t}};ke.isValidElement=Cp;ke.lazy=function(t){return{$$typeof:pI,_payload:{_status:-1,_result:t},_init:vI}};ke.memo=function(t,e){return{$$typeof:fI,type:t,compare:e===void 0?null:e}};ke.startTransition=function(t){var e=Vu.transition;Vu.transition={};try{t()}finally{Vu.transition=e}};ke.unstable_act=m0;ke.useCallback=function(t,e){return yn.current.useCallback(t,e)};ke.useContext=function(t){return yn.current.useContext(t)};ke.useDebugValue=function(){};ke.useDeferredValue=function(t){return yn.current.useDeferredValue(t)};ke.useEffect=function(t,e){return yn.current.useEffect(t,e)};ke.useId=function(){return yn.current.useId()};ke.useImperativeHandle=function(t,e,n){return yn.current.useImperativeHandle(t,e,n)};ke.useInsertionEffect=function(t,e){return yn.current.useInsertionEffect(t,e)};ke.useLayoutEffect=function(t,e){return yn.current.useLayoutEffect(t,e)};ke.useMemo=function(t,e){return yn.current.useMemo(t,e)};ke.useReducer=function(t,e,n){return yn.current.useReducer(t,e,n)};ke.useRef=function(t){return yn.current.useRef(t)};ke.useState=function(t){return yn.current.useState(t)};ke.useSyncExternalStore=function(t,e,n){return yn.current.useSyncExternalStore(t,e,n)};ke.useTransition=function(){return yn.current.useTransition()};ke.version="18.3.1";a0.exports=ke;var V=a0.exports;const Gr=Tp(V),Kh=s0({__proto__:null,default:Gr},[V]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var wI=V,EI=Symbol.for("react.element"),TI=Symbol.for("react.fragment"),SI=Object.prototype.hasOwnProperty,II=wI.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,PI={key:!0,ref:!0,__self:!0,__source:!0};function g0(t,e,n){var r,i={},s=null,o=null;n!==void 0&&(s=""+n),e.key!==void 0&&(s=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)SI.call(e,r)&&!PI.hasOwnProperty(r)&&(i[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)i[r]===void 0&&(i[r]=e[r]);return{$$typeof:EI,type:t,key:s,ref:o,props:i,_owner:II.current}}td.Fragment=TI;td.jsx=g0;td.jsxs=g0;o0.exports=td;var y=o0.exports,Gh={},y0={exports:{}},Fn={},v0={exports:{}},_0={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(X,re){var te=X.length;X.push(re);e:for(;0<te;){var ye=te-1>>>1,ve=X[ye];if(0<i(ve,re))X[ye]=re,X[te]=ve,te=ye;else break e}}function n(X){return X.length===0?null:X[0]}function r(X){if(X.length===0)return null;var re=X[0],te=X.pop();if(te!==re){X[0]=te;e:for(var ye=0,ve=X.length,_e=ve>>>1;ye<_e;){var Ce=2*(ye+1)-1,$e=X[Ce],ct=Ce+1,Yt=X[ct];if(0>i($e,te))ct<ve&&0>i(Yt,$e)?(X[ye]=Yt,X[ct]=te,ye=ct):(X[ye]=$e,X[Ce]=te,ye=Ce);else if(ct<ve&&0>i(Yt,te))X[ye]=Yt,X[ct]=te,ye=ct;else break e}}return re}function i(X,re){var te=X.sortIndex-re.sortIndex;return te!==0?te:X.id-re.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();t.unstable_now=function(){return o.now()-a}}var u=[],c=[],d=1,f=null,m=3,E=!1,C=!1,A=!1,O=typeof setTimeout=="function"?setTimeout:null,P=typeof clearTimeout=="function"?clearTimeout:null,v=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function I(X){for(var re=n(c);re!==null;){if(re.callback===null)r(c);else if(re.startTime<=X)r(c),re.sortIndex=re.expirationTime,e(u,re);else break;re=n(c)}}function M(X){if(A=!1,I(X),!C)if(n(u)!==null)C=!0,Be(F);else{var re=n(c);re!==null&&ge(M,re.startTime-X)}}function F(X,re){C=!1,A&&(A=!1,P(g),g=-1),E=!0;var te=m;try{for(I(re),f=n(u);f!==null&&(!(f.expirationTime>re)||X&&!b());){var ye=f.callback;if(typeof ye=="function"){f.callback=null,m=f.priorityLevel;var ve=ye(f.expirationTime<=re);re=t.unstable_now(),typeof ve=="function"?f.callback=ve:f===n(u)&&r(u),I(re)}else r(u);f=n(u)}if(f!==null)var _e=!0;else{var Ce=n(c);Ce!==null&&ge(M,Ce.startTime-re),_e=!1}return _e}finally{f=null,m=te,E=!1}}var k=!1,S=null,g=-1,w=5,T=-1;function b(){return!(t.unstable_now()-T<w)}function N(){if(S!==null){var X=t.unstable_now();T=X;var re=!0;try{re=S(!0,X)}finally{re?R():(k=!1,S=null)}}else k=!1}var R;if(typeof v=="function")R=function(){v(N)};else if(typeof MessageChannel<"u"){var oe=new MessageChannel,Fe=oe.port2;oe.port1.onmessage=N,R=function(){Fe.postMessage(null)}}else R=function(){O(N,0)};function Be(X){S=X,k||(k=!0,R())}function ge(X,re){g=O(function(){X(t.unstable_now())},re)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(X){X.callback=null},t.unstable_continueExecution=function(){C||E||(C=!0,Be(F))},t.unstable_forceFrameRate=function(X){0>X||125<X?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):w=0<X?Math.floor(1e3/X):5},t.unstable_getCurrentPriorityLevel=function(){return m},t.unstable_getFirstCallbackNode=function(){return n(u)},t.unstable_next=function(X){switch(m){case 1:case 2:case 3:var re=3;break;default:re=m}var te=m;m=re;try{return X()}finally{m=te}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(X,re){switch(X){case 1:case 2:case 3:case 4:case 5:break;default:X=3}var te=m;m=X;try{return re()}finally{m=te}},t.unstable_scheduleCallback=function(X,re,te){var ye=t.unstable_now();switch(typeof te=="object"&&te!==null?(te=te.delay,te=typeof te=="number"&&0<te?ye+te:ye):te=ye,X){case 1:var ve=-1;break;case 2:ve=250;break;case 5:ve=1073741823;break;case 4:ve=1e4;break;default:ve=5e3}return ve=te+ve,X={id:d++,callback:re,priorityLevel:X,startTime:te,expirationTime:ve,sortIndex:-1},te>ye?(X.sortIndex=te,e(c,X),n(u)===null&&X===n(c)&&(A?(P(g),g=-1):A=!0,ge(M,te-ye))):(X.sortIndex=ve,e(u,X),C||E||(C=!0,Be(F))),X},t.unstable_shouldYield=b,t.unstable_wrapCallback=function(X){var re=m;return function(){var te=m;m=re;try{return X.apply(this,arguments)}finally{m=te}}}})(_0);v0.exports=_0;var CI=v0.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var RI=V,Vn=CI;function Y(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var w0=new Set,el={};function zs(t,e){bo(t,e),bo(t+"Capture",e)}function bo(t,e){for(el[t]=e,t=0;t<e.length;t++)w0.add(e[t])}var Jr=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Qh=Object.prototype.hasOwnProperty,AI=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Xg={},Jg={};function kI(t){return Qh.call(Jg,t)?!0:Qh.call(Xg,t)?!1:AI.test(t)?Jg[t]=!0:(Xg[t]=!0,!1)}function bI(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function xI(t,e,n,r){if(e===null||typeof e>"u"||bI(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function vn(t,e,n,r,i,s,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=s,this.removeEmptyString=o}var Kt={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Kt[t]=new vn(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];Kt[e]=new vn(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Kt[t]=new vn(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Kt[t]=new vn(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Kt[t]=new vn(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Kt[t]=new vn(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Kt[t]=new vn(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Kt[t]=new vn(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Kt[t]=new vn(t,5,!1,t.toLowerCase(),null,!1,!1)});var Rp=/[\-:]([a-z])/g;function Ap(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(Rp,Ap);Kt[e]=new vn(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(Rp,Ap);Kt[e]=new vn(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(Rp,Ap);Kt[e]=new vn(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Kt[t]=new vn(t,1,!1,t.toLowerCase(),null,!1,!1)});Kt.xlinkHref=new vn("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Kt[t]=new vn(t,1,!1,t.toLowerCase(),null,!0,!0)});function kp(t,e,n,r){var i=Kt.hasOwnProperty(e)?Kt[e]:null;(i!==null?i.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(xI(e,n,i,r)&&(n=null),r||i===null?kI(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):i.mustUseProperty?t[i.propertyName]=n===null?i.type===3?!1:"":n:(e=i.attributeName,r=i.attributeNamespace,n===null?t.removeAttribute(e):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var si=RI.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,du=Symbol.for("react.element"),so=Symbol.for("react.portal"),oo=Symbol.for("react.fragment"),bp=Symbol.for("react.strict_mode"),Yh=Symbol.for("react.profiler"),E0=Symbol.for("react.provider"),T0=Symbol.for("react.context"),xp=Symbol.for("react.forward_ref"),Xh=Symbol.for("react.suspense"),Jh=Symbol.for("react.suspense_list"),Np=Symbol.for("react.memo"),Si=Symbol.for("react.lazy"),S0=Symbol.for("react.offscreen"),Zg=Symbol.iterator;function pa(t){return t===null||typeof t!="object"?null:(t=Zg&&t[Zg]||t["@@iterator"],typeof t=="function"?t:null)}var mt=Object.assign,eh;function Ca(t){if(eh===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);eh=e&&e[1]||""}return`
`+eh+t}var th=!1;function nh(t,e){if(!t||th)return"";th=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(c){var r=c}Reflect.construct(t,[],e)}else{try{e.call()}catch(c){r=c}t.call(e.prototype)}else{try{throw Error()}catch(c){r=c}t()}}catch(c){if(c&&r&&typeof c.stack=="string"){for(var i=c.stack.split(`
`),s=r.stack.split(`
`),o=i.length-1,a=s.length-1;1<=o&&0<=a&&i[o]!==s[a];)a--;for(;1<=o&&0<=a;o--,a--)if(i[o]!==s[a]){if(o!==1||a!==1)do if(o--,a--,0>a||i[o]!==s[a]){var u=`
`+i[o].replace(" at new "," at ");return t.displayName&&u.includes("<anonymous>")&&(u=u.replace("<anonymous>",t.displayName)),u}while(1<=o&&0<=a);break}}}finally{th=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?Ca(t):""}function NI(t){switch(t.tag){case 5:return Ca(t.type);case 16:return Ca("Lazy");case 13:return Ca("Suspense");case 19:return Ca("SuspenseList");case 0:case 2:case 15:return t=nh(t.type,!1),t;case 11:return t=nh(t.type.render,!1),t;case 1:return t=nh(t.type,!0),t;default:return""}}function Zh(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case oo:return"Fragment";case so:return"Portal";case Yh:return"Profiler";case bp:return"StrictMode";case Xh:return"Suspense";case Jh:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case T0:return(t.displayName||"Context")+".Consumer";case E0:return(t._context.displayName||"Context")+".Provider";case xp:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case Np:return e=t.displayName||null,e!==null?e:Zh(t.type)||"Memo";case Si:e=t._payload,t=t._init;try{return Zh(t(e))}catch{}}return null}function OI(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Zh(e);case 8:return e===bp?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function qi(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function I0(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function DI(t){var e=I0(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,s=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(o){r=""+o,s.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function hu(t){t._valueTracker||(t._valueTracker=DI(t))}function P0(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=I0(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function rc(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function ef(t,e){var n=e.checked;return mt({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function ey(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=qi(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function C0(t,e){e=e.checked,e!=null&&kp(t,"checked",e,!1)}function tf(t,e){C0(t,e);var n=qi(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?nf(t,e.type,n):e.hasOwnProperty("defaultValue")&&nf(t,e.type,qi(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function ty(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function nf(t,e,n){(e!=="number"||rc(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var Ra=Array.isArray;function wo(t,e,n,r){if(t=t.options,e){e={};for(var i=0;i<n.length;i++)e["$"+n[i]]=!0;for(n=0;n<t.length;n++)i=e.hasOwnProperty("$"+t[n].value),t[n].selected!==i&&(t[n].selected=i),i&&r&&(t[n].defaultSelected=!0)}else{for(n=""+qi(n),e=null,i=0;i<t.length;i++){if(t[i].value===n){t[i].selected=!0,r&&(t[i].defaultSelected=!0);return}e!==null||t[i].disabled||(e=t[i])}e!==null&&(e.selected=!0)}}function rf(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(Y(91));return mt({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function ny(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(Y(92));if(Ra(n)){if(1<n.length)throw Error(Y(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:qi(n)}}function R0(t,e){var n=qi(e.value),r=qi(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function ry(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function A0(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function sf(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?A0(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var fu,k0=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,i){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,i)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(fu=fu||document.createElement("div"),fu.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=fu.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function tl(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var Fa={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},LI=["Webkit","ms","Moz","O"];Object.keys(Fa).forEach(function(t){LI.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),Fa[e]=Fa[t]})});function b0(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||Fa.hasOwnProperty(t)&&Fa[t]?(""+e).trim():e+"px"}function x0(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=b0(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,i):t[n]=i}}var MI=mt({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function of(t,e){if(e){if(MI[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(Y(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(Y(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(Y(61))}if(e.style!=null&&typeof e.style!="object")throw Error(Y(62))}}function af(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var lf=null;function Op(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var uf=null,Eo=null,To=null;function iy(t){if(t=Ll(t)){if(typeof uf!="function")throw Error(Y(280));var e=t.stateNode;e&&(e=od(e),uf(t.stateNode,t.type,e))}}function N0(t){Eo?To?To.push(t):To=[t]:Eo=t}function O0(){if(Eo){var t=Eo,e=To;if(To=Eo=null,iy(t),e)for(t=0;t<e.length;t++)iy(e[t])}}function D0(t,e){return t(e)}function L0(){}var rh=!1;function M0(t,e,n){if(rh)return t(e,n);rh=!0;try{return D0(t,e,n)}finally{rh=!1,(Eo!==null||To!==null)&&(L0(),O0())}}function nl(t,e){var n=t.stateNode;if(n===null)return null;var r=od(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(Y(231,e,typeof n));return n}var cf=!1;if(Jr)try{var ma={};Object.defineProperty(ma,"passive",{get:function(){cf=!0}}),window.addEventListener("test",ma,ma),window.removeEventListener("test",ma,ma)}catch{cf=!1}function VI(t,e,n,r,i,s,o,a,u){var c=Array.prototype.slice.call(arguments,3);try{e.apply(n,c)}catch(d){this.onError(d)}}var Ua=!1,ic=null,sc=!1,df=null,jI={onError:function(t){Ua=!0,ic=t}};function FI(t,e,n,r,i,s,o,a,u){Ua=!1,ic=null,VI.apply(jI,arguments)}function UI(t,e,n,r,i,s,o,a,u){if(FI.apply(this,arguments),Ua){if(Ua){var c=ic;Ua=!1,ic=null}else throw Error(Y(198));sc||(sc=!0,df=c)}}function Bs(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function V0(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function sy(t){if(Bs(t)!==t)throw Error(Y(188))}function zI(t){var e=t.alternate;if(!e){if(e=Bs(t),e===null)throw Error(Y(188));return e!==t?null:t}for(var n=t,r=e;;){var i=n.return;if(i===null)break;var s=i.alternate;if(s===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===n)return sy(i),t;if(s===r)return sy(i),e;s=s.sibling}throw Error(Y(188))}if(n.return!==r.return)n=i,r=s;else{for(var o=!1,a=i.child;a;){if(a===n){o=!0,n=i,r=s;break}if(a===r){o=!0,r=i,n=s;break}a=a.sibling}if(!o){for(a=s.child;a;){if(a===n){o=!0,n=s,r=i;break}if(a===r){o=!0,r=s,n=i;break}a=a.sibling}if(!o)throw Error(Y(189))}}if(n.alternate!==r)throw Error(Y(190))}if(n.tag!==3)throw Error(Y(188));return n.stateNode.current===n?t:e}function j0(t){return t=zI(t),t!==null?F0(t):null}function F0(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=F0(t);if(e!==null)return e;t=t.sibling}return null}var U0=Vn.unstable_scheduleCallback,oy=Vn.unstable_cancelCallback,BI=Vn.unstable_shouldYield,$I=Vn.unstable_requestPaint,Pt=Vn.unstable_now,HI=Vn.unstable_getCurrentPriorityLevel,Dp=Vn.unstable_ImmediatePriority,z0=Vn.unstable_UserBlockingPriority,oc=Vn.unstable_NormalPriority,WI=Vn.unstable_LowPriority,B0=Vn.unstable_IdlePriority,nd=null,Ir=null;function qI(t){if(Ir&&typeof Ir.onCommitFiberRoot=="function")try{Ir.onCommitFiberRoot(nd,t,void 0,(t.current.flags&128)===128)}catch{}}var cr=Math.clz32?Math.clz32:QI,KI=Math.log,GI=Math.LN2;function QI(t){return t>>>=0,t===0?32:31-(KI(t)/GI|0)|0}var pu=64,mu=4194304;function Aa(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function ac(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,i=t.suspendedLanes,s=t.pingedLanes,o=n&268435455;if(o!==0){var a=o&~i;a!==0?r=Aa(a):(s&=o,s!==0&&(r=Aa(s)))}else o=n&~i,o!==0?r=Aa(o):s!==0&&(r=Aa(s));if(r===0)return 0;if(e!==0&&e!==r&&!(e&i)&&(i=r&-r,s=e&-e,i>=s||i===16&&(s&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-cr(e),i=1<<n,r|=t[n],e&=~i;return r}function YI(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function XI(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,i=t.expirationTimes,s=t.pendingLanes;0<s;){var o=31-cr(s),a=1<<o,u=i[o];u===-1?(!(a&n)||a&r)&&(i[o]=YI(a,e)):u<=e&&(t.expiredLanes|=a),s&=~a}}function hf(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function $0(){var t=pu;return pu<<=1,!(pu&4194240)&&(pu=64),t}function ih(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function Ol(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-cr(e),t[e]=n}function JI(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var i=31-cr(n),s=1<<i;e[i]=0,r[i]=-1,t[i]=-1,n&=~s}}function Lp(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-cr(n),i=1<<r;i&e|t[r]&e&&(t[r]|=e),n&=~i}}var Ye=0;function H0(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var W0,Mp,q0,K0,G0,ff=!1,gu=[],Di=null,Li=null,Mi=null,rl=new Map,il=new Map,Pi=[],ZI="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function ay(t,e){switch(t){case"focusin":case"focusout":Di=null;break;case"dragenter":case"dragleave":Li=null;break;case"mouseover":case"mouseout":Mi=null;break;case"pointerover":case"pointerout":rl.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":il.delete(e.pointerId)}}function ga(t,e,n,r,i,s){return t===null||t.nativeEvent!==s?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:s,targetContainers:[i]},e!==null&&(e=Ll(e),e!==null&&Mp(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),t)}function eP(t,e,n,r,i){switch(e){case"focusin":return Di=ga(Di,t,e,n,r,i),!0;case"dragenter":return Li=ga(Li,t,e,n,r,i),!0;case"mouseover":return Mi=ga(Mi,t,e,n,r,i),!0;case"pointerover":var s=i.pointerId;return rl.set(s,ga(rl.get(s)||null,t,e,n,r,i)),!0;case"gotpointercapture":return s=i.pointerId,il.set(s,ga(il.get(s)||null,t,e,n,r,i)),!0}return!1}function Q0(t){var e=fs(t.target);if(e!==null){var n=Bs(e);if(n!==null){if(e=n.tag,e===13){if(e=V0(n),e!==null){t.blockedOn=e,G0(t.priority,function(){q0(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function ju(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=pf(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);lf=r,n.target.dispatchEvent(r),lf=null}else return e=Ll(n),e!==null&&Mp(e),t.blockedOn=n,!1;e.shift()}return!0}function ly(t,e,n){ju(t)&&n.delete(e)}function tP(){ff=!1,Di!==null&&ju(Di)&&(Di=null),Li!==null&&ju(Li)&&(Li=null),Mi!==null&&ju(Mi)&&(Mi=null),rl.forEach(ly),il.forEach(ly)}function ya(t,e){t.blockedOn===e&&(t.blockedOn=null,ff||(ff=!0,Vn.unstable_scheduleCallback(Vn.unstable_NormalPriority,tP)))}function sl(t){function e(i){return ya(i,t)}if(0<gu.length){ya(gu[0],t);for(var n=1;n<gu.length;n++){var r=gu[n];r.blockedOn===t&&(r.blockedOn=null)}}for(Di!==null&&ya(Di,t),Li!==null&&ya(Li,t),Mi!==null&&ya(Mi,t),rl.forEach(e),il.forEach(e),n=0;n<Pi.length;n++)r=Pi[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<Pi.length&&(n=Pi[0],n.blockedOn===null);)Q0(n),n.blockedOn===null&&Pi.shift()}var So=si.ReactCurrentBatchConfig,lc=!0;function nP(t,e,n,r){var i=Ye,s=So.transition;So.transition=null;try{Ye=1,Vp(t,e,n,r)}finally{Ye=i,So.transition=s}}function rP(t,e,n,r){var i=Ye,s=So.transition;So.transition=null;try{Ye=4,Vp(t,e,n,r)}finally{Ye=i,So.transition=s}}function Vp(t,e,n,r){if(lc){var i=pf(t,e,n,r);if(i===null)ph(t,e,r,uc,n),ay(t,r);else if(eP(i,t,e,n,r))r.stopPropagation();else if(ay(t,r),e&4&&-1<ZI.indexOf(t)){for(;i!==null;){var s=Ll(i);if(s!==null&&W0(s),s=pf(t,e,n,r),s===null&&ph(t,e,r,uc,n),s===i)break;i=s}i!==null&&r.stopPropagation()}else ph(t,e,r,null,n)}}var uc=null;function pf(t,e,n,r){if(uc=null,t=Op(r),t=fs(t),t!==null)if(e=Bs(t),e===null)t=null;else if(n=e.tag,n===13){if(t=V0(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return uc=t,null}function Y0(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(HI()){case Dp:return 1;case z0:return 4;case oc:case WI:return 16;case B0:return 536870912;default:return 16}default:return 16}}var xi=null,jp=null,Fu=null;function X0(){if(Fu)return Fu;var t,e=jp,n=e.length,r,i="value"in xi?xi.value:xi.textContent,s=i.length;for(t=0;t<n&&e[t]===i[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===i[s-r];r++);return Fu=i.slice(t,1<r?1-r:void 0)}function Uu(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function yu(){return!0}function uy(){return!1}function Un(t){function e(n,r,i,s,o){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=s,this.target=o,this.currentTarget=null;for(var a in t)t.hasOwnProperty(a)&&(n=t[a],this[a]=n?n(s):s[a]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?yu:uy,this.isPropagationStopped=uy,this}return mt(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=yu)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=yu)},persist:function(){},isPersistent:yu}),e}var Yo={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Fp=Un(Yo),Dl=mt({},Yo,{view:0,detail:0}),iP=Un(Dl),sh,oh,va,rd=mt({},Dl,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Up,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==va&&(va&&t.type==="mousemove"?(sh=t.screenX-va.screenX,oh=t.screenY-va.screenY):oh=sh=0,va=t),sh)},movementY:function(t){return"movementY"in t?t.movementY:oh}}),cy=Un(rd),sP=mt({},rd,{dataTransfer:0}),oP=Un(sP),aP=mt({},Dl,{relatedTarget:0}),ah=Un(aP),lP=mt({},Yo,{animationName:0,elapsedTime:0,pseudoElement:0}),uP=Un(lP),cP=mt({},Yo,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),dP=Un(cP),hP=mt({},Yo,{data:0}),dy=Un(hP),fP={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},pP={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},mP={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function gP(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=mP[t])?!!e[t]:!1}function Up(){return gP}var yP=mt({},Dl,{key:function(t){if(t.key){var e=fP[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Uu(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?pP[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Up,charCode:function(t){return t.type==="keypress"?Uu(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Uu(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),vP=Un(yP),_P=mt({},rd,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),hy=Un(_P),wP=mt({},Dl,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Up}),EP=Un(wP),TP=mt({},Yo,{propertyName:0,elapsedTime:0,pseudoElement:0}),SP=Un(TP),IP=mt({},rd,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),PP=Un(IP),CP=[9,13,27,32],zp=Jr&&"CompositionEvent"in window,za=null;Jr&&"documentMode"in document&&(za=document.documentMode);var RP=Jr&&"TextEvent"in window&&!za,J0=Jr&&(!zp||za&&8<za&&11>=za),fy=" ",py=!1;function Z0(t,e){switch(t){case"keyup":return CP.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function ew(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var ao=!1;function AP(t,e){switch(t){case"compositionend":return ew(e);case"keypress":return e.which!==32?null:(py=!0,fy);case"textInput":return t=e.data,t===fy&&py?null:t;default:return null}}function kP(t,e){if(ao)return t==="compositionend"||!zp&&Z0(t,e)?(t=X0(),Fu=jp=xi=null,ao=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return J0&&e.locale!=="ko"?null:e.data;default:return null}}var bP={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function my(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!bP[t.type]:e==="textarea"}function tw(t,e,n,r){N0(r),e=cc(e,"onChange"),0<e.length&&(n=new Fp("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var Ba=null,ol=null;function xP(t){hw(t,0)}function id(t){var e=co(t);if(P0(e))return t}function NP(t,e){if(t==="change")return e}var nw=!1;if(Jr){var lh;if(Jr){var uh="oninput"in document;if(!uh){var gy=document.createElement("div");gy.setAttribute("oninput","return;"),uh=typeof gy.oninput=="function"}lh=uh}else lh=!1;nw=lh&&(!document.documentMode||9<document.documentMode)}function yy(){Ba&&(Ba.detachEvent("onpropertychange",rw),ol=Ba=null)}function rw(t){if(t.propertyName==="value"&&id(ol)){var e=[];tw(e,ol,t,Op(t)),M0(xP,e)}}function OP(t,e,n){t==="focusin"?(yy(),Ba=e,ol=n,Ba.attachEvent("onpropertychange",rw)):t==="focusout"&&yy()}function DP(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return id(ol)}function LP(t,e){if(t==="click")return id(e)}function MP(t,e){if(t==="input"||t==="change")return id(e)}function VP(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var fr=typeof Object.is=="function"?Object.is:VP;function al(t,e){if(fr(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!Qh.call(e,i)||!fr(t[i],e[i]))return!1}return!0}function vy(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function _y(t,e){var n=vy(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=vy(n)}}function iw(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?iw(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function sw(){for(var t=window,e=rc();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=rc(t.document)}return e}function Bp(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function jP(t){var e=sw(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&iw(n.ownerDocument.documentElement,n)){if(r!==null&&Bp(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var i=n.textContent.length,s=Math.min(r.start,i);r=r.end===void 0?s:Math.min(r.end,i),!t.extend&&s>r&&(i=r,r=s,s=i),i=_y(n,s);var o=_y(n,r);i&&o&&(t.rangeCount!==1||t.anchorNode!==i.node||t.anchorOffset!==i.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),t.removeAllRanges(),s>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var FP=Jr&&"documentMode"in document&&11>=document.documentMode,lo=null,mf=null,$a=null,gf=!1;function wy(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;gf||lo==null||lo!==rc(r)||(r=lo,"selectionStart"in r&&Bp(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),$a&&al($a,r)||($a=r,r=cc(mf,"onSelect"),0<r.length&&(e=new Fp("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=lo)))}function vu(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var uo={animationend:vu("Animation","AnimationEnd"),animationiteration:vu("Animation","AnimationIteration"),animationstart:vu("Animation","AnimationStart"),transitionend:vu("Transition","TransitionEnd")},ch={},ow={};Jr&&(ow=document.createElement("div").style,"AnimationEvent"in window||(delete uo.animationend.animation,delete uo.animationiteration.animation,delete uo.animationstart.animation),"TransitionEvent"in window||delete uo.transitionend.transition);function sd(t){if(ch[t])return ch[t];if(!uo[t])return t;var e=uo[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in ow)return ch[t]=e[n];return t}var aw=sd("animationend"),lw=sd("animationiteration"),uw=sd("animationstart"),cw=sd("transitionend"),dw=new Map,Ey="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Ji(t,e){dw.set(t,e),zs(e,[t])}for(var dh=0;dh<Ey.length;dh++){var hh=Ey[dh],UP=hh.toLowerCase(),zP=hh[0].toUpperCase()+hh.slice(1);Ji(UP,"on"+zP)}Ji(aw,"onAnimationEnd");Ji(lw,"onAnimationIteration");Ji(uw,"onAnimationStart");Ji("dblclick","onDoubleClick");Ji("focusin","onFocus");Ji("focusout","onBlur");Ji(cw,"onTransitionEnd");bo("onMouseEnter",["mouseout","mouseover"]);bo("onMouseLeave",["mouseout","mouseover"]);bo("onPointerEnter",["pointerout","pointerover"]);bo("onPointerLeave",["pointerout","pointerover"]);zs("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));zs("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));zs("onBeforeInput",["compositionend","keypress","textInput","paste"]);zs("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));zs("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));zs("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var ka="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),BP=new Set("cancel close invalid load scroll toggle".split(" ").concat(ka));function Ty(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,UI(r,e,void 0,t),t.currentTarget=null}function hw(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],i=r.event;r=r.listeners;e:{var s=void 0;if(e)for(var o=r.length-1;0<=o;o--){var a=r[o],u=a.instance,c=a.currentTarget;if(a=a.listener,u!==s&&i.isPropagationStopped())break e;Ty(i,a,c),s=u}else for(o=0;o<r.length;o++){if(a=r[o],u=a.instance,c=a.currentTarget,a=a.listener,u!==s&&i.isPropagationStopped())break e;Ty(i,a,c),s=u}}}if(sc)throw t=df,sc=!1,df=null,t}function ot(t,e){var n=e[Ef];n===void 0&&(n=e[Ef]=new Set);var r=t+"__bubble";n.has(r)||(fw(e,t,2,!1),n.add(r))}function fh(t,e,n){var r=0;e&&(r|=4),fw(n,t,r,e)}var _u="_reactListening"+Math.random().toString(36).slice(2);function ll(t){if(!t[_u]){t[_u]=!0,w0.forEach(function(n){n!=="selectionchange"&&(BP.has(n)||fh(n,!1,t),fh(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[_u]||(e[_u]=!0,fh("selectionchange",!1,e))}}function fw(t,e,n,r){switch(Y0(e)){case 1:var i=nP;break;case 4:i=rP;break;default:i=Vp}n=i.bind(null,e,n,t),i=void 0,!cf||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),r?i!==void 0?t.addEventListener(e,n,{capture:!0,passive:i}):t.addEventListener(e,n,!0):i!==void 0?t.addEventListener(e,n,{passive:i}):t.addEventListener(e,n,!1)}function ph(t,e,n,r,i){var s=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var a=r.stateNode.containerInfo;if(a===i||a.nodeType===8&&a.parentNode===i)break;if(o===4)for(o=r.return;o!==null;){var u=o.tag;if((u===3||u===4)&&(u=o.stateNode.containerInfo,u===i||u.nodeType===8&&u.parentNode===i))return;o=o.return}for(;a!==null;){if(o=fs(a),o===null)return;if(u=o.tag,u===5||u===6){r=s=o;continue e}a=a.parentNode}}r=r.return}M0(function(){var c=s,d=Op(n),f=[];e:{var m=dw.get(t);if(m!==void 0){var E=Fp,C=t;switch(t){case"keypress":if(Uu(n)===0)break e;case"keydown":case"keyup":E=vP;break;case"focusin":C="focus",E=ah;break;case"focusout":C="blur",E=ah;break;case"beforeblur":case"afterblur":E=ah;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":E=cy;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":E=oP;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":E=EP;break;case aw:case lw:case uw:E=uP;break;case cw:E=SP;break;case"scroll":E=iP;break;case"wheel":E=PP;break;case"copy":case"cut":case"paste":E=dP;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":E=hy}var A=(e&4)!==0,O=!A&&t==="scroll",P=A?m!==null?m+"Capture":null:m;A=[];for(var v=c,I;v!==null;){I=v;var M=I.stateNode;if(I.tag===5&&M!==null&&(I=M,P!==null&&(M=nl(v,P),M!=null&&A.push(ul(v,M,I)))),O)break;v=v.return}0<A.length&&(m=new E(m,C,null,n,d),f.push({event:m,listeners:A}))}}if(!(e&7)){e:{if(m=t==="mouseover"||t==="pointerover",E=t==="mouseout"||t==="pointerout",m&&n!==lf&&(C=n.relatedTarget||n.fromElement)&&(fs(C)||C[Zr]))break e;if((E||m)&&(m=d.window===d?d:(m=d.ownerDocument)?m.defaultView||m.parentWindow:window,E?(C=n.relatedTarget||n.toElement,E=c,C=C?fs(C):null,C!==null&&(O=Bs(C),C!==O||C.tag!==5&&C.tag!==6)&&(C=null)):(E=null,C=c),E!==C)){if(A=cy,M="onMouseLeave",P="onMouseEnter",v="mouse",(t==="pointerout"||t==="pointerover")&&(A=hy,M="onPointerLeave",P="onPointerEnter",v="pointer"),O=E==null?m:co(E),I=C==null?m:co(C),m=new A(M,v+"leave",E,n,d),m.target=O,m.relatedTarget=I,M=null,fs(d)===c&&(A=new A(P,v+"enter",C,n,d),A.target=I,A.relatedTarget=O,M=A),O=M,E&&C)t:{for(A=E,P=C,v=0,I=A;I;I=Zs(I))v++;for(I=0,M=P;M;M=Zs(M))I++;for(;0<v-I;)A=Zs(A),v--;for(;0<I-v;)P=Zs(P),I--;for(;v--;){if(A===P||P!==null&&A===P.alternate)break t;A=Zs(A),P=Zs(P)}A=null}else A=null;E!==null&&Sy(f,m,E,A,!1),C!==null&&O!==null&&Sy(f,O,C,A,!0)}}e:{if(m=c?co(c):window,E=m.nodeName&&m.nodeName.toLowerCase(),E==="select"||E==="input"&&m.type==="file")var F=NP;else if(my(m))if(nw)F=MP;else{F=DP;var k=OP}else(E=m.nodeName)&&E.toLowerCase()==="input"&&(m.type==="checkbox"||m.type==="radio")&&(F=LP);if(F&&(F=F(t,c))){tw(f,F,n,d);break e}k&&k(t,m,c),t==="focusout"&&(k=m._wrapperState)&&k.controlled&&m.type==="number"&&nf(m,"number",m.value)}switch(k=c?co(c):window,t){case"focusin":(my(k)||k.contentEditable==="true")&&(lo=k,mf=c,$a=null);break;case"focusout":$a=mf=lo=null;break;case"mousedown":gf=!0;break;case"contextmenu":case"mouseup":case"dragend":gf=!1,wy(f,n,d);break;case"selectionchange":if(FP)break;case"keydown":case"keyup":wy(f,n,d)}var S;if(zp)e:{switch(t){case"compositionstart":var g="onCompositionStart";break e;case"compositionend":g="onCompositionEnd";break e;case"compositionupdate":g="onCompositionUpdate";break e}g=void 0}else ao?Z0(t,n)&&(g="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(g="onCompositionStart");g&&(J0&&n.locale!=="ko"&&(ao||g!=="onCompositionStart"?g==="onCompositionEnd"&&ao&&(S=X0()):(xi=d,jp="value"in xi?xi.value:xi.textContent,ao=!0)),k=cc(c,g),0<k.length&&(g=new dy(g,t,null,n,d),f.push({event:g,listeners:k}),S?g.data=S:(S=ew(n),S!==null&&(g.data=S)))),(S=RP?AP(t,n):kP(t,n))&&(c=cc(c,"onBeforeInput"),0<c.length&&(d=new dy("onBeforeInput","beforeinput",null,n,d),f.push({event:d,listeners:c}),d.data=S))}hw(f,e)})}function ul(t,e,n){return{instance:t,listener:e,currentTarget:n}}function cc(t,e){for(var n=e+"Capture",r=[];t!==null;){var i=t,s=i.stateNode;i.tag===5&&s!==null&&(i=s,s=nl(t,n),s!=null&&r.unshift(ul(t,s,i)),s=nl(t,e),s!=null&&r.push(ul(t,s,i))),t=t.return}return r}function Zs(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function Sy(t,e,n,r,i){for(var s=e._reactName,o=[];n!==null&&n!==r;){var a=n,u=a.alternate,c=a.stateNode;if(u!==null&&u===r)break;a.tag===5&&c!==null&&(a=c,i?(u=nl(n,s),u!=null&&o.unshift(ul(n,u,a))):i||(u=nl(n,s),u!=null&&o.push(ul(n,u,a)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var $P=/\r\n?/g,HP=/\u0000|\uFFFD/g;function Iy(t){return(typeof t=="string"?t:""+t).replace($P,`
`).replace(HP,"")}function wu(t,e,n){if(e=Iy(e),Iy(t)!==e&&n)throw Error(Y(425))}function dc(){}var yf=null,vf=null;function _f(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var wf=typeof setTimeout=="function"?setTimeout:void 0,WP=typeof clearTimeout=="function"?clearTimeout:void 0,Py=typeof Promise=="function"?Promise:void 0,qP=typeof queueMicrotask=="function"?queueMicrotask:typeof Py<"u"?function(t){return Py.resolve(null).then(t).catch(KP)}:wf;function KP(t){setTimeout(function(){throw t})}function mh(t,e){var n=e,r=0;do{var i=n.nextSibling;if(t.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(r===0){t.removeChild(i),sl(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=i}while(n);sl(e)}function Vi(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function Cy(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var Xo=Math.random().toString(36).slice(2),Tr="__reactFiber$"+Xo,cl="__reactProps$"+Xo,Zr="__reactContainer$"+Xo,Ef="__reactEvents$"+Xo,GP="__reactListeners$"+Xo,QP="__reactHandles$"+Xo;function fs(t){var e=t[Tr];if(e)return e;for(var n=t.parentNode;n;){if(e=n[Zr]||n[Tr]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=Cy(t);t!==null;){if(n=t[Tr])return n;t=Cy(t)}return e}t=n,n=t.parentNode}return null}function Ll(t){return t=t[Tr]||t[Zr],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function co(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(Y(33))}function od(t){return t[cl]||null}var Tf=[],ho=-1;function Zi(t){return{current:t}}function at(t){0>ho||(t.current=Tf[ho],Tf[ho]=null,ho--)}function et(t,e){ho++,Tf[ho]=t.current,t.current=e}var Ki={},ln=Zi(Ki),Sn=Zi(!1),Ts=Ki;function xo(t,e){var n=t.type.contextTypes;if(!n)return Ki;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var i={},s;for(s in n)i[s]=e[s];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=i),i}function In(t){return t=t.childContextTypes,t!=null}function hc(){at(Sn),at(ln)}function Ry(t,e,n){if(ln.current!==Ki)throw Error(Y(168));et(ln,e),et(Sn,n)}function pw(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in e))throw Error(Y(108,OI(t)||"Unknown",i));return mt({},n,r)}function fc(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Ki,Ts=ln.current,et(ln,t),et(Sn,Sn.current),!0}function Ay(t,e,n){var r=t.stateNode;if(!r)throw Error(Y(169));n?(t=pw(t,e,Ts),r.__reactInternalMemoizedMergedChildContext=t,at(Sn),at(ln),et(ln,t)):at(Sn),et(Sn,n)}var zr=null,ad=!1,gh=!1;function mw(t){zr===null?zr=[t]:zr.push(t)}function YP(t){ad=!0,mw(t)}function es(){if(!gh&&zr!==null){gh=!0;var t=0,e=Ye;try{var n=zr;for(Ye=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}zr=null,ad=!1}catch(i){throw zr!==null&&(zr=zr.slice(t+1)),U0(Dp,es),i}finally{Ye=e,gh=!1}}return null}var fo=[],po=0,pc=null,mc=0,Gn=[],Qn=0,Ss=null,$r=1,Hr="";function us(t,e){fo[po++]=mc,fo[po++]=pc,pc=t,mc=e}function gw(t,e,n){Gn[Qn++]=$r,Gn[Qn++]=Hr,Gn[Qn++]=Ss,Ss=t;var r=$r;t=Hr;var i=32-cr(r)-1;r&=~(1<<i),n+=1;var s=32-cr(e)+i;if(30<s){var o=i-i%5;s=(r&(1<<o)-1).toString(32),r>>=o,i-=o,$r=1<<32-cr(e)+i|n<<i|r,Hr=s+t}else $r=1<<s|n<<i|r,Hr=t}function $p(t){t.return!==null&&(us(t,1),gw(t,1,0))}function Hp(t){for(;t===pc;)pc=fo[--po],fo[po]=null,mc=fo[--po],fo[po]=null;for(;t===Ss;)Ss=Gn[--Qn],Gn[Qn]=null,Hr=Gn[--Qn],Gn[Qn]=null,$r=Gn[--Qn],Gn[Qn]=null}var Ln=null,Nn=null,ut=!1,ur=null;function yw(t,e){var n=Xn(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function ky(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,Ln=t,Nn=Vi(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,Ln=t,Nn=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=Ss!==null?{id:$r,overflow:Hr}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=Xn(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,Ln=t,Nn=null,!0):!1;default:return!1}}function Sf(t){return(t.mode&1)!==0&&(t.flags&128)===0}function If(t){if(ut){var e=Nn;if(e){var n=e;if(!ky(t,e)){if(Sf(t))throw Error(Y(418));e=Vi(n.nextSibling);var r=Ln;e&&ky(t,e)?yw(r,n):(t.flags=t.flags&-4097|2,ut=!1,Ln=t)}}else{if(Sf(t))throw Error(Y(418));t.flags=t.flags&-4097|2,ut=!1,Ln=t}}}function by(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Ln=t}function Eu(t){if(t!==Ln)return!1;if(!ut)return by(t),ut=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!_f(t.type,t.memoizedProps)),e&&(e=Nn)){if(Sf(t))throw vw(),Error(Y(418));for(;e;)yw(t,e),e=Vi(e.nextSibling)}if(by(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(Y(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){Nn=Vi(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}Nn=null}}else Nn=Ln?Vi(t.stateNode.nextSibling):null;return!0}function vw(){for(var t=Nn;t;)t=Vi(t.nextSibling)}function No(){Nn=Ln=null,ut=!1}function Wp(t){ur===null?ur=[t]:ur.push(t)}var XP=si.ReactCurrentBatchConfig;function _a(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(Y(309));var r=n.stateNode}if(!r)throw Error(Y(147,t));var i=r,s=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===s?e.ref:(e=function(o){var a=i.refs;o===null?delete a[s]:a[s]=o},e._stringRef=s,e)}if(typeof t!="string")throw Error(Y(284));if(!n._owner)throw Error(Y(290,t))}return t}function Tu(t,e){throw t=Object.prototype.toString.call(e),Error(Y(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function xy(t){var e=t._init;return e(t._payload)}function _w(t){function e(P,v){if(t){var I=P.deletions;I===null?(P.deletions=[v],P.flags|=16):I.push(v)}}function n(P,v){if(!t)return null;for(;v!==null;)e(P,v),v=v.sibling;return null}function r(P,v){for(P=new Map;v!==null;)v.key!==null?P.set(v.key,v):P.set(v.index,v),v=v.sibling;return P}function i(P,v){return P=zi(P,v),P.index=0,P.sibling=null,P}function s(P,v,I){return P.index=I,t?(I=P.alternate,I!==null?(I=I.index,I<v?(P.flags|=2,v):I):(P.flags|=2,v)):(P.flags|=1048576,v)}function o(P){return t&&P.alternate===null&&(P.flags|=2),P}function a(P,v,I,M){return v===null||v.tag!==6?(v=Sh(I,P.mode,M),v.return=P,v):(v=i(v,I),v.return=P,v)}function u(P,v,I,M){var F=I.type;return F===oo?d(P,v,I.props.children,M,I.key):v!==null&&(v.elementType===F||typeof F=="object"&&F!==null&&F.$$typeof===Si&&xy(F)===v.type)?(M=i(v,I.props),M.ref=_a(P,v,I),M.return=P,M):(M=Ku(I.type,I.key,I.props,null,P.mode,M),M.ref=_a(P,v,I),M.return=P,M)}function c(P,v,I,M){return v===null||v.tag!==4||v.stateNode.containerInfo!==I.containerInfo||v.stateNode.implementation!==I.implementation?(v=Ih(I,P.mode,M),v.return=P,v):(v=i(v,I.children||[]),v.return=P,v)}function d(P,v,I,M,F){return v===null||v.tag!==7?(v=ws(I,P.mode,M,F),v.return=P,v):(v=i(v,I),v.return=P,v)}function f(P,v,I){if(typeof v=="string"&&v!==""||typeof v=="number")return v=Sh(""+v,P.mode,I),v.return=P,v;if(typeof v=="object"&&v!==null){switch(v.$$typeof){case du:return I=Ku(v.type,v.key,v.props,null,P.mode,I),I.ref=_a(P,null,v),I.return=P,I;case so:return v=Ih(v,P.mode,I),v.return=P,v;case Si:var M=v._init;return f(P,M(v._payload),I)}if(Ra(v)||pa(v))return v=ws(v,P.mode,I,null),v.return=P,v;Tu(P,v)}return null}function m(P,v,I,M){var F=v!==null?v.key:null;if(typeof I=="string"&&I!==""||typeof I=="number")return F!==null?null:a(P,v,""+I,M);if(typeof I=="object"&&I!==null){switch(I.$$typeof){case du:return I.key===F?u(P,v,I,M):null;case so:return I.key===F?c(P,v,I,M):null;case Si:return F=I._init,m(P,v,F(I._payload),M)}if(Ra(I)||pa(I))return F!==null?null:d(P,v,I,M,null);Tu(P,I)}return null}function E(P,v,I,M,F){if(typeof M=="string"&&M!==""||typeof M=="number")return P=P.get(I)||null,a(v,P,""+M,F);if(typeof M=="object"&&M!==null){switch(M.$$typeof){case du:return P=P.get(M.key===null?I:M.key)||null,u(v,P,M,F);case so:return P=P.get(M.key===null?I:M.key)||null,c(v,P,M,F);case Si:var k=M._init;return E(P,v,I,k(M._payload),F)}if(Ra(M)||pa(M))return P=P.get(I)||null,d(v,P,M,F,null);Tu(v,M)}return null}function C(P,v,I,M){for(var F=null,k=null,S=v,g=v=0,w=null;S!==null&&g<I.length;g++){S.index>g?(w=S,S=null):w=S.sibling;var T=m(P,S,I[g],M);if(T===null){S===null&&(S=w);break}t&&S&&T.alternate===null&&e(P,S),v=s(T,v,g),k===null?F=T:k.sibling=T,k=T,S=w}if(g===I.length)return n(P,S),ut&&us(P,g),F;if(S===null){for(;g<I.length;g++)S=f(P,I[g],M),S!==null&&(v=s(S,v,g),k===null?F=S:k.sibling=S,k=S);return ut&&us(P,g),F}for(S=r(P,S);g<I.length;g++)w=E(S,P,g,I[g],M),w!==null&&(t&&w.alternate!==null&&S.delete(w.key===null?g:w.key),v=s(w,v,g),k===null?F=w:k.sibling=w,k=w);return t&&S.forEach(function(b){return e(P,b)}),ut&&us(P,g),F}function A(P,v,I,M){var F=pa(I);if(typeof F!="function")throw Error(Y(150));if(I=F.call(I),I==null)throw Error(Y(151));for(var k=F=null,S=v,g=v=0,w=null,T=I.next();S!==null&&!T.done;g++,T=I.next()){S.index>g?(w=S,S=null):w=S.sibling;var b=m(P,S,T.value,M);if(b===null){S===null&&(S=w);break}t&&S&&b.alternate===null&&e(P,S),v=s(b,v,g),k===null?F=b:k.sibling=b,k=b,S=w}if(T.done)return n(P,S),ut&&us(P,g),F;if(S===null){for(;!T.done;g++,T=I.next())T=f(P,T.value,M),T!==null&&(v=s(T,v,g),k===null?F=T:k.sibling=T,k=T);return ut&&us(P,g),F}for(S=r(P,S);!T.done;g++,T=I.next())T=E(S,P,g,T.value,M),T!==null&&(t&&T.alternate!==null&&S.delete(T.key===null?g:T.key),v=s(T,v,g),k===null?F=T:k.sibling=T,k=T);return t&&S.forEach(function(N){return e(P,N)}),ut&&us(P,g),F}function O(P,v,I,M){if(typeof I=="object"&&I!==null&&I.type===oo&&I.key===null&&(I=I.props.children),typeof I=="object"&&I!==null){switch(I.$$typeof){case du:e:{for(var F=I.key,k=v;k!==null;){if(k.key===F){if(F=I.type,F===oo){if(k.tag===7){n(P,k.sibling),v=i(k,I.props.children),v.return=P,P=v;break e}}else if(k.elementType===F||typeof F=="object"&&F!==null&&F.$$typeof===Si&&xy(F)===k.type){n(P,k.sibling),v=i(k,I.props),v.ref=_a(P,k,I),v.return=P,P=v;break e}n(P,k);break}else e(P,k);k=k.sibling}I.type===oo?(v=ws(I.props.children,P.mode,M,I.key),v.return=P,P=v):(M=Ku(I.type,I.key,I.props,null,P.mode,M),M.ref=_a(P,v,I),M.return=P,P=M)}return o(P);case so:e:{for(k=I.key;v!==null;){if(v.key===k)if(v.tag===4&&v.stateNode.containerInfo===I.containerInfo&&v.stateNode.implementation===I.implementation){n(P,v.sibling),v=i(v,I.children||[]),v.return=P,P=v;break e}else{n(P,v);break}else e(P,v);v=v.sibling}v=Ih(I,P.mode,M),v.return=P,P=v}return o(P);case Si:return k=I._init,O(P,v,k(I._payload),M)}if(Ra(I))return C(P,v,I,M);if(pa(I))return A(P,v,I,M);Tu(P,I)}return typeof I=="string"&&I!==""||typeof I=="number"?(I=""+I,v!==null&&v.tag===6?(n(P,v.sibling),v=i(v,I),v.return=P,P=v):(n(P,v),v=Sh(I,P.mode,M),v.return=P,P=v),o(P)):n(P,v)}return O}var Oo=_w(!0),ww=_w(!1),gc=Zi(null),yc=null,mo=null,qp=null;function Kp(){qp=mo=yc=null}function Gp(t){var e=gc.current;at(gc),t._currentValue=e}function Pf(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function Io(t,e){yc=t,qp=mo=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(Tn=!0),t.firstContext=null)}function Zn(t){var e=t._currentValue;if(qp!==t)if(t={context:t,memoizedValue:e,next:null},mo===null){if(yc===null)throw Error(Y(308));mo=t,yc.dependencies={lanes:0,firstContext:t}}else mo=mo.next=t;return e}var ps=null;function Qp(t){ps===null?ps=[t]:ps.push(t)}function Ew(t,e,n,r){var i=e.interleaved;return i===null?(n.next=n,Qp(e)):(n.next=i.next,i.next=n),e.interleaved=n,ei(t,r)}function ei(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var Ii=!1;function Yp(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Tw(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Qr(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function ji(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,Ve&2){var i=r.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),r.pending=e,ei(t,n)}return i=r.interleaved,i===null?(e.next=e,Qp(r)):(e.next=i.next,i.next=e),r.interleaved=e,ei(t,n)}function zu(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Lp(t,n)}}function Ny(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,s=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};s===null?i=s=o:s=s.next=o,n=n.next}while(n!==null);s===null?i=s=e:s=s.next=e}else i=s=e;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function vc(t,e,n,r){var i=t.updateQueue;Ii=!1;var s=i.firstBaseUpdate,o=i.lastBaseUpdate,a=i.shared.pending;if(a!==null){i.shared.pending=null;var u=a,c=u.next;u.next=null,o===null?s=c:o.next=c,o=u;var d=t.alternate;d!==null&&(d=d.updateQueue,a=d.lastBaseUpdate,a!==o&&(a===null?d.firstBaseUpdate=c:a.next=c,d.lastBaseUpdate=u))}if(s!==null){var f=i.baseState;o=0,d=c=u=null,a=s;do{var m=a.lane,E=a.eventTime;if((r&m)===m){d!==null&&(d=d.next={eventTime:E,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var C=t,A=a;switch(m=e,E=n,A.tag){case 1:if(C=A.payload,typeof C=="function"){f=C.call(E,f,m);break e}f=C;break e;case 3:C.flags=C.flags&-65537|128;case 0:if(C=A.payload,m=typeof C=="function"?C.call(E,f,m):C,m==null)break e;f=mt({},f,m);break e;case 2:Ii=!0}}a.callback!==null&&a.lane!==0&&(t.flags|=64,m=i.effects,m===null?i.effects=[a]:m.push(a))}else E={eventTime:E,lane:m,tag:a.tag,payload:a.payload,callback:a.callback,next:null},d===null?(c=d=E,u=f):d=d.next=E,o|=m;if(a=a.next,a===null){if(a=i.shared.pending,a===null)break;m=a,a=m.next,m.next=null,i.lastBaseUpdate=m,i.shared.pending=null}}while(!0);if(d===null&&(u=f),i.baseState=u,i.firstBaseUpdate=c,i.lastBaseUpdate=d,e=i.shared.interleaved,e!==null){i=e;do o|=i.lane,i=i.next;while(i!==e)}else s===null&&(i.shared.lanes=0);Ps|=o,t.lanes=o,t.memoizedState=f}}function Oy(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error(Y(191,i));i.call(r)}}}var Ml={},Pr=Zi(Ml),dl=Zi(Ml),hl=Zi(Ml);function ms(t){if(t===Ml)throw Error(Y(174));return t}function Xp(t,e){switch(et(hl,e),et(dl,t),et(Pr,Ml),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:sf(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=sf(e,t)}at(Pr),et(Pr,e)}function Do(){at(Pr),at(dl),at(hl)}function Sw(t){ms(hl.current);var e=ms(Pr.current),n=sf(e,t.type);e!==n&&(et(dl,t),et(Pr,n))}function Jp(t){dl.current===t&&(at(Pr),at(dl))}var ft=Zi(0);function _c(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var yh=[];function Zp(){for(var t=0;t<yh.length;t++)yh[t]._workInProgressVersionPrimary=null;yh.length=0}var Bu=si.ReactCurrentDispatcher,vh=si.ReactCurrentBatchConfig,Is=0,pt=null,bt=null,jt=null,wc=!1,Ha=!1,fl=0,JP=0;function tn(){throw Error(Y(321))}function em(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!fr(t[n],e[n]))return!1;return!0}function tm(t,e,n,r,i,s){if(Is=s,pt=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Bu.current=t===null||t.memoizedState===null?nC:rC,t=n(r,i),Ha){s=0;do{if(Ha=!1,fl=0,25<=s)throw Error(Y(301));s+=1,jt=bt=null,e.updateQueue=null,Bu.current=iC,t=n(r,i)}while(Ha)}if(Bu.current=Ec,e=bt!==null&&bt.next!==null,Is=0,jt=bt=pt=null,wc=!1,e)throw Error(Y(300));return t}function nm(){var t=fl!==0;return fl=0,t}function Er(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return jt===null?pt.memoizedState=jt=t:jt=jt.next=t,jt}function er(){if(bt===null){var t=pt.alternate;t=t!==null?t.memoizedState:null}else t=bt.next;var e=jt===null?pt.memoizedState:jt.next;if(e!==null)jt=e,bt=t;else{if(t===null)throw Error(Y(310));bt=t,t={memoizedState:bt.memoizedState,baseState:bt.baseState,baseQueue:bt.baseQueue,queue:bt.queue,next:null},jt===null?pt.memoizedState=jt=t:jt=jt.next=t}return jt}function pl(t,e){return typeof e=="function"?e(t):e}function _h(t){var e=er(),n=e.queue;if(n===null)throw Error(Y(311));n.lastRenderedReducer=t;var r=bt,i=r.baseQueue,s=n.pending;if(s!==null){if(i!==null){var o=i.next;i.next=s.next,s.next=o}r.baseQueue=i=s,n.pending=null}if(i!==null){s=i.next,r=r.baseState;var a=o=null,u=null,c=s;do{var d=c.lane;if((Is&d)===d)u!==null&&(u=u.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),r=c.hasEagerState?c.eagerState:t(r,c.action);else{var f={lane:d,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};u===null?(a=u=f,o=r):u=u.next=f,pt.lanes|=d,Ps|=d}c=c.next}while(c!==null&&c!==s);u===null?o=r:u.next=a,fr(r,e.memoizedState)||(Tn=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=u,n.lastRenderedState=r}if(t=n.interleaved,t!==null){i=t;do s=i.lane,pt.lanes|=s,Ps|=s,i=i.next;while(i!==t)}else i===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function wh(t){var e=er(),n=e.queue;if(n===null)throw Error(Y(311));n.lastRenderedReducer=t;var r=n.dispatch,i=n.pending,s=e.memoizedState;if(i!==null){n.pending=null;var o=i=i.next;do s=t(s,o.action),o=o.next;while(o!==i);fr(s,e.memoizedState)||(Tn=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),n.lastRenderedState=s}return[s,r]}function Iw(){}function Pw(t,e){var n=pt,r=er(),i=e(),s=!fr(r.memoizedState,i);if(s&&(r.memoizedState=i,Tn=!0),r=r.queue,rm(Aw.bind(null,n,r,t),[t]),r.getSnapshot!==e||s||jt!==null&&jt.memoizedState.tag&1){if(n.flags|=2048,ml(9,Rw.bind(null,n,r,i,e),void 0,null),Ft===null)throw Error(Y(349));Is&30||Cw(n,e,i)}return i}function Cw(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=pt.updateQueue,e===null?(e={lastEffect:null,stores:null},pt.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function Rw(t,e,n,r){e.value=n,e.getSnapshot=r,kw(e)&&bw(t)}function Aw(t,e,n){return n(function(){kw(e)&&bw(t)})}function kw(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!fr(t,n)}catch{return!0}}function bw(t){var e=ei(t,1);e!==null&&dr(e,t,1,-1)}function Dy(t){var e=Er();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:pl,lastRenderedState:t},e.queue=t,t=t.dispatch=tC.bind(null,pt,t),[e.memoizedState,t]}function ml(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=pt.updateQueue,e===null?(e={lastEffect:null,stores:null},pt.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function xw(){return er().memoizedState}function $u(t,e,n,r){var i=Er();pt.flags|=t,i.memoizedState=ml(1|e,n,void 0,r===void 0?null:r)}function ld(t,e,n,r){var i=er();r=r===void 0?null:r;var s=void 0;if(bt!==null){var o=bt.memoizedState;if(s=o.destroy,r!==null&&em(r,o.deps)){i.memoizedState=ml(e,n,s,r);return}}pt.flags|=t,i.memoizedState=ml(1|e,n,s,r)}function Ly(t,e){return $u(8390656,8,t,e)}function rm(t,e){return ld(2048,8,t,e)}function Nw(t,e){return ld(4,2,t,e)}function Ow(t,e){return ld(4,4,t,e)}function Dw(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function Lw(t,e,n){return n=n!=null?n.concat([t]):null,ld(4,4,Dw.bind(null,e,t),n)}function im(){}function Mw(t,e){var n=er();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&em(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function Vw(t,e){var n=er();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&em(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function jw(t,e,n){return Is&21?(fr(n,e)||(n=$0(),pt.lanes|=n,Ps|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,Tn=!0),t.memoizedState=n)}function ZP(t,e){var n=Ye;Ye=n!==0&&4>n?n:4,t(!0);var r=vh.transition;vh.transition={};try{t(!1),e()}finally{Ye=n,vh.transition=r}}function Fw(){return er().memoizedState}function eC(t,e,n){var r=Ui(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},Uw(t))zw(e,n);else if(n=Ew(t,e,n,r),n!==null){var i=gn();dr(n,t,r,i),Bw(n,e,r)}}function tC(t,e,n){var r=Ui(t),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(Uw(t))zw(e,i);else{var s=t.alternate;if(t.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var o=e.lastRenderedState,a=s(o,n);if(i.hasEagerState=!0,i.eagerState=a,fr(a,o)){var u=e.interleaved;u===null?(i.next=i,Qp(e)):(i.next=u.next,u.next=i),e.interleaved=i;return}}catch{}finally{}n=Ew(t,e,i,r),n!==null&&(i=gn(),dr(n,t,r,i),Bw(n,e,r))}}function Uw(t){var e=t.alternate;return t===pt||e!==null&&e===pt}function zw(t,e){Ha=wc=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function Bw(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Lp(t,n)}}var Ec={readContext:Zn,useCallback:tn,useContext:tn,useEffect:tn,useImperativeHandle:tn,useInsertionEffect:tn,useLayoutEffect:tn,useMemo:tn,useReducer:tn,useRef:tn,useState:tn,useDebugValue:tn,useDeferredValue:tn,useTransition:tn,useMutableSource:tn,useSyncExternalStore:tn,useId:tn,unstable_isNewReconciler:!1},nC={readContext:Zn,useCallback:function(t,e){return Er().memoizedState=[t,e===void 0?null:e],t},useContext:Zn,useEffect:Ly,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,$u(4194308,4,Dw.bind(null,e,t),n)},useLayoutEffect:function(t,e){return $u(4194308,4,t,e)},useInsertionEffect:function(t,e){return $u(4,2,t,e)},useMemo:function(t,e){var n=Er();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=Er();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=eC.bind(null,pt,t),[r.memoizedState,t]},useRef:function(t){var e=Er();return t={current:t},e.memoizedState=t},useState:Dy,useDebugValue:im,useDeferredValue:function(t){return Er().memoizedState=t},useTransition:function(){var t=Dy(!1),e=t[0];return t=ZP.bind(null,t[1]),Er().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=pt,i=Er();if(ut){if(n===void 0)throw Error(Y(407));n=n()}else{if(n=e(),Ft===null)throw Error(Y(349));Is&30||Cw(r,e,n)}i.memoizedState=n;var s={value:n,getSnapshot:e};return i.queue=s,Ly(Aw.bind(null,r,s,t),[t]),r.flags|=2048,ml(9,Rw.bind(null,r,s,n,e),void 0,null),n},useId:function(){var t=Er(),e=Ft.identifierPrefix;if(ut){var n=Hr,r=$r;n=(r&~(1<<32-cr(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=fl++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=JP++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},rC={readContext:Zn,useCallback:Mw,useContext:Zn,useEffect:rm,useImperativeHandle:Lw,useInsertionEffect:Nw,useLayoutEffect:Ow,useMemo:Vw,useReducer:_h,useRef:xw,useState:function(){return _h(pl)},useDebugValue:im,useDeferredValue:function(t){var e=er();return jw(e,bt.memoizedState,t)},useTransition:function(){var t=_h(pl)[0],e=er().memoizedState;return[t,e]},useMutableSource:Iw,useSyncExternalStore:Pw,useId:Fw,unstable_isNewReconciler:!1},iC={readContext:Zn,useCallback:Mw,useContext:Zn,useEffect:rm,useImperativeHandle:Lw,useInsertionEffect:Nw,useLayoutEffect:Ow,useMemo:Vw,useReducer:wh,useRef:xw,useState:function(){return wh(pl)},useDebugValue:im,useDeferredValue:function(t){var e=er();return bt===null?e.memoizedState=t:jw(e,bt.memoizedState,t)},useTransition:function(){var t=wh(pl)[0],e=er().memoizedState;return[t,e]},useMutableSource:Iw,useSyncExternalStore:Pw,useId:Fw,unstable_isNewReconciler:!1};function or(t,e){if(t&&t.defaultProps){e=mt({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function Cf(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:mt({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var ud={isMounted:function(t){return(t=t._reactInternals)?Bs(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=gn(),i=Ui(t),s=Qr(r,i);s.payload=e,n!=null&&(s.callback=n),e=ji(t,s,i),e!==null&&(dr(e,t,i,r),zu(e,t,i))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=gn(),i=Ui(t),s=Qr(r,i);s.tag=1,s.payload=e,n!=null&&(s.callback=n),e=ji(t,s,i),e!==null&&(dr(e,t,i,r),zu(e,t,i))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=gn(),r=Ui(t),i=Qr(n,r);i.tag=2,e!=null&&(i.callback=e),e=ji(t,i,r),e!==null&&(dr(e,t,r,n),zu(e,t,r))}};function My(t,e,n,r,i,s,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,s,o):e.prototype&&e.prototype.isPureReactComponent?!al(n,r)||!al(i,s):!0}function $w(t,e,n){var r=!1,i=Ki,s=e.contextType;return typeof s=="object"&&s!==null?s=Zn(s):(i=In(e)?Ts:ln.current,r=e.contextTypes,s=(r=r!=null)?xo(t,i):Ki),e=new e(n,s),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=ud,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=s),e}function Vy(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&ud.enqueueReplaceState(e,e.state,null)}function Rf(t,e,n,r){var i=t.stateNode;i.props=n,i.state=t.memoizedState,i.refs={},Yp(t);var s=e.contextType;typeof s=="object"&&s!==null?i.context=Zn(s):(s=In(e)?Ts:ln.current,i.context=xo(t,s)),i.state=t.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&(Cf(t,e,s,n),i.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&ud.enqueueReplaceState(i,i.state,null),vc(t,n,i,r),i.state=t.memoizedState),typeof i.componentDidMount=="function"&&(t.flags|=4194308)}function Lo(t,e){try{var n="",r=e;do n+=NI(r),r=r.return;while(r);var i=n}catch(s){i=`
Error generating stack: `+s.message+`
`+s.stack}return{value:t,source:e,stack:i,digest:null}}function Eh(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function Af(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var sC=typeof WeakMap=="function"?WeakMap:Map;function Hw(t,e,n){n=Qr(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){Sc||(Sc=!0,jf=r),Af(t,e)},n}function Ww(t,e,n){n=Qr(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var i=e.value;n.payload=function(){return r(i)},n.callback=function(){Af(t,e)}}var s=t.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(n.callback=function(){Af(t,e),typeof r!="function"&&(Fi===null?Fi=new Set([this]):Fi.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function jy(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new sC;var i=new Set;r.set(e,i)}else i=r.get(e),i===void 0&&(i=new Set,r.set(e,i));i.has(n)||(i.add(n),t=_C.bind(null,t,e,n),e.then(t,t))}function Fy(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function Uy(t,e,n,r,i){return t.mode&1?(t.flags|=65536,t.lanes=i,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=Qr(-1,1),e.tag=2,ji(n,e,1))),n.lanes|=1),t)}var oC=si.ReactCurrentOwner,Tn=!1;function mn(t,e,n,r){e.child=t===null?ww(e,null,n,r):Oo(e,t.child,n,r)}function zy(t,e,n,r,i){n=n.render;var s=e.ref;return Io(e,i),r=tm(t,e,n,r,s,i),n=nm(),t!==null&&!Tn?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,ti(t,e,i)):(ut&&n&&$p(e),e.flags|=1,mn(t,e,r,i),e.child)}function By(t,e,n,r,i){if(t===null){var s=n.type;return typeof s=="function"&&!hm(s)&&s.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=s,qw(t,e,s,r,i)):(t=Ku(n.type,null,r,e,e.mode,i),t.ref=e.ref,t.return=e,e.child=t)}if(s=t.child,!(t.lanes&i)){var o=s.memoizedProps;if(n=n.compare,n=n!==null?n:al,n(o,r)&&t.ref===e.ref)return ti(t,e,i)}return e.flags|=1,t=zi(s,r),t.ref=e.ref,t.return=e,e.child=t}function qw(t,e,n,r,i){if(t!==null){var s=t.memoizedProps;if(al(s,r)&&t.ref===e.ref)if(Tn=!1,e.pendingProps=r=s,(t.lanes&i)!==0)t.flags&131072&&(Tn=!0);else return e.lanes=t.lanes,ti(t,e,i)}return kf(t,e,n,r,i)}function Kw(t,e,n){var r=e.pendingProps,i=r.children,s=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},et(yo,bn),bn|=n;else{if(!(n&1073741824))return t=s!==null?s.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,et(yo,bn),bn|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=s!==null?s.baseLanes:n,et(yo,bn),bn|=r}else s!==null?(r=s.baseLanes|n,e.memoizedState=null):r=n,et(yo,bn),bn|=r;return mn(t,e,i,n),e.child}function Gw(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function kf(t,e,n,r,i){var s=In(n)?Ts:ln.current;return s=xo(e,s),Io(e,i),n=tm(t,e,n,r,s,i),r=nm(),t!==null&&!Tn?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,ti(t,e,i)):(ut&&r&&$p(e),e.flags|=1,mn(t,e,n,i),e.child)}function $y(t,e,n,r,i){if(In(n)){var s=!0;fc(e)}else s=!1;if(Io(e,i),e.stateNode===null)Hu(t,e),$w(e,n,r),Rf(e,n,r,i),r=!0;else if(t===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var u=o.context,c=n.contextType;typeof c=="object"&&c!==null?c=Zn(c):(c=In(n)?Ts:ln.current,c=xo(e,c));var d=n.getDerivedStateFromProps,f=typeof d=="function"||typeof o.getSnapshotBeforeUpdate=="function";f||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==r||u!==c)&&Vy(e,o,r,c),Ii=!1;var m=e.memoizedState;o.state=m,vc(e,r,o,i),u=e.memoizedState,a!==r||m!==u||Sn.current||Ii?(typeof d=="function"&&(Cf(e,n,d,r),u=e.memoizedState),(a=Ii||My(e,n,a,r,m,u,c))?(f||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=u),o.props=r,o.state=u,o.context=c,r=a):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,Tw(t,e),a=e.memoizedProps,c=e.type===e.elementType?a:or(e.type,a),o.props=c,f=e.pendingProps,m=o.context,u=n.contextType,typeof u=="object"&&u!==null?u=Zn(u):(u=In(n)?Ts:ln.current,u=xo(e,u));var E=n.getDerivedStateFromProps;(d=typeof E=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==f||m!==u)&&Vy(e,o,r,u),Ii=!1,m=e.memoizedState,o.state=m,vc(e,r,o,i);var C=e.memoizedState;a!==f||m!==C||Sn.current||Ii?(typeof E=="function"&&(Cf(e,n,E,r),C=e.memoizedState),(c=Ii||My(e,n,c,r,m,C,u)||!1)?(d||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,C,u),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,C,u)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&m===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&m===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=C),o.props=r,o.state=C,o.context=u,r=c):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&m===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&m===t.memoizedState||(e.flags|=1024),r=!1)}return bf(t,e,n,r,s,i)}function bf(t,e,n,r,i,s){Gw(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return i&&Ay(e,n,!1),ti(t,e,s);r=e.stateNode,oC.current=e;var a=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=Oo(e,t.child,null,s),e.child=Oo(e,null,a,s)):mn(t,e,a,s),e.memoizedState=r.state,i&&Ay(e,n,!0),e.child}function Qw(t){var e=t.stateNode;e.pendingContext?Ry(t,e.pendingContext,e.pendingContext!==e.context):e.context&&Ry(t,e.context,!1),Xp(t,e.containerInfo)}function Hy(t,e,n,r,i){return No(),Wp(i),e.flags|=256,mn(t,e,n,r),e.child}var xf={dehydrated:null,treeContext:null,retryLane:0};function Nf(t){return{baseLanes:t,cachePool:null,transitions:null}}function Yw(t,e,n){var r=e.pendingProps,i=ft.current,s=!1,o=(e.flags&128)!==0,a;if((a=o)||(a=t!==null&&t.memoizedState===null?!1:(i&2)!==0),a?(s=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(i|=1),et(ft,i&1),t===null)return If(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,s?(r=e.mode,s=e.child,o={mode:"hidden",children:o},!(r&1)&&s!==null?(s.childLanes=0,s.pendingProps=o):s=hd(o,r,0,null),t=ws(t,r,n,null),s.return=e,t.return=e,s.sibling=t,e.child=s,e.child.memoizedState=Nf(n),e.memoizedState=xf,t):sm(e,o));if(i=t.memoizedState,i!==null&&(a=i.dehydrated,a!==null))return aC(t,e,o,r,a,i,n);if(s){s=r.fallback,o=e.mode,i=t.child,a=i.sibling;var u={mode:"hidden",children:r.children};return!(o&1)&&e.child!==i?(r=e.child,r.childLanes=0,r.pendingProps=u,e.deletions=null):(r=zi(i,u),r.subtreeFlags=i.subtreeFlags&14680064),a!==null?s=zi(a,s):(s=ws(s,o,n,null),s.flags|=2),s.return=e,r.return=e,r.sibling=s,e.child=r,r=s,s=e.child,o=t.child.memoizedState,o=o===null?Nf(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},s.memoizedState=o,s.childLanes=t.childLanes&~n,e.memoizedState=xf,r}return s=t.child,t=s.sibling,r=zi(s,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function sm(t,e){return e=hd({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function Su(t,e,n,r){return r!==null&&Wp(r),Oo(e,t.child,null,n),t=sm(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function aC(t,e,n,r,i,s,o){if(n)return e.flags&256?(e.flags&=-257,r=Eh(Error(Y(422))),Su(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(s=r.fallback,i=e.mode,r=hd({mode:"visible",children:r.children},i,0,null),s=ws(s,i,o,null),s.flags|=2,r.return=e,s.return=e,r.sibling=s,e.child=r,e.mode&1&&Oo(e,t.child,null,o),e.child.memoizedState=Nf(o),e.memoizedState=xf,s);if(!(e.mode&1))return Su(t,e,o,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var a=r.dgst;return r=a,s=Error(Y(419)),r=Eh(s,r,void 0),Su(t,e,o,r)}if(a=(o&t.childLanes)!==0,Tn||a){if(r=Ft,r!==null){switch(o&-o){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|o)?0:i,i!==0&&i!==s.retryLane&&(s.retryLane=i,ei(t,i),dr(r,t,i,-1))}return dm(),r=Eh(Error(Y(421))),Su(t,e,o,r)}return i.data==="$?"?(e.flags|=128,e.child=t.child,e=wC.bind(null,t),i._reactRetry=e,null):(t=s.treeContext,Nn=Vi(i.nextSibling),Ln=e,ut=!0,ur=null,t!==null&&(Gn[Qn++]=$r,Gn[Qn++]=Hr,Gn[Qn++]=Ss,$r=t.id,Hr=t.overflow,Ss=e),e=sm(e,r.children),e.flags|=4096,e)}function Wy(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),Pf(t.return,e,n)}function Th(t,e,n,r,i){var s=t.memoizedState;s===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=i)}function Xw(t,e,n){var r=e.pendingProps,i=r.revealOrder,s=r.tail;if(mn(t,e,r.children,n),r=ft.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&Wy(t,n,e);else if(t.tag===19)Wy(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(et(ft,r),!(e.mode&1))e.memoizedState=null;else switch(i){case"forwards":for(n=e.child,i=null;n!==null;)t=n.alternate,t!==null&&_c(t)===null&&(i=n),n=n.sibling;n=i,n===null?(i=e.child,e.child=null):(i=n.sibling,n.sibling=null),Th(e,!1,i,n,s);break;case"backwards":for(n=null,i=e.child,e.child=null;i!==null;){if(t=i.alternate,t!==null&&_c(t)===null){e.child=i;break}t=i.sibling,i.sibling=n,n=i,i=t}Th(e,!0,n,null,s);break;case"together":Th(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Hu(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function ti(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),Ps|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(Y(153));if(e.child!==null){for(t=e.child,n=zi(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=zi(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function lC(t,e,n){switch(e.tag){case 3:Qw(e),No();break;case 5:Sw(e);break;case 1:In(e.type)&&fc(e);break;case 4:Xp(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,i=e.memoizedProps.value;et(gc,r._currentValue),r._currentValue=i;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(et(ft,ft.current&1),e.flags|=128,null):n&e.child.childLanes?Yw(t,e,n):(et(ft,ft.current&1),t=ti(t,e,n),t!==null?t.sibling:null);et(ft,ft.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return Xw(t,e,n);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),et(ft,ft.current),r)break;return null;case 22:case 23:return e.lanes=0,Kw(t,e,n)}return ti(t,e,n)}var Jw,Of,Zw,eE;Jw=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};Of=function(){};Zw=function(t,e,n,r){var i=t.memoizedProps;if(i!==r){t=e.stateNode,ms(Pr.current);var s=null;switch(n){case"input":i=ef(t,i),r=ef(t,r),s=[];break;case"select":i=mt({},i,{value:void 0}),r=mt({},r,{value:void 0}),s=[];break;case"textarea":i=rf(t,i),r=rf(t,r),s=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=dc)}of(n,r);var o;n=null;for(c in i)if(!r.hasOwnProperty(c)&&i.hasOwnProperty(c)&&i[c]!=null)if(c==="style"){var a=i[c];for(o in a)a.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(el.hasOwnProperty(c)?s||(s=[]):(s=s||[]).push(c,null));for(c in r){var u=r[c];if(a=i!=null?i[c]:void 0,r.hasOwnProperty(c)&&u!==a&&(u!=null||a!=null))if(c==="style")if(a){for(o in a)!a.hasOwnProperty(o)||u&&u.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in u)u.hasOwnProperty(o)&&a[o]!==u[o]&&(n||(n={}),n[o]=u[o])}else n||(s||(s=[]),s.push(c,n)),n=u;else c==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,a=a?a.__html:void 0,u!=null&&a!==u&&(s=s||[]).push(c,u)):c==="children"?typeof u!="string"&&typeof u!="number"||(s=s||[]).push(c,""+u):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&(el.hasOwnProperty(c)?(u!=null&&c==="onScroll"&&ot("scroll",t),s||a===u||(s=[])):(s=s||[]).push(c,u))}n&&(s=s||[]).push("style",n);var c=s;(e.updateQueue=c)&&(e.flags|=4)}};eE=function(t,e,n,r){n!==r&&(e.flags|=4)};function wa(t,e){if(!ut)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function nn(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=t,i=i.sibling;else for(i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=t,i=i.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function uC(t,e,n){var r=e.pendingProps;switch(Hp(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return nn(e),null;case 1:return In(e.type)&&hc(),nn(e),null;case 3:return r=e.stateNode,Do(),at(Sn),at(ln),Zp(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(Eu(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,ur!==null&&(zf(ur),ur=null))),Of(t,e),nn(e),null;case 5:Jp(e);var i=ms(hl.current);if(n=e.type,t!==null&&e.stateNode!=null)Zw(t,e,n,r,i),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(Y(166));return nn(e),null}if(t=ms(Pr.current),Eu(e)){r=e.stateNode,n=e.type;var s=e.memoizedProps;switch(r[Tr]=e,r[cl]=s,t=(e.mode&1)!==0,n){case"dialog":ot("cancel",r),ot("close",r);break;case"iframe":case"object":case"embed":ot("load",r);break;case"video":case"audio":for(i=0;i<ka.length;i++)ot(ka[i],r);break;case"source":ot("error",r);break;case"img":case"image":case"link":ot("error",r),ot("load",r);break;case"details":ot("toggle",r);break;case"input":ey(r,s),ot("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},ot("invalid",r);break;case"textarea":ny(r,s),ot("invalid",r)}of(n,s),i=null;for(var o in s)if(s.hasOwnProperty(o)){var a=s[o];o==="children"?typeof a=="string"?r.textContent!==a&&(s.suppressHydrationWarning!==!0&&wu(r.textContent,a,t),i=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(s.suppressHydrationWarning!==!0&&wu(r.textContent,a,t),i=["children",""+a]):el.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&ot("scroll",r)}switch(n){case"input":hu(r),ty(r,s,!0);break;case"textarea":hu(r),ry(r);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(r.onclick=dc)}r=i,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=i.nodeType===9?i:i.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=A0(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[Tr]=e,t[cl]=r,Jw(t,e,!1,!1),e.stateNode=t;e:{switch(o=af(n,r),n){case"dialog":ot("cancel",t),ot("close",t),i=r;break;case"iframe":case"object":case"embed":ot("load",t),i=r;break;case"video":case"audio":for(i=0;i<ka.length;i++)ot(ka[i],t);i=r;break;case"source":ot("error",t),i=r;break;case"img":case"image":case"link":ot("error",t),ot("load",t),i=r;break;case"details":ot("toggle",t),i=r;break;case"input":ey(t,r),i=ef(t,r),ot("invalid",t);break;case"option":i=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},i=mt({},r,{value:void 0}),ot("invalid",t);break;case"textarea":ny(t,r),i=rf(t,r),ot("invalid",t);break;default:i=r}of(n,i),a=i;for(s in a)if(a.hasOwnProperty(s)){var u=a[s];s==="style"?x0(t,u):s==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,u!=null&&k0(t,u)):s==="children"?typeof u=="string"?(n!=="textarea"||u!=="")&&tl(t,u):typeof u=="number"&&tl(t,""+u):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(el.hasOwnProperty(s)?u!=null&&s==="onScroll"&&ot("scroll",t):u!=null&&kp(t,s,u,o))}switch(n){case"input":hu(t),ty(t,r,!1);break;case"textarea":hu(t),ry(t);break;case"option":r.value!=null&&t.setAttribute("value",""+qi(r.value));break;case"select":t.multiple=!!r.multiple,s=r.value,s!=null?wo(t,!!r.multiple,s,!1):r.defaultValue!=null&&wo(t,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(t.onclick=dc)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return nn(e),null;case 6:if(t&&e.stateNode!=null)eE(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(Y(166));if(n=ms(hl.current),ms(Pr.current),Eu(e)){if(r=e.stateNode,n=e.memoizedProps,r[Tr]=e,(s=r.nodeValue!==n)&&(t=Ln,t!==null))switch(t.tag){case 3:wu(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&wu(r.nodeValue,n,(t.mode&1)!==0)}s&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[Tr]=e,e.stateNode=r}return nn(e),null;case 13:if(at(ft),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(ut&&Nn!==null&&e.mode&1&&!(e.flags&128))vw(),No(),e.flags|=98560,s=!1;else if(s=Eu(e),r!==null&&r.dehydrated!==null){if(t===null){if(!s)throw Error(Y(318));if(s=e.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(Y(317));s[Tr]=e}else No(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;nn(e),s=!1}else ur!==null&&(zf(ur),ur=null),s=!0;if(!s)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||ft.current&1?Nt===0&&(Nt=3):dm())),e.updateQueue!==null&&(e.flags|=4),nn(e),null);case 4:return Do(),Of(t,e),t===null&&ll(e.stateNode.containerInfo),nn(e),null;case 10:return Gp(e.type._context),nn(e),null;case 17:return In(e.type)&&hc(),nn(e),null;case 19:if(at(ft),s=e.memoizedState,s===null)return nn(e),null;if(r=(e.flags&128)!==0,o=s.rendering,o===null)if(r)wa(s,!1);else{if(Nt!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=_c(t),o!==null){for(e.flags|=128,wa(s,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)s=n,t=r,s.flags&=14680066,o=s.alternate,o===null?(s.childLanes=0,s.lanes=t,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=o.childLanes,s.lanes=o.lanes,s.child=o.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=o.memoizedProps,s.memoizedState=o.memoizedState,s.updateQueue=o.updateQueue,s.type=o.type,t=o.dependencies,s.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return et(ft,ft.current&1|2),e.child}t=t.sibling}s.tail!==null&&Pt()>Mo&&(e.flags|=128,r=!0,wa(s,!1),e.lanes=4194304)}else{if(!r)if(t=_c(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),wa(s,!0),s.tail===null&&s.tailMode==="hidden"&&!o.alternate&&!ut)return nn(e),null}else 2*Pt()-s.renderingStartTime>Mo&&n!==1073741824&&(e.flags|=128,r=!0,wa(s,!1),e.lanes=4194304);s.isBackwards?(o.sibling=e.child,e.child=o):(n=s.last,n!==null?n.sibling=o:e.child=o,s.last=o)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=Pt(),e.sibling=null,n=ft.current,et(ft,r?n&1|2:n&1),e):(nn(e),null);case 22:case 23:return cm(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?bn&1073741824&&(nn(e),e.subtreeFlags&6&&(e.flags|=8192)):nn(e),null;case 24:return null;case 25:return null}throw Error(Y(156,e.tag))}function cC(t,e){switch(Hp(e),e.tag){case 1:return In(e.type)&&hc(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Do(),at(Sn),at(ln),Zp(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return Jp(e),null;case 13:if(at(ft),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(Y(340));No()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return at(ft),null;case 4:return Do(),null;case 10:return Gp(e.type._context),null;case 22:case 23:return cm(),null;case 24:return null;default:return null}}var Iu=!1,on=!1,dC=typeof WeakSet=="function"?WeakSet:Set,ne=null;function go(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){Et(t,e,r)}else n.current=null}function Df(t,e,n){try{n()}catch(r){Et(t,e,r)}}var qy=!1;function hC(t,e){if(yf=lc,t=sw(),Bp(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{n.nodeType,s.nodeType}catch{n=null;break e}var o=0,a=-1,u=-1,c=0,d=0,f=t,m=null;t:for(;;){for(var E;f!==n||i!==0&&f.nodeType!==3||(a=o+i),f!==s||r!==0&&f.nodeType!==3||(u=o+r),f.nodeType===3&&(o+=f.nodeValue.length),(E=f.firstChild)!==null;)m=f,f=E;for(;;){if(f===t)break t;if(m===n&&++c===i&&(a=o),m===s&&++d===r&&(u=o),(E=f.nextSibling)!==null)break;f=m,m=f.parentNode}f=E}n=a===-1||u===-1?null:{start:a,end:u}}else n=null}n=n||{start:0,end:0}}else n=null;for(vf={focusedElem:t,selectionRange:n},lc=!1,ne=e;ne!==null;)if(e=ne,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,ne=t;else for(;ne!==null;){e=ne;try{var C=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(C!==null){var A=C.memoizedProps,O=C.memoizedState,P=e.stateNode,v=P.getSnapshotBeforeUpdate(e.elementType===e.type?A:or(e.type,A),O);P.__reactInternalSnapshotBeforeUpdate=v}break;case 3:var I=e.stateNode.containerInfo;I.nodeType===1?I.textContent="":I.nodeType===9&&I.documentElement&&I.removeChild(I.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(Y(163))}}catch(M){Et(e,e.return,M)}if(t=e.sibling,t!==null){t.return=e.return,ne=t;break}ne=e.return}return C=qy,qy=!1,C}function Wa(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&t)===t){var s=i.destroy;i.destroy=void 0,s!==void 0&&Df(e,n,s)}i=i.next}while(i!==r)}}function cd(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function Lf(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function tE(t){var e=t.alternate;e!==null&&(t.alternate=null,tE(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[Tr],delete e[cl],delete e[Ef],delete e[GP],delete e[QP])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function nE(t){return t.tag===5||t.tag===3||t.tag===4}function Ky(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||nE(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Mf(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=dc));else if(r!==4&&(t=t.child,t!==null))for(Mf(t,e,n),t=t.sibling;t!==null;)Mf(t,e,n),t=t.sibling}function Vf(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(Vf(t,e,n),t=t.sibling;t!==null;)Vf(t,e,n),t=t.sibling}var Bt=null,ar=!1;function _i(t,e,n){for(n=n.child;n!==null;)rE(t,e,n),n=n.sibling}function rE(t,e,n){if(Ir&&typeof Ir.onCommitFiberUnmount=="function")try{Ir.onCommitFiberUnmount(nd,n)}catch{}switch(n.tag){case 5:on||go(n,e);case 6:var r=Bt,i=ar;Bt=null,_i(t,e,n),Bt=r,ar=i,Bt!==null&&(ar?(t=Bt,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):Bt.removeChild(n.stateNode));break;case 18:Bt!==null&&(ar?(t=Bt,n=n.stateNode,t.nodeType===8?mh(t.parentNode,n):t.nodeType===1&&mh(t,n),sl(t)):mh(Bt,n.stateNode));break;case 4:r=Bt,i=ar,Bt=n.stateNode.containerInfo,ar=!0,_i(t,e,n),Bt=r,ar=i;break;case 0:case 11:case 14:case 15:if(!on&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var s=i,o=s.destroy;s=s.tag,o!==void 0&&(s&2||s&4)&&Df(n,e,o),i=i.next}while(i!==r)}_i(t,e,n);break;case 1:if(!on&&(go(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){Et(n,e,a)}_i(t,e,n);break;case 21:_i(t,e,n);break;case 22:n.mode&1?(on=(r=on)||n.memoizedState!==null,_i(t,e,n),on=r):_i(t,e,n);break;default:_i(t,e,n)}}function Gy(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new dC),e.forEach(function(r){var i=EC.bind(null,t,r);n.has(r)||(n.add(r),r.then(i,i))})}}function sr(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var s=t,o=e,a=o;e:for(;a!==null;){switch(a.tag){case 5:Bt=a.stateNode,ar=!1;break e;case 3:Bt=a.stateNode.containerInfo,ar=!0;break e;case 4:Bt=a.stateNode.containerInfo,ar=!0;break e}a=a.return}if(Bt===null)throw Error(Y(160));rE(s,o,i),Bt=null,ar=!1;var u=i.alternate;u!==null&&(u.return=null),i.return=null}catch(c){Et(i,e,c)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)iE(e,t),e=e.sibling}function iE(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(sr(e,t),wr(t),r&4){try{Wa(3,t,t.return),cd(3,t)}catch(A){Et(t,t.return,A)}try{Wa(5,t,t.return)}catch(A){Et(t,t.return,A)}}break;case 1:sr(e,t),wr(t),r&512&&n!==null&&go(n,n.return);break;case 5:if(sr(e,t),wr(t),r&512&&n!==null&&go(n,n.return),t.flags&32){var i=t.stateNode;try{tl(i,"")}catch(A){Et(t,t.return,A)}}if(r&4&&(i=t.stateNode,i!=null)){var s=t.memoizedProps,o=n!==null?n.memoizedProps:s,a=t.type,u=t.updateQueue;if(t.updateQueue=null,u!==null)try{a==="input"&&s.type==="radio"&&s.name!=null&&C0(i,s),af(a,o);var c=af(a,s);for(o=0;o<u.length;o+=2){var d=u[o],f=u[o+1];d==="style"?x0(i,f):d==="dangerouslySetInnerHTML"?k0(i,f):d==="children"?tl(i,f):kp(i,d,f,c)}switch(a){case"input":tf(i,s);break;case"textarea":R0(i,s);break;case"select":var m=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!s.multiple;var E=s.value;E!=null?wo(i,!!s.multiple,E,!1):m!==!!s.multiple&&(s.defaultValue!=null?wo(i,!!s.multiple,s.defaultValue,!0):wo(i,!!s.multiple,s.multiple?[]:"",!1))}i[cl]=s}catch(A){Et(t,t.return,A)}}break;case 6:if(sr(e,t),wr(t),r&4){if(t.stateNode===null)throw Error(Y(162));i=t.stateNode,s=t.memoizedProps;try{i.nodeValue=s}catch(A){Et(t,t.return,A)}}break;case 3:if(sr(e,t),wr(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{sl(e.containerInfo)}catch(A){Et(t,t.return,A)}break;case 4:sr(e,t),wr(t);break;case 13:sr(e,t),wr(t),i=t.child,i.flags&8192&&(s=i.memoizedState!==null,i.stateNode.isHidden=s,!s||i.alternate!==null&&i.alternate.memoizedState!==null||(lm=Pt())),r&4&&Gy(t);break;case 22:if(d=n!==null&&n.memoizedState!==null,t.mode&1?(on=(c=on)||d,sr(e,t),on=c):sr(e,t),wr(t),r&8192){if(c=t.memoizedState!==null,(t.stateNode.isHidden=c)&&!d&&t.mode&1)for(ne=t,d=t.child;d!==null;){for(f=ne=d;ne!==null;){switch(m=ne,E=m.child,m.tag){case 0:case 11:case 14:case 15:Wa(4,m,m.return);break;case 1:go(m,m.return);var C=m.stateNode;if(typeof C.componentWillUnmount=="function"){r=m,n=m.return;try{e=r,C.props=e.memoizedProps,C.state=e.memoizedState,C.componentWillUnmount()}catch(A){Et(r,n,A)}}break;case 5:go(m,m.return);break;case 22:if(m.memoizedState!==null){Yy(f);continue}}E!==null?(E.return=m,ne=E):Yy(f)}d=d.sibling}e:for(d=null,f=t;;){if(f.tag===5){if(d===null){d=f;try{i=f.stateNode,c?(s=i.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(a=f.stateNode,u=f.memoizedProps.style,o=u!=null&&u.hasOwnProperty("display")?u.display:null,a.style.display=b0("display",o))}catch(A){Et(t,t.return,A)}}}else if(f.tag===6){if(d===null)try{f.stateNode.nodeValue=c?"":f.memoizedProps}catch(A){Et(t,t.return,A)}}else if((f.tag!==22&&f.tag!==23||f.memoizedState===null||f===t)&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===t)break e;for(;f.sibling===null;){if(f.return===null||f.return===t)break e;d===f&&(d=null),f=f.return}d===f&&(d=null),f.sibling.return=f.return,f=f.sibling}}break;case 19:sr(e,t),wr(t),r&4&&Gy(t);break;case 21:break;default:sr(e,t),wr(t)}}function wr(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(nE(n)){var r=n;break e}n=n.return}throw Error(Y(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(tl(i,""),r.flags&=-33);var s=Ky(t);Vf(t,s,i);break;case 3:case 4:var o=r.stateNode.containerInfo,a=Ky(t);Mf(t,a,o);break;default:throw Error(Y(161))}}catch(u){Et(t,t.return,u)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function fC(t,e,n){ne=t,sE(t)}function sE(t,e,n){for(var r=(t.mode&1)!==0;ne!==null;){var i=ne,s=i.child;if(i.tag===22&&r){var o=i.memoizedState!==null||Iu;if(!o){var a=i.alternate,u=a!==null&&a.memoizedState!==null||on;a=Iu;var c=on;if(Iu=o,(on=u)&&!c)for(ne=i;ne!==null;)o=ne,u=o.child,o.tag===22&&o.memoizedState!==null?Xy(i):u!==null?(u.return=o,ne=u):Xy(i);for(;s!==null;)ne=s,sE(s),s=s.sibling;ne=i,Iu=a,on=c}Qy(t)}else i.subtreeFlags&8772&&s!==null?(s.return=i,ne=s):Qy(t)}}function Qy(t){for(;ne!==null;){var e=ne;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:on||cd(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!on)if(n===null)r.componentDidMount();else{var i=e.elementType===e.type?n.memoizedProps:or(e.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var s=e.updateQueue;s!==null&&Oy(e,s,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}Oy(e,o,n)}break;case 5:var a=e.stateNode;if(n===null&&e.flags&4){n=a;var u=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":u.autoFocus&&n.focus();break;case"img":u.src&&(n.src=u.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var c=e.alternate;if(c!==null){var d=c.memoizedState;if(d!==null){var f=d.dehydrated;f!==null&&sl(f)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(Y(163))}on||e.flags&512&&Lf(e)}catch(m){Et(e,e.return,m)}}if(e===t){ne=null;break}if(n=e.sibling,n!==null){n.return=e.return,ne=n;break}ne=e.return}}function Yy(t){for(;ne!==null;){var e=ne;if(e===t){ne=null;break}var n=e.sibling;if(n!==null){n.return=e.return,ne=n;break}ne=e.return}}function Xy(t){for(;ne!==null;){var e=ne;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{cd(4,e)}catch(u){Et(e,n,u)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var i=e.return;try{r.componentDidMount()}catch(u){Et(e,i,u)}}var s=e.return;try{Lf(e)}catch(u){Et(e,s,u)}break;case 5:var o=e.return;try{Lf(e)}catch(u){Et(e,o,u)}}}catch(u){Et(e,e.return,u)}if(e===t){ne=null;break}var a=e.sibling;if(a!==null){a.return=e.return,ne=a;break}ne=e.return}}var pC=Math.ceil,Tc=si.ReactCurrentDispatcher,om=si.ReactCurrentOwner,Jn=si.ReactCurrentBatchConfig,Ve=0,Ft=null,kt=null,Wt=0,bn=0,yo=Zi(0),Nt=0,gl=null,Ps=0,dd=0,am=0,qa=null,wn=null,lm=0,Mo=1/0,Ur=null,Sc=!1,jf=null,Fi=null,Pu=!1,Ni=null,Ic=0,Ka=0,Ff=null,Wu=-1,qu=0;function gn(){return Ve&6?Pt():Wu!==-1?Wu:Wu=Pt()}function Ui(t){return t.mode&1?Ve&2&&Wt!==0?Wt&-Wt:XP.transition!==null?(qu===0&&(qu=$0()),qu):(t=Ye,t!==0||(t=window.event,t=t===void 0?16:Y0(t.type)),t):1}function dr(t,e,n,r){if(50<Ka)throw Ka=0,Ff=null,Error(Y(185));Ol(t,n,r),(!(Ve&2)||t!==Ft)&&(t===Ft&&(!(Ve&2)&&(dd|=n),Nt===4&&Ci(t,Wt)),Pn(t,r),n===1&&Ve===0&&!(e.mode&1)&&(Mo=Pt()+500,ad&&es()))}function Pn(t,e){var n=t.callbackNode;XI(t,e);var r=ac(t,t===Ft?Wt:0);if(r===0)n!==null&&oy(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&oy(n),e===1)t.tag===0?YP(Jy.bind(null,t)):mw(Jy.bind(null,t)),qP(function(){!(Ve&6)&&es()}),n=null;else{switch(H0(r)){case 1:n=Dp;break;case 4:n=z0;break;case 16:n=oc;break;case 536870912:n=B0;break;default:n=oc}n=fE(n,oE.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function oE(t,e){if(Wu=-1,qu=0,Ve&6)throw Error(Y(327));var n=t.callbackNode;if(Po()&&t.callbackNode!==n)return null;var r=ac(t,t===Ft?Wt:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=Pc(t,r);else{e=r;var i=Ve;Ve|=2;var s=lE();(Ft!==t||Wt!==e)&&(Ur=null,Mo=Pt()+500,_s(t,e));do try{yC();break}catch(a){aE(t,a)}while(!0);Kp(),Tc.current=s,Ve=i,kt!==null?e=0:(Ft=null,Wt=0,e=Nt)}if(e!==0){if(e===2&&(i=hf(t),i!==0&&(r=i,e=Uf(t,i))),e===1)throw n=gl,_s(t,0),Ci(t,r),Pn(t,Pt()),n;if(e===6)Ci(t,r);else{if(i=t.current.alternate,!(r&30)&&!mC(i)&&(e=Pc(t,r),e===2&&(s=hf(t),s!==0&&(r=s,e=Uf(t,s))),e===1))throw n=gl,_s(t,0),Ci(t,r),Pn(t,Pt()),n;switch(t.finishedWork=i,t.finishedLanes=r,e){case 0:case 1:throw Error(Y(345));case 2:cs(t,wn,Ur);break;case 3:if(Ci(t,r),(r&130023424)===r&&(e=lm+500-Pt(),10<e)){if(ac(t,0)!==0)break;if(i=t.suspendedLanes,(i&r)!==r){gn(),t.pingedLanes|=t.suspendedLanes&i;break}t.timeoutHandle=wf(cs.bind(null,t,wn,Ur),e);break}cs(t,wn,Ur);break;case 4:if(Ci(t,r),(r&4194240)===r)break;for(e=t.eventTimes,i=-1;0<r;){var o=31-cr(r);s=1<<o,o=e[o],o>i&&(i=o),r&=~s}if(r=i,r=Pt()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*pC(r/1960))-r,10<r){t.timeoutHandle=wf(cs.bind(null,t,wn,Ur),r);break}cs(t,wn,Ur);break;case 5:cs(t,wn,Ur);break;default:throw Error(Y(329))}}}return Pn(t,Pt()),t.callbackNode===n?oE.bind(null,t):null}function Uf(t,e){var n=qa;return t.current.memoizedState.isDehydrated&&(_s(t,e).flags|=256),t=Pc(t,e),t!==2&&(e=wn,wn=n,e!==null&&zf(e)),t}function zf(t){wn===null?wn=t:wn.push.apply(wn,t)}function mC(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],s=i.getSnapshot;i=i.value;try{if(!fr(s(),i))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Ci(t,e){for(e&=~am,e&=~dd,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-cr(e),r=1<<n;t[n]=-1,e&=~r}}function Jy(t){if(Ve&6)throw Error(Y(327));Po();var e=ac(t,0);if(!(e&1))return Pn(t,Pt()),null;var n=Pc(t,e);if(t.tag!==0&&n===2){var r=hf(t);r!==0&&(e=r,n=Uf(t,r))}if(n===1)throw n=gl,_s(t,0),Ci(t,e),Pn(t,Pt()),n;if(n===6)throw Error(Y(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,cs(t,wn,Ur),Pn(t,Pt()),null}function um(t,e){var n=Ve;Ve|=1;try{return t(e)}finally{Ve=n,Ve===0&&(Mo=Pt()+500,ad&&es())}}function Cs(t){Ni!==null&&Ni.tag===0&&!(Ve&6)&&Po();var e=Ve;Ve|=1;var n=Jn.transition,r=Ye;try{if(Jn.transition=null,Ye=1,t)return t()}finally{Ye=r,Jn.transition=n,Ve=e,!(Ve&6)&&es()}}function cm(){bn=yo.current,at(yo)}function _s(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,WP(n)),kt!==null)for(n=kt.return;n!==null;){var r=n;switch(Hp(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&hc();break;case 3:Do(),at(Sn),at(ln),Zp();break;case 5:Jp(r);break;case 4:Do();break;case 13:at(ft);break;case 19:at(ft);break;case 10:Gp(r.type._context);break;case 22:case 23:cm()}n=n.return}if(Ft=t,kt=t=zi(t.current,null),Wt=bn=e,Nt=0,gl=null,am=dd=Ps=0,wn=qa=null,ps!==null){for(e=0;e<ps.length;e++)if(n=ps[e],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,s=n.pending;if(s!==null){var o=s.next;s.next=i,r.next=o}n.pending=r}ps=null}return t}function aE(t,e){do{var n=kt;try{if(Kp(),Bu.current=Ec,wc){for(var r=pt.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}wc=!1}if(Is=0,jt=bt=pt=null,Ha=!1,fl=0,om.current=null,n===null||n.return===null){Nt=1,gl=e,kt=null;break}e:{var s=t,o=n.return,a=n,u=e;if(e=Wt,a.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){var c=u,d=a,f=d.tag;if(!(d.mode&1)&&(f===0||f===11||f===15)){var m=d.alternate;m?(d.updateQueue=m.updateQueue,d.memoizedState=m.memoizedState,d.lanes=m.lanes):(d.updateQueue=null,d.memoizedState=null)}var E=Fy(o);if(E!==null){E.flags&=-257,Uy(E,o,a,s,e),E.mode&1&&jy(s,c,e),e=E,u=c;var C=e.updateQueue;if(C===null){var A=new Set;A.add(u),e.updateQueue=A}else C.add(u);break e}else{if(!(e&1)){jy(s,c,e),dm();break e}u=Error(Y(426))}}else if(ut&&a.mode&1){var O=Fy(o);if(O!==null){!(O.flags&65536)&&(O.flags|=256),Uy(O,o,a,s,e),Wp(Lo(u,a));break e}}s=u=Lo(u,a),Nt!==4&&(Nt=2),qa===null?qa=[s]:qa.push(s),s=o;do{switch(s.tag){case 3:s.flags|=65536,e&=-e,s.lanes|=e;var P=Hw(s,u,e);Ny(s,P);break e;case 1:a=u;var v=s.type,I=s.stateNode;if(!(s.flags&128)&&(typeof v.getDerivedStateFromError=="function"||I!==null&&typeof I.componentDidCatch=="function"&&(Fi===null||!Fi.has(I)))){s.flags|=65536,e&=-e,s.lanes|=e;var M=Ww(s,a,e);Ny(s,M);break e}}s=s.return}while(s!==null)}cE(n)}catch(F){e=F,kt===n&&n!==null&&(kt=n=n.return);continue}break}while(!0)}function lE(){var t=Tc.current;return Tc.current=Ec,t===null?Ec:t}function dm(){(Nt===0||Nt===3||Nt===2)&&(Nt=4),Ft===null||!(Ps&268435455)&&!(dd&268435455)||Ci(Ft,Wt)}function Pc(t,e){var n=Ve;Ve|=2;var r=lE();(Ft!==t||Wt!==e)&&(Ur=null,_s(t,e));do try{gC();break}catch(i){aE(t,i)}while(!0);if(Kp(),Ve=n,Tc.current=r,kt!==null)throw Error(Y(261));return Ft=null,Wt=0,Nt}function gC(){for(;kt!==null;)uE(kt)}function yC(){for(;kt!==null&&!BI();)uE(kt)}function uE(t){var e=hE(t.alternate,t,bn);t.memoizedProps=t.pendingProps,e===null?cE(t):kt=e,om.current=null}function cE(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=cC(n,e),n!==null){n.flags&=32767,kt=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{Nt=6,kt=null;return}}else if(n=uC(n,e,bn),n!==null){kt=n;return}if(e=e.sibling,e!==null){kt=e;return}kt=e=t}while(e!==null);Nt===0&&(Nt=5)}function cs(t,e,n){var r=Ye,i=Jn.transition;try{Jn.transition=null,Ye=1,vC(t,e,n,r)}finally{Jn.transition=i,Ye=r}return null}function vC(t,e,n,r){do Po();while(Ni!==null);if(Ve&6)throw Error(Y(327));n=t.finishedWork;var i=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(Y(177));t.callbackNode=null,t.callbackPriority=0;var s=n.lanes|n.childLanes;if(JI(t,s),t===Ft&&(kt=Ft=null,Wt=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Pu||(Pu=!0,fE(oc,function(){return Po(),null})),s=(n.flags&15990)!==0,n.subtreeFlags&15990||s){s=Jn.transition,Jn.transition=null;var o=Ye;Ye=1;var a=Ve;Ve|=4,om.current=null,hC(t,n),iE(n,t),jP(vf),lc=!!yf,vf=yf=null,t.current=n,fC(n),$I(),Ve=a,Ye=o,Jn.transition=s}else t.current=n;if(Pu&&(Pu=!1,Ni=t,Ic=i),s=t.pendingLanes,s===0&&(Fi=null),qI(n.stateNode),Pn(t,Pt()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)i=e[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(Sc)throw Sc=!1,t=jf,jf=null,t;return Ic&1&&t.tag!==0&&Po(),s=t.pendingLanes,s&1?t===Ff?Ka++:(Ka=0,Ff=t):Ka=0,es(),null}function Po(){if(Ni!==null){var t=H0(Ic),e=Jn.transition,n=Ye;try{if(Jn.transition=null,Ye=16>t?16:t,Ni===null)var r=!1;else{if(t=Ni,Ni=null,Ic=0,Ve&6)throw Error(Y(331));var i=Ve;for(Ve|=4,ne=t.current;ne!==null;){var s=ne,o=s.child;if(ne.flags&16){var a=s.deletions;if(a!==null){for(var u=0;u<a.length;u++){var c=a[u];for(ne=c;ne!==null;){var d=ne;switch(d.tag){case 0:case 11:case 15:Wa(8,d,s)}var f=d.child;if(f!==null)f.return=d,ne=f;else for(;ne!==null;){d=ne;var m=d.sibling,E=d.return;if(tE(d),d===c){ne=null;break}if(m!==null){m.return=E,ne=m;break}ne=E}}}var C=s.alternate;if(C!==null){var A=C.child;if(A!==null){C.child=null;do{var O=A.sibling;A.sibling=null,A=O}while(A!==null)}}ne=s}}if(s.subtreeFlags&2064&&o!==null)o.return=s,ne=o;else e:for(;ne!==null;){if(s=ne,s.flags&2048)switch(s.tag){case 0:case 11:case 15:Wa(9,s,s.return)}var P=s.sibling;if(P!==null){P.return=s.return,ne=P;break e}ne=s.return}}var v=t.current;for(ne=v;ne!==null;){o=ne;var I=o.child;if(o.subtreeFlags&2064&&I!==null)I.return=o,ne=I;else e:for(o=v;ne!==null;){if(a=ne,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:cd(9,a)}}catch(F){Et(a,a.return,F)}if(a===o){ne=null;break e}var M=a.sibling;if(M!==null){M.return=a.return,ne=M;break e}ne=a.return}}if(Ve=i,es(),Ir&&typeof Ir.onPostCommitFiberRoot=="function")try{Ir.onPostCommitFiberRoot(nd,t)}catch{}r=!0}return r}finally{Ye=n,Jn.transition=e}}return!1}function Zy(t,e,n){e=Lo(n,e),e=Hw(t,e,1),t=ji(t,e,1),e=gn(),t!==null&&(Ol(t,1,e),Pn(t,e))}function Et(t,e,n){if(t.tag===3)Zy(t,t,n);else for(;e!==null;){if(e.tag===3){Zy(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Fi===null||!Fi.has(r))){t=Lo(n,t),t=Ww(e,t,1),e=ji(e,t,1),t=gn(),e!==null&&(Ol(e,1,t),Pn(e,t));break}}e=e.return}}function _C(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=gn(),t.pingedLanes|=t.suspendedLanes&n,Ft===t&&(Wt&n)===n&&(Nt===4||Nt===3&&(Wt&130023424)===Wt&&500>Pt()-lm?_s(t,0):am|=n),Pn(t,e)}function dE(t,e){e===0&&(t.mode&1?(e=mu,mu<<=1,!(mu&130023424)&&(mu=4194304)):e=1);var n=gn();t=ei(t,e),t!==null&&(Ol(t,e,n),Pn(t,n))}function wC(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),dE(t,n)}function EC(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,i=t.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(Y(314))}r!==null&&r.delete(e),dE(t,n)}var hE;hE=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||Sn.current)Tn=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return Tn=!1,lC(t,e,n);Tn=!!(t.flags&131072)}else Tn=!1,ut&&e.flags&1048576&&gw(e,mc,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;Hu(t,e),t=e.pendingProps;var i=xo(e,ln.current);Io(e,n),i=tm(null,e,r,t,i,n);var s=nm();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,In(r)?(s=!0,fc(e)):s=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,Yp(e),i.updater=ud,e.stateNode=i,i._reactInternals=e,Rf(e,r,t,n),e=bf(null,e,r,!0,s,n)):(e.tag=0,ut&&s&&$p(e),mn(null,e,i,n),e=e.child),e;case 16:r=e.elementType;e:{switch(Hu(t,e),t=e.pendingProps,i=r._init,r=i(r._payload),e.type=r,i=e.tag=SC(r),t=or(r,t),i){case 0:e=kf(null,e,r,t,n);break e;case 1:e=$y(null,e,r,t,n);break e;case 11:e=zy(null,e,r,t,n);break e;case 14:e=By(null,e,r,or(r.type,t),n);break e}throw Error(Y(306,r,""))}return e;case 0:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:or(r,i),kf(t,e,r,i,n);case 1:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:or(r,i),$y(t,e,r,i,n);case 3:e:{if(Qw(e),t===null)throw Error(Y(387));r=e.pendingProps,s=e.memoizedState,i=s.element,Tw(t,e),vc(e,r,null,n);var o=e.memoizedState;if(r=o.element,s.isDehydrated)if(s={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){i=Lo(Error(Y(423)),e),e=Hy(t,e,r,n,i);break e}else if(r!==i){i=Lo(Error(Y(424)),e),e=Hy(t,e,r,n,i);break e}else for(Nn=Vi(e.stateNode.containerInfo.firstChild),Ln=e,ut=!0,ur=null,n=ww(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(No(),r===i){e=ti(t,e,n);break e}mn(t,e,r,n)}e=e.child}return e;case 5:return Sw(e),t===null&&If(e),r=e.type,i=e.pendingProps,s=t!==null?t.memoizedProps:null,o=i.children,_f(r,i)?o=null:s!==null&&_f(r,s)&&(e.flags|=32),Gw(t,e),mn(t,e,o,n),e.child;case 6:return t===null&&If(e),null;case 13:return Yw(t,e,n);case 4:return Xp(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=Oo(e,null,r,n):mn(t,e,r,n),e.child;case 11:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:or(r,i),zy(t,e,r,i,n);case 7:return mn(t,e,e.pendingProps,n),e.child;case 8:return mn(t,e,e.pendingProps.children,n),e.child;case 12:return mn(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,i=e.pendingProps,s=e.memoizedProps,o=i.value,et(gc,r._currentValue),r._currentValue=o,s!==null)if(fr(s.value,o)){if(s.children===i.children&&!Sn.current){e=ti(t,e,n);break e}}else for(s=e.child,s!==null&&(s.return=e);s!==null;){var a=s.dependencies;if(a!==null){o=s.child;for(var u=a.firstContext;u!==null;){if(u.context===r){if(s.tag===1){u=Qr(-1,n&-n),u.tag=2;var c=s.updateQueue;if(c!==null){c=c.shared;var d=c.pending;d===null?u.next=u:(u.next=d.next,d.next=u),c.pending=u}}s.lanes|=n,u=s.alternate,u!==null&&(u.lanes|=n),Pf(s.return,n,e),a.lanes|=n;break}u=u.next}}else if(s.tag===10)o=s.type===e.type?null:s.child;else if(s.tag===18){if(o=s.return,o===null)throw Error(Y(341));o.lanes|=n,a=o.alternate,a!==null&&(a.lanes|=n),Pf(o,n,e),o=s.sibling}else o=s.child;if(o!==null)o.return=s;else for(o=s;o!==null;){if(o===e){o=null;break}if(s=o.sibling,s!==null){s.return=o.return,o=s;break}o=o.return}s=o}mn(t,e,i.children,n),e=e.child}return e;case 9:return i=e.type,r=e.pendingProps.children,Io(e,n),i=Zn(i),r=r(i),e.flags|=1,mn(t,e,r,n),e.child;case 14:return r=e.type,i=or(r,e.pendingProps),i=or(r.type,i),By(t,e,r,i,n);case 15:return qw(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:or(r,i),Hu(t,e),e.tag=1,In(r)?(t=!0,fc(e)):t=!1,Io(e,n),$w(e,r,i),Rf(e,r,i,n),bf(null,e,r,!0,t,n);case 19:return Xw(t,e,n);case 22:return Kw(t,e,n)}throw Error(Y(156,e.tag))};function fE(t,e){return U0(t,e)}function TC(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Xn(t,e,n,r){return new TC(t,e,n,r)}function hm(t){return t=t.prototype,!(!t||!t.isReactComponent)}function SC(t){if(typeof t=="function")return hm(t)?1:0;if(t!=null){if(t=t.$$typeof,t===xp)return 11;if(t===Np)return 14}return 2}function zi(t,e){var n=t.alternate;return n===null?(n=Xn(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function Ku(t,e,n,r,i,s){var o=2;if(r=t,typeof t=="function")hm(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case oo:return ws(n.children,i,s,e);case bp:o=8,i|=8;break;case Yh:return t=Xn(12,n,e,i|2),t.elementType=Yh,t.lanes=s,t;case Xh:return t=Xn(13,n,e,i),t.elementType=Xh,t.lanes=s,t;case Jh:return t=Xn(19,n,e,i),t.elementType=Jh,t.lanes=s,t;case S0:return hd(n,i,s,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case E0:o=10;break e;case T0:o=9;break e;case xp:o=11;break e;case Np:o=14;break e;case Si:o=16,r=null;break e}throw Error(Y(130,t==null?t:typeof t,""))}return e=Xn(o,n,e,i),e.elementType=t,e.type=r,e.lanes=s,e}function ws(t,e,n,r){return t=Xn(7,t,r,e),t.lanes=n,t}function hd(t,e,n,r){return t=Xn(22,t,r,e),t.elementType=S0,t.lanes=n,t.stateNode={isHidden:!1},t}function Sh(t,e,n){return t=Xn(6,t,null,e),t.lanes=n,t}function Ih(t,e,n){return e=Xn(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function IC(t,e,n,r,i){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=ih(0),this.expirationTimes=ih(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=ih(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function fm(t,e,n,r,i,s,o,a,u){return t=new IC(t,e,n,a,u),e===1?(e=1,s===!0&&(e|=8)):e=0,s=Xn(3,null,null,e),t.current=s,s.stateNode=t,s.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Yp(s),t}function PC(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:so,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function pE(t){if(!t)return Ki;t=t._reactInternals;e:{if(Bs(t)!==t||t.tag!==1)throw Error(Y(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(In(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(Y(171))}if(t.tag===1){var n=t.type;if(In(n))return pw(t,n,e)}return e}function mE(t,e,n,r,i,s,o,a,u){return t=fm(n,r,!0,t,i,s,o,a,u),t.context=pE(null),n=t.current,r=gn(),i=Ui(n),s=Qr(r,i),s.callback=e??null,ji(n,s,i),t.current.lanes=i,Ol(t,i,r),Pn(t,r),t}function fd(t,e,n,r){var i=e.current,s=gn(),o=Ui(i);return n=pE(n),e.context===null?e.context=n:e.pendingContext=n,e=Qr(s,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=ji(i,e,o),t!==null&&(dr(t,i,o,s),zu(t,i,o)),o}function Cc(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function ev(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function pm(t,e){ev(t,e),(t=t.alternate)&&ev(t,e)}function CC(){return null}var gE=typeof reportError=="function"?reportError:function(t){console.error(t)};function mm(t){this._internalRoot=t}pd.prototype.render=mm.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(Y(409));fd(t,e,null,null)};pd.prototype.unmount=mm.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Cs(function(){fd(null,t,null,null)}),e[Zr]=null}};function pd(t){this._internalRoot=t}pd.prototype.unstable_scheduleHydration=function(t){if(t){var e=K0();t={blockedOn:null,target:t,priority:e};for(var n=0;n<Pi.length&&e!==0&&e<Pi[n].priority;n++);Pi.splice(n,0,t),n===0&&Q0(t)}};function gm(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function md(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function tv(){}function RC(t,e,n,r,i){if(i){if(typeof r=="function"){var s=r;r=function(){var c=Cc(o);s.call(c)}}var o=mE(e,r,t,0,null,!1,!1,"",tv);return t._reactRootContainer=o,t[Zr]=o.current,ll(t.nodeType===8?t.parentNode:t),Cs(),o}for(;i=t.lastChild;)t.removeChild(i);if(typeof r=="function"){var a=r;r=function(){var c=Cc(u);a.call(c)}}var u=fm(t,0,!1,null,null,!1,!1,"",tv);return t._reactRootContainer=u,t[Zr]=u.current,ll(t.nodeType===8?t.parentNode:t),Cs(function(){fd(e,u,n,r)}),u}function gd(t,e,n,r,i){var s=n._reactRootContainer;if(s){var o=s;if(typeof i=="function"){var a=i;i=function(){var u=Cc(o);a.call(u)}}fd(e,o,t,i)}else o=RC(n,e,t,i,r);return Cc(o)}W0=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=Aa(e.pendingLanes);n!==0&&(Lp(e,n|1),Pn(e,Pt()),!(Ve&6)&&(Mo=Pt()+500,es()))}break;case 13:Cs(function(){var r=ei(t,1);if(r!==null){var i=gn();dr(r,t,1,i)}}),pm(t,1)}};Mp=function(t){if(t.tag===13){var e=ei(t,134217728);if(e!==null){var n=gn();dr(e,t,134217728,n)}pm(t,134217728)}};q0=function(t){if(t.tag===13){var e=Ui(t),n=ei(t,e);if(n!==null){var r=gn();dr(n,t,e,r)}pm(t,e)}};K0=function(){return Ye};G0=function(t,e){var n=Ye;try{return Ye=t,e()}finally{Ye=n}};uf=function(t,e,n){switch(e){case"input":if(tf(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var i=od(r);if(!i)throw Error(Y(90));P0(r),tf(r,i)}}}break;case"textarea":R0(t,n);break;case"select":e=n.value,e!=null&&wo(t,!!n.multiple,e,!1)}};D0=um;L0=Cs;var AC={usingClientEntryPoint:!1,Events:[Ll,co,od,N0,O0,um]},Ea={findFiberByHostInstance:fs,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},kC={bundleType:Ea.bundleType,version:Ea.version,rendererPackageName:Ea.rendererPackageName,rendererConfig:Ea.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:si.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=j0(t),t===null?null:t.stateNode},findFiberByHostInstance:Ea.findFiberByHostInstance||CC,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Cu=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Cu.isDisabled&&Cu.supportsFiber)try{nd=Cu.inject(kC),Ir=Cu}catch{}}Fn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=AC;Fn.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!gm(e))throw Error(Y(200));return PC(t,e,null,n)};Fn.createRoot=function(t,e){if(!gm(t))throw Error(Y(299));var n=!1,r="",i=gE;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=fm(t,1,!1,null,null,n,!1,r,i),t[Zr]=e.current,ll(t.nodeType===8?t.parentNode:t),new mm(e)};Fn.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(Y(188)):(t=Object.keys(t).join(","),Error(Y(268,t)));return t=j0(e),t=t===null?null:t.stateNode,t};Fn.flushSync=function(t){return Cs(t)};Fn.hydrate=function(t,e,n){if(!md(e))throw Error(Y(200));return gd(null,t,e,!0,n)};Fn.hydrateRoot=function(t,e,n){if(!gm(t))throw Error(Y(405));var r=n!=null&&n.hydratedSources||null,i=!1,s="",o=gE;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(s=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=mE(e,null,t,1,n??null,i,!1,s,o),t[Zr]=e.current,ll(t),r)for(t=0;t<r.length;t++)n=r[t],i=n._getVersion,i=i(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,i]:e.mutableSourceEagerHydrationData.push(n,i);return new pd(e)};Fn.render=function(t,e,n){if(!md(e))throw Error(Y(200));return gd(null,t,e,!1,n)};Fn.unmountComponentAtNode=function(t){if(!md(t))throw Error(Y(40));return t._reactRootContainer?(Cs(function(){gd(null,null,t,!1,function(){t._reactRootContainer=null,t[Zr]=null})}),!0):!1};Fn.unstable_batchedUpdates=um;Fn.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!md(n))throw Error(Y(200));if(t==null||t._reactInternals===void 0)throw Error(Y(38));return gd(t,e,n,!1,r)};Fn.version="18.3.1-next-f1338f8080-20240426";function yE(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(yE)}catch(t){console.error(t)}}yE(),y0.exports=Fn;var ym=y0.exports;const bC=Tp(ym),xC=s0({__proto__:null,default:bC},[ym]);var nv=ym;Gh.createRoot=nv.createRoot,Gh.hydrateRoot=nv.hydrateRoot;/**
 * @remix-run/router v1.18.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function ht(){return ht=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},ht.apply(this,arguments)}var Rt;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(Rt||(Rt={}));const rv="popstate";function NC(t){t===void 0&&(t={});function e(i,s){let{pathname:o="/",search:a="",hash:u=""}=oi(i.location.hash.substr(1));return!o.startsWith("/")&&!o.startsWith(".")&&(o="/"+o),yl("",{pathname:o,search:a,hash:u},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function n(i,s){let o=i.document.querySelector("base"),a="";if(o&&o.getAttribute("href")){let u=i.location.href,c=u.indexOf("#");a=c===-1?u:u.slice(0,c)}return a+"#"+(typeof s=="string"?s:As(s))}function r(i,s){Rs(i.pathname.charAt(0)==="/","relative pathnames are not supported in hash history.push("+JSON.stringify(s)+")")}return DC(e,n,r,t)}function Re(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function Rs(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function OC(){return Math.random().toString(36).substr(2,8)}function iv(t,e){return{usr:t.state,key:t.key,idx:e}}function yl(t,e,n,r){return n===void 0&&(n=null),ht({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?oi(e):e,{state:n,key:e&&e.key||r||OC()})}function As(t){let{pathname:e="/",search:n="",hash:r=""}=t;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function oi(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substr(r),t=t.substr(0,r)),t&&(e.pathname=t)}return e}function DC(t,e,n,r){r===void 0&&(r={});let{window:i=document.defaultView,v5Compat:s=!1}=r,o=i.history,a=Rt.Pop,u=null,c=d();c==null&&(c=0,o.replaceState(ht({},o.state,{idx:c}),""));function d(){return(o.state||{idx:null}).idx}function f(){a=Rt.Pop;let O=d(),P=O==null?null:O-c;c=O,u&&u({action:a,location:A.location,delta:P})}function m(O,P){a=Rt.Push;let v=yl(A.location,O,P);n&&n(v,O),c=d()+1;let I=iv(v,c),M=A.createHref(v);try{o.pushState(I,"",M)}catch(F){if(F instanceof DOMException&&F.name==="DataCloneError")throw F;i.location.assign(M)}s&&u&&u({action:a,location:A.location,delta:1})}function E(O,P){a=Rt.Replace;let v=yl(A.location,O,P);n&&n(v,O),c=d();let I=iv(v,c),M=A.createHref(v);o.replaceState(I,"",M),s&&u&&u({action:a,location:A.location,delta:0})}function C(O){let P=i.location.origin!=="null"?i.location.origin:i.location.href,v=typeof O=="string"?O:As(O);return v=v.replace(/ $/,"%20"),Re(P,"No window.location.(origin|href) available to create URL for href: "+v),new URL(v,P)}let A={get action(){return a},get location(){return t(i,o)},listen(O){if(u)throw new Error("A history only accepts one active listener");return i.addEventListener(rv,f),u=O,()=>{i.removeEventListener(rv,f),u=null}},createHref(O){return e(i,O)},createURL:C,encodeLocation(O){let P=C(O);return{pathname:P.pathname,search:P.search,hash:P.hash}},push:m,replace:E,go(O){return o.go(O)}};return A}var Ze;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(Ze||(Ze={}));const LC=new Set(["lazy","caseSensitive","path","id","index","children"]);function MC(t){return t.index===!0}function vl(t,e,n,r){return n===void 0&&(n=[]),r===void 0&&(r={}),t.map((i,s)=>{let o=[...n,String(s)],a=typeof i.id=="string"?i.id:o.join("-");if(Re(i.index!==!0||!i.children,"Cannot specify children on an index route"),Re(!r[a],'Found a route id collision on id "'+a+`".  Route id's must be globally unique within Data Router usages`),MC(i)){let u=ht({},i,e(i),{id:a});return r[a]=u,u}else{let u=ht({},i,e(i),{id:a,children:void 0});return r[a]=u,i.children&&(u.children=vl(i.children,e,o,r)),u}})}function hs(t,e,n){return n===void 0&&(n="/"),Gu(t,e,n,!1)}function Gu(t,e,n,r){let i=typeof e=="string"?oi(e):e,s=Jo(i.pathname||"/",n);if(s==null)return null;let o=vE(t);jC(o);let a=null;for(let u=0;a==null&&u<o.length;++u){let c=QC(s);a=KC(o[u],c,r)}return a}function VC(t,e){let{route:n,pathname:r,params:i}=t;return{id:n.id,pathname:r,params:i,data:e[n.id],handle:n.handle}}function vE(t,e,n,r){e===void 0&&(e=[]),n===void 0&&(n=[]),r===void 0&&(r="");let i=(s,o,a)=>{let u={relativePath:a===void 0?s.path||"":a,caseSensitive:s.caseSensitive===!0,childrenIndex:o,route:s};u.relativePath.startsWith("/")&&(Re(u.relativePath.startsWith(r),'Absolute route path "'+u.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),u.relativePath=u.relativePath.slice(r.length));let c=Yr([r,u.relativePath]),d=n.concat(u);s.children&&s.children.length>0&&(Re(s.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+c+'".')),vE(s.children,e,d,c)),!(s.path==null&&!s.index)&&e.push({path:c,score:WC(c,s.index),routesMeta:d})};return t.forEach((s,o)=>{var a;if(s.path===""||!((a=s.path)!=null&&a.includes("?")))i(s,o);else for(let u of _E(s.path))i(s,o,u)}),e}function _E(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,i=n.endsWith("?"),s=n.replace(/\?$/,"");if(r.length===0)return i?[s,""]:[s];let o=_E(r.join("/")),a=[];return a.push(...o.map(u=>u===""?s:[s,u].join("/"))),i&&a.push(...o),a.map(u=>t.startsWith("/")&&u===""?"/":u)}function jC(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:qC(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const FC=/^:[\w-]+$/,UC=3,zC=2,BC=1,$C=10,HC=-2,sv=t=>t==="*";function WC(t,e){let n=t.split("/"),r=n.length;return n.some(sv)&&(r+=HC),e&&(r+=zC),n.filter(i=>!sv(i)).reduce((i,s)=>i+(FC.test(s)?UC:s===""?BC:$C),r)}function qC(t,e){return t.length===e.length&&t.slice(0,-1).every((r,i)=>r===e[i])?t[t.length-1]-e[e.length-1]:0}function KC(t,e,n){n===void 0&&(n=!1);let{routesMeta:r}=t,i={},s="/",o=[];for(let a=0;a<r.length;++a){let u=r[a],c=a===r.length-1,d=s==="/"?e:e.slice(s.length)||"/",f=ov({path:u.relativePath,caseSensitive:u.caseSensitive,end:c},d),m=u.route;if(!f&&c&&n&&!r[r.length-1].route.index&&(f=ov({path:u.relativePath,caseSensitive:u.caseSensitive,end:!1},d)),!f)return null;Object.assign(i,f.params),o.push({params:i,pathname:Yr([s,f.pathname]),pathnameBase:JC(Yr([s,f.pathnameBase])),route:m}),f.pathnameBase!=="/"&&(s=Yr([s,f.pathnameBase]))}return o}function ov(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=GC(t.path,t.caseSensitive,t.end),i=e.match(n);if(!i)return null;let s=i[0],o=s.replace(/(.)\/+$/,"$1"),a=i.slice(1);return{params:r.reduce((c,d,f)=>{let{paramName:m,isOptional:E}=d;if(m==="*"){let A=a[f]||"";o=s.slice(0,s.length-A.length).replace(/(.)\/+$/,"$1")}const C=a[f];return E&&!C?c[m]=void 0:c[m]=(C||"").replace(/%2F/g,"/"),c},{}),pathname:s,pathnameBase:o,pattern:t}}function GC(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0),Rs(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let r=[],i="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,a,u)=>(r.push({paramName:a,isOptional:u!=null}),u?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(r.push({paramName:"*"}),i+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":t!==""&&t!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,e?void 0:"i"),r]}function QC(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return Rs(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function Jo(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}function YC(t,e){e===void 0&&(e="/");let{pathname:n,search:r="",hash:i=""}=typeof t=="string"?oi(t):t;return{pathname:n?n.startsWith("/")?n:XC(n,e):e,search:ZC(r),hash:eR(i)}}function XC(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(i=>{i===".."?n.length>1&&n.pop():i!=="."&&n.push(i)}),n.length>1?n.join("/"):"/"}function Ph(t,e,n,r){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function wE(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function vm(t,e){let n=wE(t);return e?n.map((r,i)=>i===n.length-1?r.pathname:r.pathnameBase):n.map(r=>r.pathnameBase)}function _m(t,e,n,r){r===void 0&&(r=!1);let i;typeof t=="string"?i=oi(t):(i=ht({},t),Re(!i.pathname||!i.pathname.includes("?"),Ph("?","pathname","search",i)),Re(!i.pathname||!i.pathname.includes("#"),Ph("#","pathname","hash",i)),Re(!i.search||!i.search.includes("#"),Ph("#","search","hash",i)));let s=t===""||i.pathname==="",o=s?"/":i.pathname,a;if(o==null)a=n;else{let f=e.length-1;if(!r&&o.startsWith("..")){let m=o.split("/");for(;m[0]==="..";)m.shift(),f-=1;i.pathname=m.join("/")}a=f>=0?e[f]:"/"}let u=YC(i,a),c=o&&o!=="/"&&o.endsWith("/"),d=(s||o===".")&&n.endsWith("/");return!u.pathname.endsWith("/")&&(c||d)&&(u.pathname+="/"),u}const Yr=t=>t.join("/").replace(/\/\/+/g,"/"),JC=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),ZC=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,eR=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;class wm{constructor(e,n,r,i){i===void 0&&(i=!1),this.status=e,this.statusText=n||"",this.internal=i,r instanceof Error?(this.data=r.toString(),this.error=r):this.data=r}}function yd(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const EE=["post","put","patch","delete"],tR=new Set(EE),nR=["get",...EE],rR=new Set(nR),iR=new Set([301,302,303,307,308]),sR=new Set([307,308]),Ch={state:"idle",location:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0},oR={state:"idle",data:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0},Ta={state:"unblocked",proceed:void 0,reset:void 0,location:void 0},Em=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,aR=t=>({hasErrorBoundary:!!t.hasErrorBoundary}),TE="remix-router-transitions";function lR(t){const e=t.window?t.window:typeof window<"u"?window:void 0,n=typeof e<"u"&&typeof e.document<"u"&&typeof e.document.createElement<"u",r=!n;Re(t.routes.length>0,"You must provide a non-empty routes array to createRouter");let i;if(t.mapRouteProperties)i=t.mapRouteProperties;else if(t.detectErrorBoundary){let x=t.detectErrorBoundary;i=L=>({hasErrorBoundary:x(L)})}else i=aR;let s={},o=vl(t.routes,i,void 0,s),a,u=t.basename||"/",c=t.unstable_dataStrategy||fR,d=t.unstable_patchRoutesOnMiss,f=ht({v7_fetcherPersist:!1,v7_normalizeFormMethod:!1,v7_partialHydration:!1,v7_prependBasename:!1,v7_relativeSplatPath:!1,v7_skipActionErrorRevalidation:!1},t.future),m=null,E=new Set,C=null,A=null,O=null,P=t.hydrationData!=null,v=hs(o,t.history.location,u),I=null;if(v==null&&!d){let x=pn(404,{pathname:t.history.location.pathname}),{matches:L,route:z}=gv(o);v=L,I={[z.id]:x}}v&&d&&!t.hydrationData&&be(v,o,t.history.location.pathname).active&&(v=null);let M;if(!v)M=!1,v=[];else if(v.some(x=>x.route.lazy))M=!1;else if(!v.some(x=>x.route.loader))M=!0;else if(f.v7_partialHydration){let x=t.hydrationData?t.hydrationData.loaderData:null,L=t.hydrationData?t.hydrationData.errors:null,z=q=>q.route.loader?typeof q.route.loader=="function"&&q.route.loader.hydrate===!0?!1:x&&x[q.route.id]!==void 0||L&&L[q.route.id]!==void 0:!0;if(L){let q=v.findIndex(ee=>L[ee.route.id]!==void 0);M=v.slice(0,q+1).every(z)}else M=v.every(z)}else M=t.hydrationData!=null;let F,k={historyAction:t.history.action,location:t.history.location,matches:v,initialized:M,navigation:Ch,restoreScrollPosition:t.hydrationData!=null?!1:null,preventScrollReset:!1,revalidation:"idle",loaderData:t.hydrationData&&t.hydrationData.loaderData||{},actionData:t.hydrationData&&t.hydrationData.actionData||null,errors:t.hydrationData&&t.hydrationData.errors||I,fetchers:new Map,blockers:new Map},S=Rt.Pop,g=!1,w,T=!1,b=new Map,N=null,R=!1,oe=!1,Fe=[],Be=[],ge=new Map,X=0,re=-1,te=new Map,ye=new Set,ve=new Map,_e=new Map,Ce=new Set,$e=new Map,ct=new Map,Yt=new Map,Rn=!1;function tr(){if(m=t.history.listen(x=>{let{action:L,location:z,delta:q}=x;if(Rn){Rn=!1;return}Rs(ct.size===0||q!=null,"You are trying to use a blocker on a POP navigation to a location that was not created by @remix-run/router. This will fail silently in production. This can happen if you are navigating outside the router via `window.history.pushState`/`window.location.hash` instead of using router navigation APIs.  This can also happen if you are using createHashRouter and the user manually changes the URL.");let ee=U({currentLocation:k.location,nextLocation:z,historyAction:L});if(ee&&q!=null){Rn=!0,t.history.go(q*-1),K(ee,{state:"blocked",location:z,proceed(){K(ee,{state:"proceeding",proceed:void 0,reset:void 0,location:z}),t.history.go(q)},reset(){let ae=new Map(k.blockers);ae.set(ee,Ta),He({blockers:ae})}});return}return zn(L,z)}),n){CR(e,b);let x=()=>RR(e,b);e.addEventListener("pagehide",x),N=()=>e.removeEventListener("pagehide",x)}return k.initialized||zn(Rt.Pop,k.location,{initialHydration:!0}),F}function _n(){m&&m(),N&&N(),E.clear(),w&&w.abort(),k.fetchers.forEach((x,L)=>Lr(L)),k.blockers.forEach((x,L)=>B(L))}function vt(x){return E.add(x),()=>E.delete(x)}function He(x,L){L===void 0&&(L={}),k=ht({},k,x);let z=[],q=[];f.v7_fetcherPersist&&k.fetchers.forEach((ee,ae)=>{ee.state==="idle"&&(Ce.has(ae)?q.push(ae):z.push(ae))}),[...E].forEach(ee=>ee(k,{deletedFetchers:q,unstable_viewTransitionOpts:L.viewTransitionOpts,unstable_flushSync:L.flushSync===!0})),f.v7_fetcherPersist&&(z.forEach(ee=>k.fetchers.delete(ee)),q.forEach(ee=>Lr(ee)))}function nt(x,L,z){var q,ee;let{flushSync:ae}=z===void 0?{}:z,fe=k.actionData!=null&&k.navigation.formMethod!=null&&lr(k.navigation.formMethod)&&k.navigation.state==="loading"&&((q=x.state)==null?void 0:q._isRedirect)!==!0,J;L.actionData?Object.keys(L.actionData).length>0?J=L.actionData:J=null:fe?J=k.actionData:J=null;let Te=L.loaderData?pv(k.loaderData,L.loaderData,L.matches||[],L.errors):k.loaderData,le=k.blockers;le.size>0&&(le=new Map(le),le.forEach((Ue,Ke)=>le.set(Ke,Ta)));let ue=g===!0||k.navigation.formMethod!=null&&lr(k.navigation.formMethod)&&((ee=x.state)==null?void 0:ee._isRedirect)!==!0;a&&(o=a,a=void 0),R||S===Rt.Pop||(S===Rt.Push?t.history.push(x,x.state):S===Rt.Replace&&t.history.replace(x,x.state));let Ae;if(S===Rt.Pop){let Ue=b.get(k.location.pathname);Ue&&Ue.has(x.pathname)?Ae={currentLocation:k.location,nextLocation:x}:b.has(x.pathname)&&(Ae={currentLocation:x,nextLocation:k.location})}else if(T){let Ue=b.get(k.location.pathname);Ue?Ue.add(x.pathname):(Ue=new Set([x.pathname]),b.set(k.location.pathname,Ue)),Ae={currentLocation:k.location,nextLocation:x}}He(ht({},L,{actionData:J,loaderData:Te,historyAction:S,location:x,initialized:!0,navigation:Ch,revalidation:"idle",restoreScrollPosition:Qe(x,L.matches||k.matches),preventScrollReset:ue,blockers:le}),{viewTransitionOpts:Ae,flushSync:ae===!0}),S=Rt.Pop,g=!1,T=!1,R=!1,oe=!1,Fe=[],Be=[]}async function hi(x,L){if(typeof x=="number"){t.history.go(x);return}let z=Bf(k.location,k.matches,u,f.v7_prependBasename,x,f.v7_relativeSplatPath,L==null?void 0:L.fromRouteId,L==null?void 0:L.relative),{path:q,submission:ee,error:ae}=av(f.v7_normalizeFormMethod,!1,z,L),fe=k.location,J=yl(k.location,q,L&&L.state);J=ht({},J,t.history.encodeLocation(J));let Te=L&&L.replace!=null?L.replace:void 0,le=Rt.Push;Te===!0?le=Rt.Replace:Te===!1||ee!=null&&lr(ee.formMethod)&&ee.formAction===k.location.pathname+k.location.search&&(le=Rt.Replace);let ue=L&&"preventScrollReset"in L?L.preventScrollReset===!0:void 0,Ae=(L&&L.unstable_flushSync)===!0,Ue=U({currentLocation:fe,nextLocation:J,historyAction:le});if(Ue){K(Ue,{state:"blocked",location:J,proceed(){K(Ue,{state:"proceeding",proceed:void 0,reset:void 0,location:J}),hi(x,L)},reset(){let Ke=new Map(k.blockers);Ke.set(Ue,Ta),He({blockers:Ke})}});return}return await zn(le,J,{submission:ee,pendingError:ae,preventScrollReset:ue,replace:L&&L.replace,enableViewTransition:L&&L.unstable_viewTransition,flushSync:Ae})}function rs(){if(lt(),He({revalidation:"loading"}),k.navigation.state!=="submitting"){if(k.navigation.state==="idle"){zn(k.historyAction,k.location,{startUninterruptedRevalidation:!0});return}zn(S||k.historyAction,k.navigation.location,{overrideNavigation:k.navigation})}}async function zn(x,L,z){w&&w.abort(),w=null,S=x,R=(z&&z.startUninterruptedRevalidation)===!0,qe(k.location,k.matches),g=(z&&z.preventScrollReset)===!0,T=(z&&z.enableViewTransition)===!0;let q=a||o,ee=z&&z.overrideNavigation,ae=hs(q,L,u),fe=(z&&z.flushSync)===!0,J=be(ae,q,L.pathname);if(J.active&&J.matches&&(ae=J.matches),!ae){let{error:Le,notFoundMatches:It,route:dt}=W(L.pathname);nt(L,{matches:It,loaderData:{},errors:{[dt.id]:Le}},{flushSync:fe});return}if(k.initialized&&!oe&&_R(k.location,L)&&!(z&&z.submission&&lr(z.submission.formMethod))){nt(L,{matches:ae},{flushSync:fe});return}w=new AbortController;let Te=eo(t.history,L,w.signal,z&&z.submission),le;if(z&&z.pendingError)le=[vo(ae).route.id,{type:Ze.error,error:z.pendingError}];else if(z&&z.submission&&lr(z.submission.formMethod)){let Le=await Gs(Te,L,z.submission,ae,J.active,{replace:z.replace,flushSync:fe});if(Le.shortCircuited)return;if(Le.pendingActionResult){let[It,dt]=Le.pendingActionResult;if(xn(dt)&&yd(dt.error)&&dt.error.status===404){w=null,nt(L,{matches:Le.matches,loaderData:{},errors:{[It]:dt.error}});return}}ae=Le.matches||ae,le=Le.pendingActionResult,ee=Rh(L,z.submission),fe=!1,J.active=!1,Te=eo(t.history,Te.url,Te.signal)}let{shortCircuited:ue,matches:Ae,loaderData:Ue,errors:Ke}=await fi(Te,L,ae,J.active,ee,z&&z.submission,z&&z.fetcherSubmission,z&&z.replace,z&&z.initialHydration===!0,fe,le);ue||(w=null,nt(L,ht({matches:Ae||ae},mv(le),{loaderData:Ue,errors:Ke})))}async function Gs(x,L,z,q,ee,ae){ae===void 0&&(ae={}),lt();let fe=IR(L,z);if(He({navigation:fe},{flushSync:ae.flushSync===!0}),ee){let le=await rt(q,L.pathname,x.signal);if(le.type==="aborted")return{shortCircuited:!0};if(le.type==="error"){let{boundaryId:ue,error:Ae}=ce(L.pathname,le);return{matches:le.partialMatches,pendingActionResult:[ue,{type:Ze.error,error:Ae}]}}else if(le.matches)q=le.matches;else{let{notFoundMatches:ue,error:Ae,route:Ue}=W(L.pathname);return{matches:ue,pendingActionResult:[Ue.id,{type:Ze.error,error:Ae}]}}}let J,Te=ba(q,L);if(!Te.route.action&&!Te.route.lazy)J={type:Ze.error,error:pn(405,{method:x.method,pathname:L.pathname,routeId:Te.route.id})};else if(J=(await nr("action",x,[Te],q))[0],x.signal.aborted)return{shortCircuited:!0};if(ys(J)){let le;return ae&&ae.replace!=null?le=ae.replace:le=dv(J.response.headers.get("Location"),new URL(x.url),u)===k.location.pathname+k.location.search,await Bn(x,J,{submission:z,replace:le}),{shortCircuited:!0}}if(gs(J))throw pn(400,{type:"defer-action"});if(xn(J)){let le=vo(q,Te.route.id);return(ae&&ae.replace)!==!0&&(S=Rt.Push),{matches:q,pendingActionResult:[le.route.id,J]}}return{matches:q,pendingActionResult:[Te.route.id,J]}}async function fi(x,L,z,q,ee,ae,fe,J,Te,le,ue){let Ae=ee||Rh(L,ae),Ue=ae||fe||_v(Ae),Ke=!R&&(!f.v7_partialHydration||!Te);if(q){if(Ke){let it=Or(ue);He(ht({navigation:Ae},it!==void 0?{actionData:it}:{}),{flushSync:le})}let Ie=await rt(z,L.pathname,x.signal);if(Ie.type==="aborted")return{shortCircuited:!0};if(Ie.type==="error"){let{boundaryId:it,error:Jt}=ce(L.pathname,Ie);return{matches:Ie.partialMatches,loaderData:{},errors:{[it]:Jt}}}else if(Ie.matches)z=Ie.matches;else{let{error:it,notFoundMatches:Jt,route:Xe}=W(L.pathname);return{matches:Jt,loaderData:{},errors:{[Xe.id]:it}}}}let Le=a||o,[It,dt]=lv(t.history,k,z,Ue,L,f.v7_partialHydration&&Te===!0,f.v7_skipActionErrorRevalidation,oe,Fe,Be,Ce,ve,ye,Le,u,ue);if(se(Ie=>!(z&&z.some(it=>it.route.id===Ie))||It&&It.some(it=>it.route.id===Ie)),re=++X,It.length===0&&dt.length===0){let Ie=pi();return nt(L,ht({matches:z,loaderData:{},errors:ue&&xn(ue[1])?{[ue[0]]:ue[1].error}:null},mv(ue),Ie?{fetchers:new Map(k.fetchers)}:{}),{flushSync:le}),{shortCircuited:!0}}if(Ke){let Ie={};if(!q){Ie.navigation=Ae;let it=Or(ue);it!==void 0&&(Ie.actionData=it)}dt.length>0&&(Ie.fetchers=Dr(dt)),He(Ie,{flushSync:le})}dt.forEach(Ie=>{ge.has(Ie.key)&&fn(Ie.key),Ie.controller&&ge.set(Ie.key,Ie.controller)});let mi=()=>dt.forEach(Ie=>fn(Ie.key));w&&w.signal.addEventListener("abort",mi);let{loaderResults:vr,fetcherResults:rr}=await St(k.matches,z,It,dt,x);if(x.signal.aborted)return{shortCircuited:!0};w&&w.signal.removeEventListener("abort",mi),dt.forEach(Ie=>ge.delete(Ie.key));let Vr=yv([...vr,...rr]);if(Vr){if(Vr.idx>=It.length){let Ie=dt[Vr.idx-It.length].key;ye.add(Ie)}return await Bn(x,Vr.result,{replace:J}),{shortCircuited:!0}}let{loaderData:_r,errors:Xt}=fv(k,z,It,vr,ue,dt,rr,$e);$e.forEach((Ie,it)=>{Ie.subscribe(Jt=>{(Jt||Ie.done)&&$e.delete(it)})}),f.v7_partialHydration&&Te&&k.errors&&Object.entries(k.errors).filter(Ie=>{let[it]=Ie;return!It.some(Jt=>Jt.route.id===it)}).forEach(Ie=>{let[it,Jt]=Ie;Xt=Object.assign(Xt||{},{[it]:Jt})});let Hn=pi(),gi=H(re),Qs=Hn||gi||dt.length>0;return ht({matches:z,loaderData:_r,errors:Xt},Qs?{fetchers:new Map(k.fetchers)}:{})}function Or(x){if(x&&!xn(x[1]))return{[x[0]]:x[1].data};if(k.actionData)return Object.keys(k.actionData).length===0?null:k.actionData}function Dr(x){return x.forEach(L=>{let z=k.fetchers.get(L.key),q=Sa(void 0,z?z.data:void 0);k.fetchers.set(L.key,q)}),new Map(k.fetchers)}function is(x,L,z,q){if(r)throw new Error("router.fetch() was called during the server render, but it shouldn't be. You are likely calling a useFetcher() method in the body of your component. Try moving it to a useEffect or a callback.");ge.has(x)&&fn(x);let ee=(q&&q.unstable_flushSync)===!0,ae=a||o,fe=Bf(k.location,k.matches,u,f.v7_prependBasename,z,f.v7_relativeSplatPath,L,q==null?void 0:q.relative),J=hs(ae,fe,u),Te=be(J,ae,fe);if(Te.active&&Te.matches&&(J=Te.matches),!J){hn(x,L,pn(404,{pathname:fe}),{flushSync:ee});return}let{path:le,submission:ue,error:Ae}=av(f.v7_normalizeFormMethod,!0,fe,q);if(Ae){hn(x,L,Ae,{flushSync:ee});return}let Ue=ba(J,le);if(g=(q&&q.preventScrollReset)===!0,ue&&lr(ue.formMethod)){yr(x,L,le,Ue,J,Te.active,ee,ue);return}ve.set(x,{routeId:L,path:le}),ss(x,L,le,Ue,J,Te.active,ee,ue)}async function yr(x,L,z,q,ee,ae,fe,J){lt(),ve.delete(x);function Te(Xe){if(!Xe.route.action&&!Xe.route.lazy){let An=pn(405,{method:J.formMethod,pathname:z,routeId:L});return hn(x,L,An,{flushSync:fe}),!0}return!1}if(!ae&&Te(q))return;let le=k.fetchers.get(x);dn(x,PR(J,le),{flushSync:fe});let ue=new AbortController,Ae=eo(t.history,z,ue.signal,J);if(ae){let Xe=await rt(ee,z,Ae.signal);if(Xe.type==="aborted")return;if(Xe.type==="error"){let{error:An}=ce(z,Xe);hn(x,L,An,{flushSync:fe});return}else if(Xe.matches){if(ee=Xe.matches,q=ba(ee,z),Te(q))return}else{hn(x,L,pn(404,{pathname:z}),{flushSync:fe});return}}ge.set(x,ue);let Ue=X,Le=(await nr("action",Ae,[q],ee))[0];if(Ae.signal.aborted){ge.get(x)===ue&&ge.delete(x);return}if(f.v7_fetcherPersist&&Ce.has(x)){if(ys(Le)||xn(Le)){dn(x,Ti(void 0));return}}else{if(ys(Le))if(ge.delete(x),re>Ue){dn(x,Ti(void 0));return}else return ye.add(x),dn(x,Sa(J)),Bn(Ae,Le,{fetcherSubmission:J});if(xn(Le)){hn(x,L,Le.error);return}}if(gs(Le))throw pn(400,{type:"defer-action"});let It=k.navigation.location||k.location,dt=eo(t.history,It,ue.signal),mi=a||o,vr=k.navigation.state!=="idle"?hs(mi,k.navigation.location,u):k.matches;Re(vr,"Didn't find any matches after fetcher action");let rr=++X;te.set(x,rr);let Vr=Sa(J,Le.data);k.fetchers.set(x,Vr);let[_r,Xt]=lv(t.history,k,vr,J,It,!1,f.v7_skipActionErrorRevalidation,oe,Fe,Be,Ce,ve,ye,mi,u,[q.route.id,Le]);Xt.filter(Xe=>Xe.key!==x).forEach(Xe=>{let An=Xe.key,sa=k.fetchers.get(An),Zl=Sa(void 0,sa?sa.data:void 0);k.fetchers.set(An,Zl),ge.has(An)&&fn(An),Xe.controller&&ge.set(An,Xe.controller)}),He({fetchers:new Map(k.fetchers)});let Hn=()=>Xt.forEach(Xe=>fn(Xe.key));ue.signal.addEventListener("abort",Hn);let{loaderResults:gi,fetcherResults:Qs}=await St(k.matches,vr,_r,Xt,dt);if(ue.signal.aborted)return;ue.signal.removeEventListener("abort",Hn),te.delete(x),ge.delete(x),Xt.forEach(Xe=>ge.delete(Xe.key));let Ie=yv([...gi,...Qs]);if(Ie){if(Ie.idx>=_r.length){let Xe=Xt[Ie.idx-_r.length].key;ye.add(Xe)}return Bn(dt,Ie.result)}let{loaderData:it,errors:Jt}=fv(k,k.matches,_r,gi,void 0,Xt,Qs,$e);if(k.fetchers.has(x)){let Xe=Ti(Le.data);k.fetchers.set(x,Xe)}H(rr),k.navigation.state==="loading"&&rr>re?(Re(S,"Expected pending action"),w&&w.abort(),nt(k.navigation.location,{matches:vr,loaderData:it,errors:Jt,fetchers:new Map(k.fetchers)})):(He({errors:Jt,loaderData:pv(k.loaderData,it,vr,Jt),fetchers:new Map(k.fetchers)}),oe=!1)}async function ss(x,L,z,q,ee,ae,fe,J){let Te=k.fetchers.get(x);dn(x,Sa(J,Te?Te.data:void 0),{flushSync:fe});let le=new AbortController,ue=eo(t.history,z,le.signal);if(ae){let Le=await rt(ee,z,ue.signal);if(Le.type==="aborted")return;if(Le.type==="error"){let{error:It}=ce(z,Le);hn(x,L,It,{flushSync:fe});return}else if(Le.matches)ee=Le.matches,q=ba(ee,z);else{hn(x,L,pn(404,{pathname:z}),{flushSync:fe});return}}ge.set(x,le);let Ae=X,Ke=(await nr("loader",ue,[q],ee))[0];if(gs(Ke)&&(Ke=await RE(Ke,ue.signal,!0)||Ke),ge.get(x)===le&&ge.delete(x),!ue.signal.aborted){if(Ce.has(x)){dn(x,Ti(void 0));return}if(ys(Ke))if(re>Ae){dn(x,Ti(void 0));return}else{ye.add(x),await Bn(ue,Ke);return}if(xn(Ke)){hn(x,L,Ke.error);return}Re(!gs(Ke),"Unhandled fetcher deferred data"),dn(x,Ti(Ke.data))}}async function Bn(x,L,z){let{submission:q,fetcherSubmission:ee,replace:ae}=z===void 0?{}:z;L.response.headers.has("X-Remix-Revalidate")&&(oe=!0);let fe=L.response.headers.get("Location");Re(fe,"Expected a Location header on the redirect Response"),fe=dv(fe,new URL(x.url),u);let J=yl(k.location,fe,{_isRedirect:!0});if(n){let Ke=!1;if(L.response.headers.has("X-Remix-Reload-Document"))Ke=!0;else if(Em.test(fe)){const Le=t.history.createURL(fe);Ke=Le.origin!==e.location.origin||Jo(Le.pathname,u)==null}if(Ke){ae?e.location.replace(fe):e.location.assign(fe);return}}w=null;let Te=ae===!0?Rt.Replace:Rt.Push,{formMethod:le,formAction:ue,formEncType:Ae}=k.navigation;!q&&!ee&&le&&ue&&Ae&&(q=_v(k.navigation));let Ue=q||ee;if(sR.has(L.response.status)&&Ue&&lr(Ue.formMethod))await zn(Te,J,{submission:ht({},Ue,{formAction:fe}),preventScrollReset:g});else{let Ke=Rh(J,q);await zn(Te,J,{overrideNavigation:Ke,fetcherSubmission:ee,preventScrollReset:g})}}async function nr(x,L,z,q){try{let ee=await pR(c,x,L,z,q,s,i);return await Promise.all(ee.map((ae,fe)=>{if(ER(ae)){let J=ae.result;return{type:Ze.redirect,response:yR(J,L,z[fe].route.id,q,u,f.v7_relativeSplatPath)}}return gR(ae)}))}catch(ee){return z.map(()=>({type:Ze.error,error:ee}))}}async function St(x,L,z,q,ee){let[ae,...fe]=await Promise.all([z.length?nr("loader",ee,z,L):[],...q.map(J=>{if(J.matches&&J.match&&J.controller){let Te=eo(t.history,J.path,J.controller.signal);return nr("loader",Te,[J.match],J.matches).then(le=>le[0])}else return Promise.resolve({type:Ze.error,error:pn(404,{pathname:J.path})})})]);return await Promise.all([vv(x,z,ae,ae.map(()=>ee.signal),!1,k.loaderData),vv(x,q.map(J=>J.match),fe,q.map(J=>J.controller?J.controller.signal:null),!0)]),{loaderResults:ae,fetcherResults:fe}}function lt(){oe=!0,Fe.push(...se()),ve.forEach((x,L)=>{ge.has(L)&&(Be.push(L),fn(L))})}function dn(x,L,z){z===void 0&&(z={}),k.fetchers.set(x,L),He({fetchers:new Map(k.fetchers)},{flushSync:(z&&z.flushSync)===!0})}function hn(x,L,z,q){q===void 0&&(q={});let ee=vo(k.matches,L);Lr(x),He({errors:{[ee.route.id]:z},fetchers:new Map(k.fetchers)},{flushSync:(q&&q.flushSync)===!0})}function os(x){return f.v7_fetcherPersist&&(_e.set(x,(_e.get(x)||0)+1),Ce.has(x)&&Ce.delete(x)),k.fetchers.get(x)||oR}function Lr(x){let L=k.fetchers.get(x);ge.has(x)&&!(L&&L.state==="loading"&&te.has(x))&&fn(x),ve.delete(x),te.delete(x),ye.delete(x),Ce.delete(x),k.fetchers.delete(x)}function $n(x){if(f.v7_fetcherPersist){let L=(_e.get(x)||0)-1;L<=0?(_e.delete(x),Ce.add(x)):_e.set(x,L)}else Lr(x);He({fetchers:new Map(k.fetchers)})}function fn(x){let L=ge.get(x);Re(L,"Expected fetch controller: "+x),L.abort(),ge.delete(x)}function Mr(x){for(let L of x){let z=os(L),q=Ti(z.data);k.fetchers.set(L,q)}}function pi(){let x=[],L=!1;for(let z of ye){let q=k.fetchers.get(z);Re(q,"Expected fetcher: "+z),q.state==="loading"&&(ye.delete(z),x.push(z),L=!0)}return Mr(x),L}function H(x){let L=[];for(let[z,q]of te)if(q<x){let ee=k.fetchers.get(z);Re(ee,"Expected fetcher: "+z),ee.state==="loading"&&(fn(z),te.delete(z),L.push(z))}return Mr(L),L.length>0}function D(x,L){let z=k.blockers.get(x)||Ta;return ct.get(x)!==L&&ct.set(x,L),z}function B(x){k.blockers.delete(x),ct.delete(x)}function K(x,L){let z=k.blockers.get(x)||Ta;Re(z.state==="unblocked"&&L.state==="blocked"||z.state==="blocked"&&L.state==="blocked"||z.state==="blocked"&&L.state==="proceeding"||z.state==="blocked"&&L.state==="unblocked"||z.state==="proceeding"&&L.state==="unblocked","Invalid blocker state transition: "+z.state+" -> "+L.state);let q=new Map(k.blockers);q.set(x,L),He({blockers:q})}function U(x){let{currentLocation:L,nextLocation:z,historyAction:q}=x;if(ct.size===0)return;ct.size>1&&Rs(!1,"A router only supports one blocker at a time");let ee=Array.from(ct.entries()),[ae,fe]=ee[ee.length-1],J=k.blockers.get(ae);if(!(J&&J.state==="proceeding")&&fe({currentLocation:L,nextLocation:z,historyAction:q}))return ae}function W(x){let L=pn(404,{pathname:x}),z=a||o,{matches:q,route:ee}=gv(z);return se(),{notFoundMatches:q,route:ee,error:L}}function ce(x,L){return{boundaryId:vo(L.partialMatches).route.id,error:pn(400,{type:"route-discovery",pathname:x,message:L.error!=null&&"message"in L.error?L.error:String(L.error)})}}function se(x){let L=[];return $e.forEach((z,q)=>{(!x||x(q))&&(z.cancel(),L.push(q),$e.delete(q))}),L}function pe(x,L,z){if(C=x,O=L,A=z||null,!P&&k.navigation===Ch){P=!0;let q=Qe(k.location,k.matches);q!=null&&He({restoreScrollPosition:q})}return()=>{C=null,O=null,A=null}}function De(x,L){return A&&A(x,L.map(q=>VC(q,k.loaderData)))||x.key}function qe(x,L){if(C&&O){let z=De(x,L);C[z]=O()}}function Qe(x,L){if(C){let z=De(x,L),q=C[z];if(typeof q=="number")return q}return null}function be(x,L,z){if(d)if(x){let q=x[x.length-1].route;if(q.path&&(q.path==="*"||q.path.endsWith("/*")))return{active:!0,matches:Gu(L,z,u,!0)}}else return{active:!0,matches:Gu(L,z,u,!0)||[]};return{active:!1,matches:null}}async function rt(x,L,z){let q=x,ee=q.length>0?q[q.length-1].route:null;for(;;){let ae=a==null,fe=a||o;try{await hR(d,L,q,fe,s,i,Yt,z)}catch(ue){return{type:"error",error:ue,partialMatches:q}}finally{ae&&(o=[...o])}if(z.aborted)return{type:"aborted"};let J=hs(fe,L,u),Te=!1;if(J){let ue=J[J.length-1].route;if(ue.index)return{type:"success",matches:J};if(ue.path&&ue.path.length>0)if(ue.path==="*")Te=!0;else return{type:"success",matches:J}}let le=Gu(fe,L,u,!0);if(!le||q.map(ue=>ue.route.id).join("-")===le.map(ue=>ue.route.id).join("-"))return{type:"success",matches:Te?J:null};if(q=le,ee=q[q.length-1].route,ee.path==="*")return{type:"success",matches:q}}}function xe(x){s={},a=vl(x,i,void 0,s)}function _t(x,L){let z=a==null;IE(x,L,a||o,s,i),z&&(o=[...o],He({}))}return F={get basename(){return u},get future(){return f},get state(){return k},get routes(){return o},get window(){return e},initialize:tr,subscribe:vt,enableScrollRestoration:pe,navigate:hi,fetch:is,revalidate:rs,createHref:x=>t.history.createHref(x),encodeLocation:x=>t.history.encodeLocation(x),getFetcher:os,deleteFetcher:$n,dispose:_n,getBlocker:D,deleteBlocker:B,patchRoutes:_t,_internalFetchControllers:ge,_internalActiveDeferreds:$e,_internalSetRoutes:xe},F}function uR(t){return t!=null&&("formData"in t&&t.formData!=null||"body"in t&&t.body!==void 0)}function Bf(t,e,n,r,i,s,o,a){let u,c;if(o){u=[];for(let f of e)if(u.push(f),f.route.id===o){c=f;break}}else u=e,c=e[e.length-1];let d=_m(i||".",vm(u,s),Jo(t.pathname,n)||t.pathname,a==="path");return i==null&&(d.search=t.search,d.hash=t.hash),(i==null||i===""||i===".")&&c&&c.route.index&&!Tm(d.search)&&(d.search=d.search?d.search.replace(/^\?/,"?index&"):"?index"),r&&n!=="/"&&(d.pathname=d.pathname==="/"?n:Yr([n,d.pathname])),As(d)}function av(t,e,n,r){if(!r||!uR(r))return{path:n};if(r.formMethod&&!SR(r.formMethod))return{path:n,error:pn(405,{method:r.formMethod})};let i=()=>({path:n,error:pn(400,{type:"invalid-body"})}),s=r.formMethod||"get",o=t?s.toUpperCase():s.toLowerCase(),a=PE(n);if(r.body!==void 0){if(r.formEncType==="text/plain"){if(!lr(o))return i();let m=typeof r.body=="string"?r.body:r.body instanceof FormData||r.body instanceof URLSearchParams?Array.from(r.body.entries()).reduce((E,C)=>{let[A,O]=C;return""+E+A+"="+O+`
`},""):String(r.body);return{path:n,submission:{formMethod:o,formAction:a,formEncType:r.formEncType,formData:void 0,json:void 0,text:m}}}else if(r.formEncType==="application/json"){if(!lr(o))return i();try{let m=typeof r.body=="string"?JSON.parse(r.body):r.body;return{path:n,submission:{formMethod:o,formAction:a,formEncType:r.formEncType,formData:void 0,json:m,text:void 0}}}catch{return i()}}}Re(typeof FormData=="function","FormData is not available in this environment");let u,c;if(r.formData)u=$f(r.formData),c=r.formData;else if(r.body instanceof FormData)u=$f(r.body),c=r.body;else if(r.body instanceof URLSearchParams)u=r.body,c=hv(u);else if(r.body==null)u=new URLSearchParams,c=new FormData;else try{u=new URLSearchParams(r.body),c=hv(u)}catch{return i()}let d={formMethod:o,formAction:a,formEncType:r&&r.formEncType||"application/x-www-form-urlencoded",formData:c,json:void 0,text:void 0};if(lr(d.formMethod))return{path:n,submission:d};let f=oi(n);return e&&f.search&&Tm(f.search)&&u.append("index",""),f.search="?"+u,{path:As(f),submission:d}}function cR(t,e){let n=t;if(e){let r=t.findIndex(i=>i.route.id===e);r>=0&&(n=t.slice(0,r))}return n}function lv(t,e,n,r,i,s,o,a,u,c,d,f,m,E,C,A){let O=A?xn(A[1])?A[1].error:A[1].data:void 0,P=t.createURL(e.location),v=t.createURL(i),I=A&&xn(A[1])?A[0]:void 0,M=I?cR(n,I):n,F=A?A[1].statusCode:void 0,k=o&&F&&F>=400,S=M.filter((w,T)=>{let{route:b}=w;if(b.lazy)return!0;if(b.loader==null)return!1;if(s)return typeof b.loader!="function"||b.loader.hydrate?!0:e.loaderData[b.id]===void 0&&(!e.errors||e.errors[b.id]===void 0);if(dR(e.loaderData,e.matches[T],w)||u.some(oe=>oe===w.route.id))return!0;let N=e.matches[T],R=w;return uv(w,ht({currentUrl:P,currentParams:N.params,nextUrl:v,nextParams:R.params},r,{actionResult:O,actionStatus:F,defaultShouldRevalidate:k?!1:a||P.pathname+P.search===v.pathname+v.search||P.search!==v.search||SE(N,R)}))}),g=[];return f.forEach((w,T)=>{if(s||!n.some(Fe=>Fe.route.id===w.routeId)||d.has(T))return;let b=hs(E,w.path,C);if(!b){g.push({key:T,routeId:w.routeId,path:w.path,matches:null,match:null,controller:null});return}let N=e.fetchers.get(T),R=ba(b,w.path),oe=!1;m.has(T)?oe=!1:c.includes(T)?oe=!0:N&&N.state!=="idle"&&N.data===void 0?oe=a:oe=uv(R,ht({currentUrl:P,currentParams:e.matches[e.matches.length-1].params,nextUrl:v,nextParams:n[n.length-1].params},r,{actionResult:O,actionStatus:F,defaultShouldRevalidate:k?!1:a})),oe&&g.push({key:T,routeId:w.routeId,path:w.path,matches:b,match:R,controller:new AbortController})}),[S,g]}function dR(t,e,n){let r=!e||n.route.id!==e.route.id,i=t[n.route.id]===void 0;return r||i}function SE(t,e){let n=t.route.path;return t.pathname!==e.pathname||n!=null&&n.endsWith("*")&&t.params["*"]!==e.params["*"]}function uv(t,e){if(t.route.shouldRevalidate){let n=t.route.shouldRevalidate(e);if(typeof n=="boolean")return n}return e.defaultShouldRevalidate}async function hR(t,e,n,r,i,s,o,a){let u=[e,...n.map(c=>c.route.id)].join("-");try{let c=o.get(u);c||(c=t({path:e,matches:n,patch:(d,f)=>{a.aborted||IE(d,f,r,i,s)}}),o.set(u,c)),c&&wR(c)&&await c}finally{o.delete(u)}}function IE(t,e,n,r,i){if(t){var s;let o=r[t];Re(o,"No route found to patch children into: routeId = "+t);let a=vl(e,i,[t,"patch",String(((s=o.children)==null?void 0:s.length)||"0")],r);o.children?o.children.push(...a):o.children=a}else{let o=vl(e,i,["patch",String(n.length||"0")],r);n.push(...o)}}async function cv(t,e,n){if(!t.lazy)return;let r=await t.lazy();if(!t.lazy)return;let i=n[t.id];Re(i,"No route found in manifest");let s={};for(let o in r){let u=i[o]!==void 0&&o!=="hasErrorBoundary";Rs(!u,'Route "'+i.id+'" has a static property "'+o+'" defined but its lazy function is also returning a value for this property. '+('The lazy route property "'+o+'" will be ignored.')),!u&&!LC.has(o)&&(s[o]=r[o])}Object.assign(i,s),Object.assign(i,ht({},e(i),{lazy:void 0}))}function fR(t){return Promise.all(t.matches.map(e=>e.resolve()))}async function pR(t,e,n,r,i,s,o,a){let u=r.reduce((f,m)=>f.add(m.route.id),new Set),c=new Set,d=await t({matches:i.map(f=>{let m=u.has(f.route.id);return ht({},f,{shouldLoad:m,resolve:C=>(c.add(f.route.id),m?mR(e,n,f,s,o,C,a):Promise.resolve({type:Ze.data,result:void 0}))})}),request:n,params:i[0].params,context:a});return i.forEach(f=>Re(c.has(f.route.id),'`match.resolve()` was not called for route id "'+f.route.id+'". You must call `match.resolve()` on every match passed to `dataStrategy` to ensure all routes are properly loaded.')),d.filter((f,m)=>u.has(i[m].route.id))}async function mR(t,e,n,r,i,s,o){let a,u,c=d=>{let f,m=new Promise((A,O)=>f=O);u=()=>f(),e.signal.addEventListener("abort",u);let E=A=>typeof d!="function"?Promise.reject(new Error("You cannot call the handler for a route which defines a boolean "+('"'+t+'" [routeId: '+n.route.id+"]"))):d({request:e,params:n.params,context:o},...A!==void 0?[A]:[]),C;return s?C=s(A=>E(A)):C=(async()=>{try{return{type:"data",result:await E()}}catch(A){return{type:"error",result:A}}})(),Promise.race([C,m])};try{let d=n.route[t];if(n.route.lazy)if(d){let f,[m]=await Promise.all([c(d).catch(E=>{f=E}),cv(n.route,i,r)]);if(f!==void 0)throw f;a=m}else if(await cv(n.route,i,r),d=n.route[t],d)a=await c(d);else if(t==="action"){let f=new URL(e.url),m=f.pathname+f.search;throw pn(405,{method:e.method,pathname:m,routeId:n.route.id})}else return{type:Ze.data,result:void 0};else if(d)a=await c(d);else{let f=new URL(e.url),m=f.pathname+f.search;throw pn(404,{pathname:m})}Re(a.result!==void 0,"You defined "+(t==="action"?"an action":"a loader")+" for route "+('"'+n.route.id+"\" but didn't return anything from your `"+t+"` ")+"function. Please return a value or `null`.")}catch(d){return{type:Ze.error,result:d}}finally{u&&e.signal.removeEventListener("abort",u)}return a}async function gR(t){let{result:e,type:n,status:r}=t;if(CE(e)){let o;try{let a=e.headers.get("Content-Type");a&&/\bapplication\/json\b/.test(a)?e.body==null?o=null:o=await e.json():o=await e.text()}catch(a){return{type:Ze.error,error:a}}return n===Ze.error?{type:Ze.error,error:new wm(e.status,e.statusText,o),statusCode:e.status,headers:e.headers}:{type:Ze.data,data:o,statusCode:e.status,headers:e.headers}}if(n===Ze.error)return{type:Ze.error,error:e,statusCode:yd(e)?e.status:r};if(TR(e)){var i,s;return{type:Ze.deferred,deferredData:e,statusCode:(i=e.init)==null?void 0:i.status,headers:((s=e.init)==null?void 0:s.headers)&&new Headers(e.init.headers)}}return{type:Ze.data,data:e,statusCode:r}}function yR(t,e,n,r,i,s){let o=t.headers.get("Location");if(Re(o,"Redirects returned/thrown from loaders/actions must have a Location header"),!Em.test(o)){let a=r.slice(0,r.findIndex(u=>u.route.id===n)+1);o=Bf(new URL(e.url),a,i,!0,o,s),t.headers.set("Location",o)}return t}function dv(t,e,n){if(Em.test(t)){let r=t,i=r.startsWith("//")?new URL(e.protocol+r):new URL(r),s=Jo(i.pathname,n)!=null;if(i.origin===e.origin&&s)return i.pathname+i.search+i.hash}return t}function eo(t,e,n,r){let i=t.createURL(PE(e)).toString(),s={signal:n};if(r&&lr(r.formMethod)){let{formMethod:o,formEncType:a}=r;s.method=o.toUpperCase(),a==="application/json"?(s.headers=new Headers({"Content-Type":a}),s.body=JSON.stringify(r.json)):a==="text/plain"?s.body=r.text:a==="application/x-www-form-urlencoded"&&r.formData?s.body=$f(r.formData):s.body=r.formData}return new Request(i,s)}function $f(t){let e=new URLSearchParams;for(let[n,r]of t.entries())e.append(n,typeof r=="string"?r:r.name);return e}function hv(t){let e=new FormData;for(let[n,r]of t.entries())e.append(n,r);return e}function vR(t,e,n,r,i,s){let o={},a=null,u,c=!1,d={},f=r&&xn(r[1])?r[1].error:void 0;return n.forEach((m,E)=>{let C=e[E].route.id;if(Re(!ys(m),"Cannot handle redirect results in processLoaderData"),xn(m)){let A=m.error;f!==void 0&&(A=f,f=void 0),a=a||{};{let O=vo(t,C);a[O.route.id]==null&&(a[O.route.id]=A)}o[C]=void 0,c||(c=!0,u=yd(m.error)?m.error.status:500),m.headers&&(d[C]=m.headers)}else gs(m)?(i.set(C,m.deferredData),o[C]=m.deferredData.data,m.statusCode!=null&&m.statusCode!==200&&!c&&(u=m.statusCode),m.headers&&(d[C]=m.headers)):(o[C]=m.data,m.statusCode&&m.statusCode!==200&&!c&&(u=m.statusCode),m.headers&&(d[C]=m.headers))}),f!==void 0&&r&&(a={[r[0]]:f},o[r[0]]=void 0),{loaderData:o,errors:a,statusCode:u||200,loaderHeaders:d}}function fv(t,e,n,r,i,s,o,a){let{loaderData:u,errors:c}=vR(e,n,r,i,a);for(let d=0;d<s.length;d++){let{key:f,match:m,controller:E}=s[d];Re(o!==void 0&&o[d]!==void 0,"Did not find corresponding fetcher result");let C=o[d];if(!(E&&E.signal.aborted))if(xn(C)){let A=vo(t.matches,m==null?void 0:m.route.id);c&&c[A.route.id]||(c=ht({},c,{[A.route.id]:C.error})),t.fetchers.delete(f)}else if(ys(C))Re(!1,"Unhandled fetcher revalidation redirect");else if(gs(C))Re(!1,"Unhandled fetcher deferred data");else{let A=Ti(C.data);t.fetchers.set(f,A)}}return{loaderData:u,errors:c}}function pv(t,e,n,r){let i=ht({},e);for(let s of n){let o=s.route.id;if(e.hasOwnProperty(o)?e[o]!==void 0&&(i[o]=e[o]):t[o]!==void 0&&s.route.loader&&(i[o]=t[o]),r&&r.hasOwnProperty(o))break}return i}function mv(t){return t?xn(t[1])?{actionData:{}}:{actionData:{[t[0]]:t[1].data}}:{}}function vo(t,e){return(e?t.slice(0,t.findIndex(r=>r.route.id===e)+1):[...t]).reverse().find(r=>r.route.hasErrorBoundary===!0)||t[0]}function gv(t){let e=t.length===1?t[0]:t.find(n=>n.index||!n.path||n.path==="/")||{id:"__shim-error-route__"};return{matches:[{params:{},pathname:"",pathnameBase:"",route:e}],route:e}}function pn(t,e){let{pathname:n,routeId:r,method:i,type:s,message:o}=e===void 0?{}:e,a="Unknown Server Error",u="Unknown @remix-run/router error";return t===400?(a="Bad Request",s==="route-discovery"?u='Unable to match URL "'+n+'" - the `unstable_patchRoutesOnMiss()` '+(`function threw the following error:
`+o):i&&n&&r?u="You made a "+i+' request to "'+n+'" but '+('did not provide a `loader` for route "'+r+'", ')+"so there is no way to handle the request.":s==="defer-action"?u="defer() is not supported in actions":s==="invalid-body"&&(u="Unable to encode submission body")):t===403?(a="Forbidden",u='Route "'+r+'" does not match URL "'+n+'"'):t===404?(a="Not Found",u='No route matches URL "'+n+'"'):t===405&&(a="Method Not Allowed",i&&n&&r?u="You made a "+i.toUpperCase()+' request to "'+n+'" but '+('did not provide an `action` for route "'+r+'", ')+"so there is no way to handle the request.":i&&(u='Invalid request method "'+i.toUpperCase()+'"')),new wm(t||500,a,new Error(u),!0)}function yv(t){for(let e=t.length-1;e>=0;e--){let n=t[e];if(ys(n))return{result:n,idx:e}}}function PE(t){let e=typeof t=="string"?oi(t):t;return As(ht({},e,{hash:""}))}function _R(t,e){return t.pathname!==e.pathname||t.search!==e.search?!1:t.hash===""?e.hash!=="":t.hash===e.hash?!0:e.hash!==""}function wR(t){return typeof t=="object"&&t!=null&&"then"in t}function ER(t){return CE(t.result)&&iR.has(t.result.status)}function gs(t){return t.type===Ze.deferred}function xn(t){return t.type===Ze.error}function ys(t){return(t&&t.type)===Ze.redirect}function TR(t){let e=t;return e&&typeof e=="object"&&typeof e.data=="object"&&typeof e.subscribe=="function"&&typeof e.cancel=="function"&&typeof e.resolveData=="function"}function CE(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.headers=="object"&&typeof t.body<"u"}function SR(t){return rR.has(t.toLowerCase())}function lr(t){return tR.has(t.toLowerCase())}async function vv(t,e,n,r,i,s){for(let o=0;o<n.length;o++){let a=n[o],u=e[o];if(!u)continue;let c=t.find(f=>f.route.id===u.route.id),d=c!=null&&!SE(c,u)&&(s&&s[u.route.id])!==void 0;if(gs(a)&&(i||d)){let f=r[o];Re(f,"Expected an AbortSignal for revalidating fetcher deferred result"),await RE(a,f,i).then(m=>{m&&(n[o]=m||n[o])})}}}async function RE(t,e,n){if(n===void 0&&(n=!1),!await t.deferredData.resolveData(e)){if(n)try{return{type:Ze.data,data:t.deferredData.unwrappedData}}catch(i){return{type:Ze.error,error:i}}return{type:Ze.data,data:t.deferredData.data}}}function Tm(t){return new URLSearchParams(t).getAll("index").some(e=>e==="")}function ba(t,e){let n=typeof e=="string"?oi(e).search:e.search;if(t[t.length-1].route.index&&Tm(n||""))return t[t.length-1];let r=wE(t);return r[r.length-1]}function _v(t){let{formMethod:e,formAction:n,formEncType:r,text:i,formData:s,json:o}=t;if(!(!e||!n||!r)){if(i!=null)return{formMethod:e,formAction:n,formEncType:r,formData:void 0,json:void 0,text:i};if(s!=null)return{formMethod:e,formAction:n,formEncType:r,formData:s,json:void 0,text:void 0};if(o!==void 0)return{formMethod:e,formAction:n,formEncType:r,formData:void 0,json:o,text:void 0}}}function Rh(t,e){return e?{state:"loading",location:t,formMethod:e.formMethod,formAction:e.formAction,formEncType:e.formEncType,formData:e.formData,json:e.json,text:e.text}:{state:"loading",location:t,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0}}function IR(t,e){return{state:"submitting",location:t,formMethod:e.formMethod,formAction:e.formAction,formEncType:e.formEncType,formData:e.formData,json:e.json,text:e.text}}function Sa(t,e){return t?{state:"loading",formMethod:t.formMethod,formAction:t.formAction,formEncType:t.formEncType,formData:t.formData,json:t.json,text:t.text,data:e}:{state:"loading",formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0,data:e}}function PR(t,e){return{state:"submitting",formMethod:t.formMethod,formAction:t.formAction,formEncType:t.formEncType,formData:t.formData,json:t.json,text:t.text,data:e?e.data:void 0}}function Ti(t){return{state:"idle",formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0,data:t}}function CR(t,e){try{let n=t.sessionStorage.getItem(TE);if(n){let r=JSON.parse(n);for(let[i,s]of Object.entries(r||{}))s&&Array.isArray(s)&&e.set(i,new Set(s||[]))}}catch{}}function RR(t,e){if(e.size>0){let n={};for(let[r,i]of e)n[r]=[...i];try{t.sessionStorage.setItem(TE,JSON.stringify(n))}catch(r){Rs(!1,"Failed to save applied view transitions in sessionStorage ("+r+").")}}}/**
 * React Router v6.25.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Rc(){return Rc=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Rc.apply(this,arguments)}const vd=V.createContext(null),AE=V.createContext(null),$s=V.createContext(null),Sm=V.createContext(null),ai=V.createContext({outlet:null,matches:[],isDataRoute:!1}),kE=V.createContext(null);function AR(t,e){let{relative:n}=e===void 0?{}:e;Vl()||Re(!1);let{basename:r,navigator:i}=V.useContext($s),{hash:s,pathname:o,search:a}=xE(t,{relative:n}),u=o;return r!=="/"&&(u=o==="/"?r:Yr([r,o])),i.createHref({pathname:u,search:a,hash:s})}function Vl(){return V.useContext(Sm)!=null}function Cn(){return Vl()||Re(!1),V.useContext(Sm).location}function bE(t){V.useContext($s).static||V.useLayoutEffect(t)}function Qt(){let{isDataRoute:t}=V.useContext(ai);return t?BR():kR()}function kR(){Vl()||Re(!1);let t=V.useContext(vd),{basename:e,future:n,navigator:r}=V.useContext($s),{matches:i}=V.useContext(ai),{pathname:s}=Cn(),o=JSON.stringify(vm(i,n.v7_relativeSplatPath)),a=V.useRef(!1);return bE(()=>{a.current=!0}),V.useCallback(function(c,d){if(d===void 0&&(d={}),!a.current)return;if(typeof c=="number"){r.go(c);return}let f=_m(c,JSON.parse(o),s,d.relative==="path");t==null&&e!=="/"&&(f.pathname=f.pathname==="/"?e:Yr([e,f.pathname])),(d.replace?r.replace:r.push)(f,d.state,d)},[e,r,o,s,t])}const bR=V.createContext(null);function xR(t){let e=V.useContext(ai).outlet;return e&&V.createElement(bR.Provider,{value:t},e)}function NR(){let{matches:t}=V.useContext(ai),e=t[t.length-1];return e?e.params:{}}function xE(t,e){let{relative:n}=e===void 0?{}:e,{future:r}=V.useContext($s),{matches:i}=V.useContext(ai),{pathname:s}=Cn(),o=JSON.stringify(vm(i,r.v7_relativeSplatPath));return V.useMemo(()=>_m(t,JSON.parse(o),s,n==="path"),[t,o,s,n])}function OR(t,e,n,r){Vl()||Re(!1);let{navigator:i}=V.useContext($s),{matches:s}=V.useContext(ai),o=s[s.length-1],a=o?o.params:{};o&&o.pathname;let u=o?o.pathnameBase:"/";o&&o.route;let c=Cn(),d;d=c;let f=d.pathname||"/",m=f;if(u!=="/"){let A=u.replace(/^\//,"").split("/");m="/"+f.replace(/^\//,"").split("/").slice(A.length).join("/")}let E=hs(t,{pathname:m});return jR(E&&E.map(A=>Object.assign({},A,{params:Object.assign({},a,A.params),pathname:Yr([u,i.encodeLocation?i.encodeLocation(A.pathname).pathname:A.pathname]),pathnameBase:A.pathnameBase==="/"?u:Yr([u,i.encodeLocation?i.encodeLocation(A.pathnameBase).pathname:A.pathnameBase])})),s,n,r)}function DR(){let t=DE(),e=yd(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,i={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return V.createElement(V.Fragment,null,V.createElement("h2",null,"Unexpected Application Error!"),V.createElement("h3",{style:{fontStyle:"italic"}},e),n?V.createElement("pre",{style:i},n):null,null)}const LR=V.createElement(DR,null);class MR extends V.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location||n.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:n.error,location:n.location,revalidation:e.revalidation||n.revalidation}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error!==void 0?V.createElement(ai.Provider,{value:this.props.routeContext},V.createElement(kE.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function VR(t){let{routeContext:e,match:n,children:r}=t,i=V.useContext(vd);return i&&i.static&&i.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=n.route.id),V.createElement(ai.Provider,{value:e},r)}function jR(t,e,n,r){var i;if(e===void 0&&(e=[]),n===void 0&&(n=null),r===void 0&&(r=null),t==null){var s;if((s=n)!=null&&s.errors)t=n.matches;else return null}let o=t,a=(i=n)==null?void 0:i.errors;if(a!=null){let d=o.findIndex(f=>f.route.id&&(a==null?void 0:a[f.route.id])!==void 0);d>=0||Re(!1),o=o.slice(0,Math.min(o.length,d+1))}let u=!1,c=-1;if(n&&r&&r.v7_partialHydration)for(let d=0;d<o.length;d++){let f=o[d];if((f.route.HydrateFallback||f.route.hydrateFallbackElement)&&(c=d),f.route.id){let{loaderData:m,errors:E}=n,C=f.route.loader&&m[f.route.id]===void 0&&(!E||E[f.route.id]===void 0);if(f.route.lazy||C){u=!0,c>=0?o=o.slice(0,c+1):o=[o[0]];break}}}return o.reduceRight((d,f,m)=>{let E,C=!1,A=null,O=null;n&&(E=a&&f.route.id?a[f.route.id]:void 0,A=f.route.errorElement||LR,u&&(c<0&&m===0?(C=!0,O=null):c===m&&(C=!0,O=f.route.hydrateFallbackElement||null)));let P=e.concat(o.slice(0,m+1)),v=()=>{let I;return E?I=A:C?I=O:f.route.Component?I=V.createElement(f.route.Component,null):f.route.element?I=f.route.element:I=d,V.createElement(VR,{match:f,routeContext:{outlet:d,matches:P,isDataRoute:n!=null},children:I})};return n&&(f.route.ErrorBoundary||f.route.errorElement||m===0)?V.createElement(MR,{location:n.location,revalidation:n.revalidation,component:A,error:E,children:v(),routeContext:{outlet:null,matches:P,isDataRoute:!0}}):v()},null)}var NE=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(NE||{}),Ac=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(Ac||{});function FR(t){let e=V.useContext(vd);return e||Re(!1),e}function UR(t){let e=V.useContext(AE);return e||Re(!1),e}function zR(t){let e=V.useContext(ai);return e||Re(!1),e}function OE(t){let e=zR(),n=e.matches[e.matches.length-1];return n.route.id||Re(!1),n.route.id}function DE(){var t;let e=V.useContext(kE),n=UR(Ac.UseRouteError),r=OE(Ac.UseRouteError);return e!==void 0?e:(t=n.errors)==null?void 0:t[r]}function BR(){let{router:t}=FR(NE.UseNavigateStable),e=OE(Ac.UseNavigateStable),n=V.useRef(!1);return bE(()=>{n.current=!0}),V.useCallback(function(i,s){s===void 0&&(s={}),n.current&&(typeof i=="number"?t.navigate(i):t.navigate(i,Rc({fromRouteId:e},s)))},[t,e])}function $R(t){return xR(t.context)}function Kn(t){Re(!1)}function HR(t){let{basename:e="/",children:n=null,location:r,navigationType:i=Rt.Pop,navigator:s,static:o=!1,future:a}=t;Vl()&&Re(!1);let u=e.replace(/^\/*/,"/"),c=V.useMemo(()=>({basename:u,navigator:s,static:o,future:Rc({v7_relativeSplatPath:!1},a)}),[u,a,s,o]);typeof r=="string"&&(r=oi(r));let{pathname:d="/",search:f="",hash:m="",state:E=null,key:C="default"}=r,A=V.useMemo(()=>{let O=Jo(d,u);return O==null?null:{location:{pathname:O,search:f,hash:m,state:E,key:C},navigationType:i}},[u,d,f,m,E,C,i]);return A==null?null:V.createElement($s.Provider,{value:c},V.createElement(Sm.Provider,{children:n,value:A}))}new Promise(()=>{});function Hf(t,e){e===void 0&&(e=[]);let n=[];return V.Children.forEach(t,(r,i)=>{if(!V.isValidElement(r))return;let s=[...e,i];if(r.type===V.Fragment){n.push.apply(n,Hf(r.props.children,s));return}r.type!==Kn&&Re(!1),!r.props.index||!r.props.children||Re(!1);let o={id:r.props.id||s.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(o.children=Hf(r.props.children,s)),n.push(o)}),n}function WR(t){let e={hasErrorBoundary:t.ErrorBoundary!=null||t.errorElement!=null};return t.Component&&Object.assign(e,{element:V.createElement(t.Component),Component:void 0}),t.HydrateFallback&&Object.assign(e,{hydrateFallbackElement:V.createElement(t.HydrateFallback),HydrateFallback:void 0}),t.ErrorBoundary&&Object.assign(e,{errorElement:V.createElement(t.ErrorBoundary),ErrorBoundary:void 0}),e}/**
 * React Router DOM v6.25.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function _l(){return _l=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},_l.apply(this,arguments)}function qR(t,e){if(t==null)return{};var n={},r=Object.keys(t),i,s;for(s=0;s<r.length;s++)i=r[s],!(e.indexOf(i)>=0)&&(n[i]=t[i]);return n}function KR(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function GR(t,e){return t.button===0&&(!e||e==="_self")&&!KR(t)}const QR=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","unstable_viewTransition"],YR="6";try{window.__reactRouterVersion=YR}catch{}function XR(t,e){return lR({basename:void 0,future:_l({},void 0,{v7_prependBasename:!0}),history:NC({window:void 0}),hydrationData:JR(),routes:t,mapRouteProperties:WR,unstable_dataStrategy:void 0,unstable_patchRoutesOnMiss:void 0,window:void 0}).initialize()}function JR(){var t;let e=(t=window)==null?void 0:t.__staticRouterHydrationData;return e&&e.errors&&(e=_l({},e,{errors:ZR(e.errors)})),e}function ZR(t){if(!t)return null;let e=Object.entries(t),n={};for(let[r,i]of e)if(i&&i.__type==="RouteErrorResponse")n[r]=new wm(i.status,i.statusText,i.data,i.internal===!0);else if(i&&i.__type==="Error"){if(i.__subType){let s=window[i.__subType];if(typeof s=="function")try{let o=new s(i.message);o.stack="",n[r]=o}catch{}}if(n[r]==null){let s=new Error(i.message);s.stack="",n[r]=s}}else n[r]=i;return n}const eA=V.createContext({isTransitioning:!1}),tA=V.createContext(new Map),nA="startTransition",wv=Kh[nA],rA="flushSync",Ev=xC[rA];function iA(t){wv?wv(t):t()}function Ia(t){Ev?Ev(t):t()}let sA=class{constructor(){this.status="pending",this.promise=new Promise((e,n)=>{this.resolve=r=>{this.status==="pending"&&(this.status="resolved",e(r))},this.reject=r=>{this.status==="pending"&&(this.status="rejected",n(r))}})}};function oA(t){let{fallbackElement:e,router:n,future:r}=t,[i,s]=V.useState(n.state),[o,a]=V.useState(),[u,c]=V.useState({isTransitioning:!1}),[d,f]=V.useState(),[m,E]=V.useState(),[C,A]=V.useState(),O=V.useRef(new Map),{v7_startTransition:P}=r||{},v=V.useCallback(g=>{P?iA(g):g()},[P]),I=V.useCallback((g,w)=>{let{deletedFetchers:T,unstable_flushSync:b,unstable_viewTransitionOpts:N}=w;T.forEach(oe=>O.current.delete(oe)),g.fetchers.forEach((oe,Fe)=>{oe.data!==void 0&&O.current.set(Fe,oe.data)});let R=n.window==null||n.window.document==null||typeof n.window.document.startViewTransition!="function";if(!N||R){b?Ia(()=>s(g)):v(()=>s(g));return}if(b){Ia(()=>{m&&(d&&d.resolve(),m.skipTransition()),c({isTransitioning:!0,flushSync:!0,currentLocation:N.currentLocation,nextLocation:N.nextLocation})});let oe=n.window.document.startViewTransition(()=>{Ia(()=>s(g))});oe.finished.finally(()=>{Ia(()=>{f(void 0),E(void 0),a(void 0),c({isTransitioning:!1})})}),Ia(()=>E(oe));return}m?(d&&d.resolve(),m.skipTransition(),A({state:g,currentLocation:N.currentLocation,nextLocation:N.nextLocation})):(a(g),c({isTransitioning:!0,flushSync:!1,currentLocation:N.currentLocation,nextLocation:N.nextLocation}))},[n.window,m,d,O,v]);V.useLayoutEffect(()=>n.subscribe(I),[n,I]),V.useEffect(()=>{u.isTransitioning&&!u.flushSync&&f(new sA)},[u]),V.useEffect(()=>{if(d&&o&&n.window){let g=o,w=d.promise,T=n.window.document.startViewTransition(async()=>{v(()=>s(g)),await w});T.finished.finally(()=>{f(void 0),E(void 0),a(void 0),c({isTransitioning:!1})}),E(T)}},[v,o,d,n.window]),V.useEffect(()=>{d&&o&&i.location.key===o.location.key&&d.resolve()},[d,m,i.location,o]),V.useEffect(()=>{!u.isTransitioning&&C&&(a(C.state),c({isTransitioning:!0,flushSync:!1,currentLocation:C.currentLocation,nextLocation:C.nextLocation}),A(void 0))},[u.isTransitioning,C]),V.useEffect(()=>{},[]);let M=V.useMemo(()=>({createHref:n.createHref,encodeLocation:n.encodeLocation,go:g=>n.navigate(g),push:(g,w,T)=>n.navigate(g,{state:w,preventScrollReset:T==null?void 0:T.preventScrollReset}),replace:(g,w,T)=>n.navigate(g,{replace:!0,state:w,preventScrollReset:T==null?void 0:T.preventScrollReset})}),[n]),F=n.basename||"/",k=V.useMemo(()=>({router:n,navigator:M,static:!1,basename:F}),[n,M,F]),S=V.useMemo(()=>({v7_relativeSplatPath:n.future.v7_relativeSplatPath}),[n.future.v7_relativeSplatPath]);return V.createElement(V.Fragment,null,V.createElement(vd.Provider,{value:k},V.createElement(AE.Provider,{value:i},V.createElement(tA.Provider,{value:O.current},V.createElement(eA.Provider,{value:u},V.createElement(HR,{basename:F,location:i.location,navigationType:i.historyAction,navigator:M,future:S},i.initialized||n.future.v7_partialHydration?V.createElement(aA,{routes:n.routes,future:n.future,state:i}):e))))),null)}const aA=V.memo(lA);function lA(t){let{routes:e,future:n,state:r}=t;return OR(e,void 0,r,n)}const uA=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",cA=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,dA=V.forwardRef(function(e,n){let{onClick:r,relative:i,reloadDocument:s,replace:o,state:a,target:u,to:c,preventScrollReset:d,unstable_viewTransition:f}=e,m=qR(e,QR),{basename:E}=V.useContext($s),C,A=!1;if(typeof c=="string"&&cA.test(c)&&(C=c,uA))try{let I=new URL(window.location.href),M=c.startsWith("//")?new URL(I.protocol+c):new URL(c),F=Jo(M.pathname,E);M.origin===I.origin&&F!=null?c=F+M.search+M.hash:A=!0}catch{}let O=AR(c,{relative:i}),P=hA(c,{replace:o,state:a,target:u,preventScrollReset:d,relative:i,unstable_viewTransition:f});function v(I){r&&r(I),I.defaultPrevented||P(I)}return V.createElement("a",_l({},m,{href:C||O,onClick:A||s?r:v,ref:n,target:u}))});var Tv;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(Tv||(Tv={}));var Sv;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(Sv||(Sv={}));function hA(t,e){let{target:n,replace:r,state:i,preventScrollReset:s,relative:o,unstable_viewTransition:a}=e===void 0?{}:e,u=Qt(),c=Cn(),d=xE(t,{relative:o});return V.useCallback(f=>{if(GR(f,n)){f.preventDefault();let m=r!==void 0?r:As(c)===As(d);u(t,{replace:m,state:i,preventScrollReset:s,relative:o,unstable_viewTransition:a})}},[c,u,d,r,i,n,t,s,o,a])}const fA="_mainNav_kenh5_1",Iv={mainNav:fA};var LE={exports:{}},pA="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",mA=pA,gA=mA;function ME(){}function VE(){}VE.resetWarningCache=ME;var yA=function(){function t(r,i,s,o,a,u){if(u!==gA){var c=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw c.name="Invariant Violation",c}}t.isRequired=t;function e(){return t}var n={array:t,bigint:t,bool:t,func:t,number:t,object:t,string:t,symbol:t,any:t,arrayOf:e,element:t,elementType:t,instanceOf:e,node:t,objectOf:e,oneOf:e,oneOfType:e,shape:e,exact:e,checkPropTypes:VE,resetWarningCache:ME};return n.PropTypes=n,n};LE.exports=yA();var vA=LE.exports;const we=Tp(vA),gt=V.createContext(null);function _A(t,e){switch(e.type){case"SET_BUTTON_TEXT":return{...t,buttonText:{...t.buttonText,[e.payload.id]:e.payload.text}};case"SET_BUTTON_INITIAL_STATE":return{...t,buttonText:jE.buttonText};case"TOGGLE_MOBILE_CATEGORY_MENU":return{...t,openMobileCategoryMenu:e.payload};case"TOGGLE_OVERLAY":return{...t,overlayVisible:e.payload};case"SHOW_MODAL":return{...t,modal:{isVisible:!0,content:e.payload.content,type:e.payload.type},overlayVisible:!0};case"HIDE_MODAL":return{...t,modal:{isVisible:!1,content:null,type:null},overlayVisible:!1};case"UPDATE_CATEGORY":return{...t,selectedCategory:e.payload};case"SEARCH_SUBMITTED":return{...t,search:{...t.search,searchSubmitted:e.payload.searchSubmitted,searchInProgress:e.payload.searchInProgress,searchResults:e.payload.searchResults}};case"UPDATE_ACCOUNT_VIEW_TYPE":return{...t,currentAccountViewType:e.payload};default:return t}}const jE={buttonText:{},overlayVisible:!1,modal:{isVisible:!1,content:null,type:null},selectedCategory:null,search:{searchSubmitted:"",searchInProgress:!1,searchResults:[]},openMobileCategoryMenu:!1,currentAccountViewType:"overview"};function FE({children:t}){const[e,n]=V.useReducer(_A,jE);return V.useEffect(()=>{e.overlayVisible?document.body.classList.add("no-scroll"):document.body.classList.remove("no-scroll")},[e.overlayVisible]),y.jsx(gt.Provider,{value:{state:e,uiDispatch:n},children:t})}FE.propTypes={children:we.object};function je({type:t,action:e,handleAction:n,item:r,text:i,icon:s}){const{state:o}=V.useContext(gt);function a(){return o.overlayVisible&&t==="confirmation"||o.overlayVisible&&t==="closeModal"?"0":!o.openMobileCategoryMenu&&t==="filter"||o.openMobileCategoryMenu&&t!=="filter"?"-1":"0"}return y.jsxs("button",{className:t,onClick:n?()=>n(r,e):null,tabIndex:a(),children:[i&&i,s&&s]})}je.propTypes={text:we.string,type:we.string,action:we.string,handleAction:we.func,item:we.object,icon:we.element};var UE={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},Pv=Gr.createContext&&Gr.createContext(UE),wA=["attr","size","title"];function EA(t,e){if(t==null)return{};var n=TA(t,e),r,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)r=s[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function TA(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function kc(){return kc=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},kc.apply(this,arguments)}function Cv(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function bc(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Cv(Object(n),!0).forEach(function(r){SA(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Cv(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function SA(t,e,n){return e=IA(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function IA(t){var e=PA(t,"string");return typeof e=="symbol"?e:e+""}function PA(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function zE(t){return t&&t.map((e,n)=>Gr.createElement(e.tag,bc({key:n},e.attr),zE(e.child)))}function cn(t){return e=>Gr.createElement(CA,kc({attr:bc({},t.attr)},e),zE(t.child))}function CA(t){var e=n=>{var{attr:r,size:i,title:s}=t,o=EA(t,wA),a=i||n.size||"1em",u;return n.className&&(u=n.className),t.className&&(u=(u?u+" ":"")+t.className),Gr.createElement("svg",kc({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},n.attr,r,o,{className:u,style:bc(bc({color:t.color||n.color},n.style),t.style),height:a,width:a,xmlns:"http://www.w3.org/2000/svg"}),s&&Gr.createElement("title",null,s),t.children)};return Pv!==void 0?Gr.createElement(Pv.Consumer,null,n=>e(n)):e(UE)}function RA(t){return cn({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M504 256C504 119 393 8 256 8S8 119 8 256c0 123.78 90.69 226.38 209.25 245V327.69h-63V256h63v-54.64c0-62.15 37-96.48 93.67-96.48 27.14 0 55.52 4.84 55.52 4.84v61h-31.28c-30.8 0-40.41 19.12-40.41 38.73V256h68.78l-11 71.69h-57.78V501C413.31 482.38 504 379.78 504 256z"},child:[]}]})(t)}function AA(t){return cn({tag:"svg",attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M224.1 141c-63.6 0-114.9 51.3-114.9 114.9s51.3 114.9 114.9 114.9S339 319.5 339 255.9 287.7 141 224.1 141zm0 189.6c-41.1 0-74.7-33.5-74.7-74.7s33.5-74.7 74.7-74.7 74.7 33.5 74.7 74.7-33.6 74.7-74.7 74.7zm146.4-194.3c0 14.9-12 26.8-26.8 26.8-14.9 0-26.8-12-26.8-26.8s12-26.8 26.8-26.8 26.8 12 26.8 26.8zm76.1 27.2c-1.7-35.9-9.9-67.7-36.2-93.9-26.2-26.2-58-34.4-93.9-36.2-37-2.1-147.9-2.1-184.9 0-35.8 1.7-67.6 9.9-93.9 36.1s-34.4 58-36.2 93.9c-2.1 37-2.1 147.9 0 184.9 1.7 35.9 9.9 67.7 36.2 93.9s58 34.4 93.9 36.2c37 2.1 147.9 2.1 184.9 0 35.9-1.7 67.7-9.9 93.9-36.2 26.2-26.2 34.4-58 36.2-93.9 2.1-37 2.1-147.8 0-184.8zM398.8 388c-7.8 19.6-22.9 34.7-42.6 42.6-29.5 11.7-99.5 9-132.1 9s-102.7 2.6-132.1-9c-19.6-7.8-34.7-22.9-42.6-42.6-11.7-29.5-9-99.5-9-132.1s-2.6-102.7 9-132.1c7.8-19.6 22.9-34.7 42.6-42.6 29.5-11.7 99.5-9 132.1-9s102.7-2.6 132.1 9c19.6 7.8 34.7 22.9 42.6 42.6 11.7 29.5 9 99.5 9 132.1s2.7 102.7-9 132.1z"},child:[]}]})(t)}function kA(t){return cn({tag:"svg",attr:{viewBox:"0 0 496 512"},child:[{tag:"path",attr:{d:"M496 256c0 137-111 248-248 248-25.6 0-50.2-3.9-73.4-11.1 10.1-16.5 25.2-43.5 30.8-65 3-11.6 15.4-59 15.4-59 8.1 15.4 31.7 28.5 56.8 28.5 74.8 0 128.7-68.8 128.7-154.3 0-81.9-66.9-143.2-152.9-143.2-107 0-163.9 71.8-163.9 150.1 0 36.4 19.4 81.7 50.3 96.1 4.7 2.2 7.2 1.2 8.3-3.3.8-3.4 5-20.3 6.9-28.1.6-2.5.3-4.7-1.7-7.1-10.1-12.5-18.3-35.3-18.3-56.6 0-54.7 41.4-107.6 112-107.6 60.9 0 103.6 41.5 103.6 100.9 0 67.1-33.9 113.6-78 113.6-24.3 0-42.6-20.1-36.7-44.8 7-29.5 20.5-61.3 20.5-82.6 0-19-10.2-34.9-31.4-34.9-24.9 0-44.9 25.7-44.9 60.2 0 22 7.4 36.8 7.4 36.8s-24.5 103.8-29 123.2c-5 21.4-3 51.6-.9 71.2C65.4 450.9 0 361.1 0 256 0 119 111 8 248 8s248 111 248 248z"},child:[]}]})(t)}function bA(t){return cn({tag:"svg",attr:{viewBox:"0 0 496 512"},child:[{tag:"path",attr:{d:"M248 8C111.1 8 0 119.1 0 256s111.1 248 248 248 248-111.1 248-248S384.9 8 248 8zm100.7 364.9c-4.2 0-6.8-1.3-10.7-3.6-62.4-37.6-135-39.2-206.7-24.5-3.9 1-9 2.6-11.9 2.6-9.7 0-15.8-7.7-15.8-15.8 0-10.3 6.1-15.2 13.6-16.8 81.9-18.1 165.6-16.5 237 26.2 6.1 3.9 9.7 7.4 9.7 16.5s-7.1 15.4-15.2 15.4zm26.9-65.6c-5.2 0-8.7-2.3-12.3-4.2-62.5-37-155.7-51.9-238.6-29.4-4.8 1.3-7.4 2.6-11.9 2.6-10.7 0-19.4-8.7-19.4-19.4s5.2-17.8 15.5-20.7c27.8-7.8 56.2-13.6 97.8-13.6 64.9 0 127.6 16.1 177 45.5 8.1 4.8 11.3 11 11.3 19.7-.1 10.8-8.5 19.5-19.4 19.5zm31-76.2c-5.2 0-8.4-1.3-12.9-3.9-71.2-42.5-198.5-52.7-280.9-29.7-3.6 1-8.1 2.6-12.9 2.6-13.2 0-23.3-10.3-23.3-23.6 0-13.6 8.4-21.3 17.4-23.9 35.2-10.3 74.6-15.2 117.5-15.2 73 0 149.5 15.2 205.4 47.8 7.8 4.5 12.9 10.7 12.9 22.6 0 13.6-11 23.3-23.2 23.3z"},child:[]}]})(t)}function xA(t){return cn({tag:"svg",attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M549.655 124.083c-6.281-23.65-24.787-42.276-48.284-48.597C458.781 64 288 64 288 64S117.22 64 74.629 75.486c-23.497 6.322-42.003 24.947-48.284 48.597-11.412 42.867-11.412 132.305-11.412 132.305s0 89.438 11.412 132.305c6.281 23.65 24.787 41.5 48.284 47.821C117.22 448 288 448 288 448s170.78 0 213.371-11.486c23.497-6.321 42.003-24.171 48.284-47.821 11.412-42.867 11.412-132.305 11.412-132.305s0-89.438-11.412-132.305zm-317.51 213.508V175.185l142.739 81.205-142.739 81.201z"},child:[]}]})(t)}function NA(t){return cn({tag:"svg",attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M34.9 289.5l-22.2-22.2c-9.4-9.4-9.4-24.6 0-33.9L207 39c9.4-9.4 24.6-9.4 33.9 0l194.3 194.3c9.4 9.4 9.4 24.6 0 33.9L413 289.4c-9.5 9.5-25 9.3-34.3-.4L264 168.6V456c0 13.3-10.7 24-24 24h-32c-13.3 0-24-10.7-24-24V168.6L69.2 289.1c-9.3 9.8-24.8 10-34.3.4z"},child:[]}]})(t)}function BE(t){return cn({tag:"svg",attr:{viewBox:"0 0 320 512"},child:[{tag:"path",attr:{d:"M31.3 192h257.3c17.8 0 26.7 21.5 14.1 34.1L174.1 354.8c-7.8 7.8-20.5 7.8-28.3 0L17.2 226.1C4.6 213.5 13.5 192 31.3 192z"},child:[]}]})(t)}function OA(t){return cn({tag:"svg",attr:{viewBox:"0 0 320 512"},child:[{tag:"path",attr:{d:"M288.662 352H31.338c-17.818 0-26.741-21.543-14.142-34.142l128.662-128.662c7.81-7.81 20.474-7.81 28.284 0l128.662 128.662c12.6 12.599 3.676 34.142-14.142 34.142z"},child:[]}]})(t)}function Wf(t){return cn({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M462.3 62.6C407.5 15.9 326 24.3 275.7 76.2L256 96.5l-19.7-20.3C186.1 24.3 104.5 15.9 49.7 62.6c-62.8 53.6-66.1 149.8-9.9 207.9l193.5 199.8c12.5 12.9 32.8 12.9 45.3 0l193.5-199.8c56.3-58.1 53-154.3-9.8-207.9z"},child:[]}]})(t)}function qf(t){return cn({tag:"svg",attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M259.3 17.8L194 150.2 47.9 171.5c-26.2 3.8-36.7 36.1-17.7 54.6l105.7 103-25 145.5c-4.5 26.3 23.2 46 46.4 33.7L288 439.6l130.7 68.7c23.2 12.2 50.9-7.4 46.4-33.7l-25-145.5 105.7-103c19-18.5 8.5-50.8-17.7-54.6L382 150.2 316.7 17.8c-11.7-23.6-45.6-23.9-57.4 0z"},child:[]}]})(t)}function DA(t){return cn({tag:"svg",attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M224 256c70.7 0 128-57.3 128-128S294.7 0 224 0 96 57.3 96 128s57.3 128 128 128zm89.6 32h-16.7c-22.2 10.2-46.9 16-72.9 16s-50.6-5.8-72.9-16h-16.7C60.2 288 0 348.2 0 422.4V464c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48v-41.6c0-74.2-60.2-134.4-134.4-134.4z"},child:[]}]})(t)}function LA(t){return cn({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M372 160v-12A116.13 116.13 0 0 0 258.89 32h-5.78A116.13 116.13 0 0 0 140 148v12H52a4 4 0 0 0-4 4v300a16 16 0 0 0 16 16h384a16 16 0 0 0 16-16V164a4 4 0 0 0-4-4zm-40 0H180v-11c0-41.84 33.41-76.56 75.25-77A76.08 76.08 0 0 1 332 148z"},child:[]}]})(t)}function $E(t){return cn({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{fill:"none",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"32",d:"M368 368 144 144m224 0L144 368"},child:[]}]})(t)}const MA=[{id:1,name:"account",link:"/account",icon:DA},{id:2,name:"favorites",link:"/account",icon:Wf},{id:3,name:"cart",link:"/cart",icon:LA}];function VA(){const t=Qt(),{uiDispatch:e}=V.useContext(gt);function n(r){r.name==="account"?(e({type:"UPDATE_ACCOUNT_VIEW_TYPE",payload:"overview"}),sessionStorage.setItem("currentAccountViewType","overview")):r.name==="favorites"&&(e({type:"UPDATE_ACCOUNT_VIEW_TYPE",payload:"favorites"}),sessionStorage.setItem("currentAccountViewType","favorites")),t(r.link)}return y.jsx("div",{className:Iv.mainNavContainer,children:y.jsx("nav",{children:y.jsx("ul",{className:Iv.mainNav,id:"mainNav",children:MA.map(r=>y.jsx("li",{children:y.jsx(je,{handleAction:()=>n(r),icon:y.jsx(r.icon,{}),type:"mainNav"})},r.id))})})})}const jA="_mainHeader_nmg8c_1",FA="_topRow_nmg8c_8",UA="_bottomRow_nmg8c_31",Ah={mainHeader:jA,topRow:FA,bottomRow:UA},zA=[{id:1,name:"all",filter:null},{id:2,name:"beauty",filter:"beauty"},{id:3,name:"fragrances",filter:"fragrances"},{id:4,name:"furniture",filter:"furniture"},{id:5,name:"groceries",filter:"groceries"}],BA="_mobileNavBtn_1gmn1_1",$A="_hamburger_1gmn1_12",HA="_line_1gmn1_15",WA="_line__top_1gmn1_19",qA="_line__bottom_1gmn1_19",KA="_line__middle_1gmn1_28",wi={mobileNavBtn:BA,hamburger:$A,line:HA,line__top:WA,line__bottom:qA,line__middle:KA};function _d(){const[t,e]=V.useState({width:0,height:0});function n(){e({width:window.innerWidth,height:window.innerHeight})}return V.useLayoutEffect(()=>(n(),window.addEventListener("resize",n),()=>{window.removeEventListener("resize",n)}),[]),t}function HE(){const{state:t,uiDispatch:e}=V.useContext(gt),{width:n}=_d();function r(){n<1024&&!t.modal.isVisible?(e({type:"TOGGLE_MOBILE_CATEGORY_MENU",payload:!t.openMobileCategoryMenu}),e({type:"TOGGLE_OVERLAY",payload:!t.overlayVisible})):e({type:"TOGGLE_MOBILE_CATEGORY_MENU",payload:!1})}return r}function GA(){const{state:t}=V.useContext(gt),e=HE();return y.jsx("button",{"aria-label":t.openMobileCategoryMenu?"close category menu":"open category menu","aria-expanded":t.openMobileCategoryMenu,"aria-controls":"categoryMenu",className:wi.mobileNavBtn,onClick:()=>e(),tabIndex:t.modal.isVisible?"-1":"0",children:y.jsxs("svg",{className:wi.hamburger,viewBox:"0 0 100 100",width:"35","aria-hidden":"true",children:[y.jsx("rect",{className:`${wi.line} ${wi.line__top}`,width:"90",height:"10",x:"5",y:"25",rx:"5"}),y.jsx("rect",{className:`${wi.line} ${wi.line__middle}`,width:"90",height:"10",x:"5",y:"45",rx:"5"}),y.jsx("rect",{className:`${wi.line} ${wi.line__bottom}`,width:"90",height:"10",x:"5",y:"65",rx:"5"})]})})}function QA(){const{state:t,uiDispatch:e}=V.useContext(gt),{width:n}=_d(),r=Cn(),i=Qt(),s=HE();function o(a){r.pathname!=="/products"&&i("/products"),e({type:"UPDATE_CATEGORY",payload:a.filter}),s()}return V.useEffect(()=>{n>=1024&&(s(),t.modal.isVisible||e({type:"TOGGLE_OVERLAY",payload:!1}))},[n]),y.jsxs(y.Fragment,{children:[y.jsx(GA,{}),y.jsx("ul",{className:"categoryMenu","data-visible":!!t.openMobileCategoryMenu,children:zA.map(a=>y.jsx("li",{onClick:()=>o(a),children:y.jsx(je,{text:a.name,type:a.name===t.selectedCategory?"filter selected-filter":"filter"})},a.id))})]})}function YA(t){return cn({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"circle",attr:{cx:"11",cy:"11",r:"8"},child:[]},{tag:"line",attr:{x1:"21",y1:"21",x2:"16.65",y2:"16.65"},child:[]}]})(t)}const XA=[{label:"",id:"search",name:"searchTerm",placeholder:"Search products... ",componentType:"input",type:"text"}],JA="_commonInputContainer_1ockz_1",ZA={commonInputContainer:JA};function Kf({label:t,name:e,id:n,type:r,placeholder:i,value:s,onChange:o,className:a}){const{state:u}=V.useContext(gt);return y.jsxs("div",{className:ZA.commonInputContainer,children:[y.jsx("label",{htmlFor:e,children:t}),y.jsx("input",{name:e,id:n,type:r||"text",placeholder:i,value:s||"",onChange:o,className:a,tabIndex:u.overlayVisible?"-1":"0"})]})}Kf.propTypes={label:we.string,name:we.string,id:we.string,type:we.string,placeholder:we.string,value:we.string,onChange:we.func,className:we.string};function WE({label:t,name:e,id:n,value:r,onChange:i,options:s}){return y.jsxs(y.Fragment,{children:[y.jsx("label",{htmlFor:e,children:t}),y.jsxs("select",{id:n,name:e,onChange:i,value:r,children:[y.jsx("option",{children:"-- Please choose an option --"}),s!=null&&s.length?s.map((o,a)=>y.jsx("option",{value:o.value,children:o.name},a)):null]})]})}WE.propTypes={label:we.string,name:we.string,id:we.string,value:we.string,onChange:we.func,options:we.array};function qE({label:t,name:e,id:n,placeholder:r,value:i,onChange:s}){return y.jsxs(y.Fragment,{children:[y.jsx("label",{htmlFor:e,children:t}),y.jsx("textarea",{name:e,id:n,placeholder:r||"Start typing here... ",value:i,onChange:s})]})}qE.propTypes={label:we.string,name:we.string,id:we.string,value:we.string,placeholder:we.string,onChange:we.func};const ek="_commonForm_1597w_1",tk={commonForm:ek},kh={INPUT:"input",SELECT:"select",TEXT_AREA:"text-area"};function ks({formControls:t=[],btnText:e,btnIcon:n,formData:r,setFormData:i,onSubmit:s,className:o}){function a(u,c){let d=null;switch(u.componentType){case kh.INPUT:d=y.jsx(Kf,{label:u.label,type:u.type,placeholder:u.placeholder,value:r[u.name],name:u.name,id:u.id,onChange:i});break;case kh.SELECT:d=y.jsx(WE,{label:u.label,name:u.name,id:u.id,placeholder:u.placeholder,value:r[u.name],options:u.options,onChange:i});break;case kh.TEXT_AREA:d=y.jsx(qE,{label:u.label,name:u.name,id:u.id,placeholder:u.placeholder,value:r[u.name],onChange:i});break;default:d=y.jsx(Kf,{label:u.label,type:u.type,placeholder:u.placeholder,value:c[u.name],name:u.name,id:u.id,onChange:i});break}return d}return y.jsxs("form",{onSubmit:s,className:`${o} ${tk.commonForm}`,children:[t.map(u=>y.jsx("div",{children:a(u,r)},u.id)),y.jsx(je,{type:"submit",text:e,icon:n})]})}ks.propTypes={formControls:we.array,btnText:we.string,btnIcon:we.object,formData:we.object,onSubmit:we.func,setFormData:we.func,className:we.string};const nk="_searchbar_81chq_1",rk={searchbar:nk};function wd(t,e={}){const[n,r]=V.useState(null),[i,s]=V.useState(!1),[o,a]=V.useState(null);async function u(){s(!1);try{const c=await fetch(t,{...e});if(!c.ok)throw new Error(c.statusText);const d=await c.json();d&&(s(!0),a(null),r(d))}catch(c){console.log(c),a(`An error occurred: ${c}`),s(!0)}}return V.useEffect(()=>{u()},[t]),{data:n,dataLoaded:i,errorMsg:o}}function ik(){function t(r,i){return new RegExp(`\\b${i}`,"i").test(r.toLowerCase())}function e(r,i,s){return s==null?void 0:s.products.filter(o=>{const a=o[i];return a?Array.isArray(a)?a.some(u=>t(u,r)):t(a,r):!1})}function n(r,i){const s=r.toLowerCase(),a=["title","category","brand","description","tags"].flatMap(c=>e(s,c,i));return Array.from(new Set(a.map(c=>c.id))).map(c=>a.find(d=>d.id===c))}return n}function KE(){const{data:t}=wd("https://dummyjson.com/products/"),{state:e,uiDispatch:n}=V.useContext(gt),[r,i]=V.useState({}),s=Cn(),o=Qt(),a=ik();function u(f){i({...r,[f.target.name]:f.target.value})}async function c(f){f.preventDefault(),s.pathname!=="/products"&&o("/products"),n({type:"SEARCH_SUBMITTED",payload:{searchSubmitted:r.searchTerm,searchInProgress:!0,searchResults:e.search.searchResults}});const m=a(r.searchTerm,t);n({type:"SEARCH_SUBMITTED",payload:{searchSubmitted:r.searchTerm,searchInProgress:!1,searchResults:m}})}function d(){n({type:"SEARCH_SUBMITTED",payload:{searchSubmitted:"",searchInProgress:!1,searchResults:[]}}),i({}),n({type:"UPDATE_CATEGORY",payload:null})}return y.jsxs("div",{className:rk.searchbar,children:[y.jsx(ks,{formControls:XA,formData:r,setFormData:u,onSubmit:c,btnIcon:y.jsx(YA,{})}),e.search.searchSubmitted&&y.jsx(je,{text:"clear search",icon:y.jsx($E,{}),type:"clear",handleAction:d})]})}KE.propTypes={content:we.array};function sk(){const t=Qt(),{uiDispatch:e}=V.useContext(gt),n=Cn(),{state:r}=V.useContext(gt);function i(){n.pathname!=="/"&&e({type:"UPDATE_CATEGORY",payload:null}),t("/")}return y.jsxs("header",{className:Ah.mainHeader,children:[y.jsxs("div",{className:Ah.topRow,children:[y.jsx("h4",{tabIndex:r.modal.isVisible||r.overlayVisible?"-1":"0",onKeyDown:s=>{s.key==="Enter"&&i()},onClick:()=>i(),children:"React Cart App"}),y.jsx(VA,{})]}),y.jsxs("div",{className:Ah.bottomRow,children:[y.jsx(QA,{}),y.jsx(KE,{})]})]})}const ok="_overlay_juo62_1",ak={overlay:ok};function lk(){const{state:t,uiDispatch:e}=V.useContext(gt);function n(){t.modal.isVisible?e({type:"HIDE_MODAL"}):t.openMobileCategoryMenu&&e({type:"TOGGLE_MOBILE_CATEGORY_MENU",payload:!1}),e({type:"TOGGLE_OVERLAY",payload:!1})}return y.jsx("div",{className:ak.overlay,"data-visible":!!t.overlayVisible,"aria-hidden":"true",style:t.modal.isVisible?{zIndex:8e3}:null,onClick:n})}const uk="_modal_i0d4z_1",ck="_passwordReset_i0d4z_45",dk="_quickShop_i0d4z_51",hk="_passwordRest_i0d4z_52",fk="_requestLogin_i0d4z_68",pk="_logoutConfirmation_i0d4z_69",Rv={modal:uk,passwordReset:ck,quickShop:dk,passwordRest:hk,requestLogin:fk,logoutConfirmation:pk},mk="_quickShopContainer_jmrbx_1",gk="_detailsContainer_jmrbx_29",yk="_description_jmrbx_42",vk="_rating_jmrbx_58",_k="_priceContainer_jmrbx_65",to={quickShopContainer:mk,detailsContainer:gk,description:yk,rating:vk,priceContainer:_k};var GE={exports:{}},QE={};/**
 * @license React
 * use-sync-external-store-with-selector.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var jl=V;function wk(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Ek=typeof Object.is=="function"?Object.is:wk,Tk=jl.useSyncExternalStore,Sk=jl.useRef,Ik=jl.useEffect,Pk=jl.useMemo,Ck=jl.useDebugValue;QE.useSyncExternalStoreWithSelector=function(t,e,n,r,i){var s=Sk(null);if(s.current===null){var o={hasValue:!1,value:null};s.current=o}else o=s.current;s=Pk(function(){function u(E){if(!c){if(c=!0,d=E,E=r(E),i!==void 0&&o.hasValue){var C=o.value;if(i(C,E))return f=C}return f=E}if(C=f,Ek(d,E))return C;var A=r(E);return i!==void 0&&i(C,A)?C:(d=E,f=A)}var c=!1,d,f,m=n===void 0?null:n;return[function(){return u(e())},m===null?void 0:function(){return u(m())}]},[e,n,r,i]);var a=Tk(t,s[0],s[1]);return Ik(function(){o.hasValue=!0,o.value=a},[a]),Ck(a),a};GE.exports=QE;var Rk=GE.exports,On="default"in Kh?Gr:Kh,Av=Symbol.for("react-redux-context"),kv=typeof globalThis<"u"?globalThis:{};function Ak(){if(!On.createContext)return{};const t=kv[Av]??(kv[Av]=new Map);let e=t.get(On.createContext);return e||(e=On.createContext(null),t.set(On.createContext,e)),e}var Gi=Ak(),kk=()=>{throw new Error("uSES not initialized!")};function Im(t=Gi){return function(){return On.useContext(t)}}var YE=Im(),XE=kk,bk=t=>{XE=t},xk=(t,e)=>t===e;function Nk(t=Gi){const e=t===Gi?YE:Im(t),n=(r,i={})=>{const{equalityFn:s=xk,devModeChecks:o={}}=typeof i=="function"?{equalityFn:i}:i,{store:a,subscription:u,getServerState:c,stabilityCheck:d,identityFunctionCheck:f}=e();On.useRef(!0);const m=On.useCallback({[r.name](C){return r(C)}}[r.name],[r,d,o.stabilityCheck]),E=XE(u.addNestedSub,a.getState,c||a.getState,m,s);return On.useDebugValue(E),E};return Object.assign(n,{withTypes:()=>n}),n}var Ot=Nk();function Ok(t){t()}function Dk(){let t=null,e=null;return{clear(){t=null,e=null},notify(){Ok(()=>{let n=t;for(;n;)n.callback(),n=n.next})},get(){const n=[];let r=t;for(;r;)n.push(r),r=r.next;return n},subscribe(n){let r=!0;const i=e={callback:n,next:null,prev:e};return i.prev?i.prev.next=i:t=i,function(){!r||t===null||(r=!1,i.next?i.next.prev=i.prev:e=i.prev,i.prev?i.prev.next=i.next:t=i.next)}}}}var bv={notify(){},get:()=>[]};function Lk(t,e){let n,r=bv,i=0,s=!1;function o(A){d();const O=r.subscribe(A);let P=!1;return()=>{P||(P=!0,O(),f())}}function a(){r.notify()}function u(){C.onStateChange&&C.onStateChange()}function c(){return s}function d(){i++,n||(n=t.subscribe(u),r=Dk())}function f(){i--,n&&i===0&&(n(),n=void 0,r.clear(),r=bv)}function m(){s||(s=!0,d())}function E(){s&&(s=!1,f())}const C={addNestedSub:o,notifyNestedSubs:a,handleChangeWrapper:u,isSubscribed:c,trySubscribe:m,tryUnsubscribe:E,getListeners:()=>r};return C}var Mk=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",Vk=typeof navigator<"u"&&navigator.product==="ReactNative",jk=Mk||Vk?On.useLayoutEffect:On.useEffect;function Fk({store:t,context:e,children:n,serverState:r,stabilityCheck:i="once",identityFunctionCheck:s="once"}){const o=On.useMemo(()=>{const c=Lk(t);return{store:t,subscription:c,getServerState:r?()=>r:void 0,stabilityCheck:i,identityFunctionCheck:s}},[t,r,i,s]),a=On.useMemo(()=>t.getState(),[t]);jk(()=>{const{subscription:c}=o;return c.onStateChange=c.notifyNestedSubs,c.trySubscribe(),a!==t.getState()&&c.notifyNestedSubs(),()=>{c.tryUnsubscribe(),c.onStateChange=void 0}},[o,a]);const u=e||Gi;return On.createElement(u.Provider,{value:o},n)}var Uk=Fk;function JE(t=Gi){const e=t===Gi?YE:Im(t),n=()=>{const{store:r}=e();return r};return Object.assign(n,{withTypes:()=>n}),n}var zk=JE();function Bk(t=Gi){const e=t===Gi?zk:JE(t),n=()=>e().dispatch;return Object.assign(n,{withTypes:()=>n}),n}var li=Bk();bk(Rk.useSyncExternalStoreWithSelector);var xv={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZE=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):(i&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},$k=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){const s=t[n++];e[r++]=String.fromCharCode((i&31)<<6|s&63)}else if(i>239&&i<365){const s=t[n++],o=t[n++],a=t[n++],u=((i&7)<<18|(s&63)<<12|(o&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(u>>10)),e[r++]=String.fromCharCode(56320+(u&1023))}else{const s=t[n++],o=t[n++];e[r++]=String.fromCharCode((i&15)<<12|(s&63)<<6|o&63)}}return e.join("")},e1={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<t.length;i+=3){const s=t[i],o=i+1<t.length,a=o?t[i+1]:0,u=i+2<t.length,c=u?t[i+2]:0,d=s>>2,f=(s&3)<<4|a>>4;let m=(a&15)<<2|c>>6,E=c&63;u||(E=64,o||(m=64)),r.push(n[d],n[f],n[m],n[E])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(ZE(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):$k(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<t.length;){const s=n[t.charAt(i++)],a=i<t.length?n[t.charAt(i)]:0;++i;const c=i<t.length?n[t.charAt(i)]:64;++i;const f=i<t.length?n[t.charAt(i)]:64;if(++i,s==null||a==null||c==null||f==null)throw new Hk;const m=s<<2|a>>4;if(r.push(m),c!==64){const E=a<<4&240|c>>2;if(r.push(E),f!==64){const C=c<<6&192|f;r.push(C)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class Hk extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const Wk=function(t){const e=ZE(t);return e1.encodeByteArray(e,!0)},xc=function(t){return Wk(t).replace(/\./g,"")},t1=function(t){try{return e1.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qk(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kk=()=>qk().__FIREBASE_DEFAULTS__,Gk=()=>{if(typeof process>"u"||typeof xv>"u")return;const t=xv.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},Qk=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&t1(t[1]);return e&&JSON.parse(e)},Ed=()=>{try{return Kk()||Gk()||Qk()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},n1=t=>{var e,n;return(n=(e=Ed())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},Yk=t=>{const e=n1(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},r1=()=>{var t;return(t=Ed())===null||t===void 0?void 0:t.config},i1=t=>{var e;return(e=Ed())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xk{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jk(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",i=t.iat||0,s=t.sub||t.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},t);return[xc(JSON.stringify(n)),xc(JSON.stringify(o)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gt(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function Zk(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Gt())}function eb(){var t;const e=(t=Ed())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function tb(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function nb(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function rb(){const t=Gt();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function ib(){return!eb()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function sb(){try{return typeof indexedDB=="object"}catch{return!1}}function ob(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var s;e(((s=i.error)===null||s===void 0?void 0:s.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ab="FirebaseError";class ui extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=ab,Object.setPrototypeOf(this,ui.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Fl.prototype.create)}}class Fl{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},i=`${this.service}/${e}`,s=this.errors[e],o=s?lb(s,r):"Error",a=`${this.serviceName}: ${o} (${i}).`;return new ui(i,a,r)}}function lb(t,e){return t.replace(ub,(n,r)=>{const i=e[r];return i!=null?String(i):`<${r}?>`})}const ub=/\{\$([^}]+)}/g;function cb(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function Vo(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const i of n){if(!r.includes(i))return!1;const s=t[i],o=e[i];if(Nv(s)&&Nv(o)){if(!Vo(s,o))return!1}else if(s!==o)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function Nv(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ul(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function xa(t){const e={};return t.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[i,s]=r.split("=");e[decodeURIComponent(i)]=decodeURIComponent(s)}}),e}function Na(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function db(t,e){const n=new hb(t,e);return n.subscribe.bind(n)}class hb{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let i;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");fb(e,["next","error","complete"])?i=e:i={next:e,error:n,complete:r},i.next===void 0&&(i.next=bh),i.error===void 0&&(i.error=bh),i.complete===void 0&&(i.complete=bh);const s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),s}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function fb(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function bh(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lt(t){return t&&t._delegate?t._delegate:t}class bs{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ds="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pb{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new Xk;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),i=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(s){if(i)return null;throw s}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(gb(e))try{this.getOrInitializeService({instanceIdentifier:ds})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(n);try{const s=this.getOrInitializeService({instanceIdentifier:i});r.resolve(s)}catch{}}}}clearInstance(e=ds){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=ds){return this.instances.has(e)}getOptions(e=ds){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[s,o]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(s);r===a&&o.resolve(i)}return i}onInit(e,n){var r;const i=this.normalizeInstanceIdentifier(n),s=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;s.add(e),this.onInitCallbacks.set(i,s);const o=this.instances.get(i);return o&&e(o,i),()=>{s.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const i of r)try{i(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:mb(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=ds){return this.component?this.component.multipleInstances?e:ds:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function mb(t){return t===ds?void 0:t}function gb(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yb{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new pb(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Oe;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(Oe||(Oe={}));const vb={debug:Oe.DEBUG,verbose:Oe.VERBOSE,info:Oe.INFO,warn:Oe.WARN,error:Oe.ERROR,silent:Oe.SILENT},_b=Oe.INFO,wb={[Oe.DEBUG]:"log",[Oe.VERBOSE]:"log",[Oe.INFO]:"info",[Oe.WARN]:"warn",[Oe.ERROR]:"error"},Eb=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),i=wb[e];if(i)console[i](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Pm{constructor(e){this.name=e,this._logLevel=_b,this._logHandler=Eb,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Oe))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?vb[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Oe.DEBUG,...e),this._logHandler(this,Oe.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Oe.VERBOSE,...e),this._logHandler(this,Oe.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Oe.INFO,...e),this._logHandler(this,Oe.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Oe.WARN,...e),this._logHandler(this,Oe.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Oe.ERROR,...e),this._logHandler(this,Oe.ERROR,...e)}}const Tb=(t,e)=>e.some(n=>t instanceof n);let Ov,Dv;function Sb(){return Ov||(Ov=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function Ib(){return Dv||(Dv=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const s1=new WeakMap,Gf=new WeakMap,o1=new WeakMap,xh=new WeakMap,Cm=new WeakMap;function Pb(t){const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("success",s),t.removeEventListener("error",o)},s=()=>{n(Bi(t.result)),i()},o=()=>{r(t.error),i()};t.addEventListener("success",s),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&s1.set(n,t)}).catch(()=>{}),Cm.set(e,t),e}function Cb(t){if(Gf.has(t))return;const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("complete",s),t.removeEventListener("error",o),t.removeEventListener("abort",o)},s=()=>{n(),i()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",s),t.addEventListener("error",o),t.addEventListener("abort",o)});Gf.set(t,e)}let Qf={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return Gf.get(t);if(e==="objectStoreNames")return t.objectStoreNames||o1.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Bi(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function Rb(t){Qf=t(Qf)}function Ab(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(Nh(this),e,...n);return o1.set(r,e.sort?e.sort():[e]),Bi(r)}:Ib().includes(t)?function(...e){return t.apply(Nh(this),e),Bi(s1.get(this))}:function(...e){return Bi(t.apply(Nh(this),e))}}function kb(t){return typeof t=="function"?Ab(t):(t instanceof IDBTransaction&&Cb(t),Tb(t,Sb())?new Proxy(t,Qf):t)}function Bi(t){if(t instanceof IDBRequest)return Pb(t);if(xh.has(t))return xh.get(t);const e=kb(t);return e!==t&&(xh.set(t,e),Cm.set(e,t)),e}const Nh=t=>Cm.get(t);function bb(t,e,{blocked:n,upgrade:r,blocking:i,terminated:s}={}){const o=indexedDB.open(t,e),a=Bi(o);return r&&o.addEventListener("upgradeneeded",u=>{r(Bi(o.result),u.oldVersion,u.newVersion,Bi(o.transaction),u)}),n&&o.addEventListener("blocked",u=>n(u.oldVersion,u.newVersion,u)),a.then(u=>{s&&u.addEventListener("close",()=>s()),i&&u.addEventListener("versionchange",c=>i(c.oldVersion,c.newVersion,c))}).catch(()=>{}),a}const xb=["get","getKey","getAll","getAllKeys","count"],Nb=["put","add","delete","clear"],Oh=new Map;function Lv(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(Oh.get(e))return Oh.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,i=Nb.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||xb.includes(n)))return;const s=async function(o,...a){const u=this.transaction(o,i?"readwrite":"readonly");let c=u.store;return r&&(c=c.index(a.shift())),(await Promise.all([c[n](...a),i&&u.done]))[0]};return Oh.set(e,s),s}Rb(t=>({...t,get:(e,n,r)=>Lv(e,n)||t.get(e,n,r),has:(e,n)=>!!Lv(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ob{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(Db(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function Db(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Yf="@firebase/app",Mv="0.10.7";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xs=new Pm("@firebase/app"),Lb="@firebase/app-compat",Mb="@firebase/analytics-compat",Vb="@firebase/analytics",jb="@firebase/app-check-compat",Fb="@firebase/app-check",Ub="@firebase/auth",zb="@firebase/auth-compat",Bb="@firebase/database",$b="@firebase/database-compat",Hb="@firebase/functions",Wb="@firebase/functions-compat",qb="@firebase/installations",Kb="@firebase/installations-compat",Gb="@firebase/messaging",Qb="@firebase/messaging-compat",Yb="@firebase/performance",Xb="@firebase/performance-compat",Jb="@firebase/remote-config",Zb="@firebase/remote-config-compat",ex="@firebase/storage",tx="@firebase/storage-compat",nx="@firebase/firestore",rx="@firebase/vertexai-preview",ix="@firebase/firestore-compat",sx="firebase",ox="10.12.4";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xf="[DEFAULT]",ax={[Yf]:"fire-core",[Lb]:"fire-core-compat",[Vb]:"fire-analytics",[Mb]:"fire-analytics-compat",[Fb]:"fire-app-check",[jb]:"fire-app-check-compat",[Ub]:"fire-auth",[zb]:"fire-auth-compat",[Bb]:"fire-rtdb",[$b]:"fire-rtdb-compat",[Hb]:"fire-fn",[Wb]:"fire-fn-compat",[qb]:"fire-iid",[Kb]:"fire-iid-compat",[Gb]:"fire-fcm",[Qb]:"fire-fcm-compat",[Yb]:"fire-perf",[Xb]:"fire-perf-compat",[Jb]:"fire-rc",[Zb]:"fire-rc-compat",[ex]:"fire-gcs",[tx]:"fire-gcs-compat",[nx]:"fire-fst",[ix]:"fire-fst-compat",[rx]:"fire-vertex","fire-js":"fire-js",[sx]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nc=new Map,lx=new Map,Jf=new Map;function Vv(t,e){try{t.container.addComponent(e)}catch(n){xs.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function jo(t){const e=t.name;if(Jf.has(e))return xs.debug(`There were multiple attempts to register component ${e}.`),!1;Jf.set(e,t);for(const n of Nc.values())Vv(n,t);for(const n of lx.values())Vv(n,t);return!0}function Rm(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function Sr(t){return t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ux={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},$i=new Fl("app","Firebase",ux);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cx{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new bs("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw $i.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zo=ox;function a1(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r=Object.assign({name:Xf,automaticDataCollectionEnabled:!1},e),i=r.name;if(typeof i!="string"||!i)throw $i.create("bad-app-name",{appName:String(i)});if(n||(n=r1()),!n)throw $i.create("no-options");const s=Nc.get(i);if(s){if(Vo(n,s.options)&&Vo(r,s.config))return s;throw $i.create("duplicate-app",{appName:i})}const o=new yb(i);for(const u of Jf.values())o.addComponent(u);const a=new cx(n,r,o);return Nc.set(i,a),a}function l1(t=Xf){const e=Nc.get(t);if(!e&&t===Xf&&r1())return a1();if(!e)throw $i.create("no-app",{appName:t});return e}function Hi(t,e,n){var r;let i=(r=ax[t])!==null&&r!==void 0?r:t;n&&(i+=`-${n}`);const s=i.match(/\s|\//),o=e.match(/\s|\//);if(s||o){const a=[`Unable to register library "${i}" with version "${e}":`];s&&a.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&o&&a.push("and"),o&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),xs.warn(a.join(" "));return}jo(new bs(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dx="firebase-heartbeat-database",hx=1,wl="firebase-heartbeat-store";let Dh=null;function u1(){return Dh||(Dh=bb(dx,hx,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(wl)}catch(n){console.warn(n)}}}}).catch(t=>{throw $i.create("idb-open",{originalErrorMessage:t.message})})),Dh}async function fx(t){try{const n=(await u1()).transaction(wl),r=await n.objectStore(wl).get(c1(t));return await n.done,r}catch(e){if(e instanceof ui)xs.warn(e.message);else{const n=$i.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});xs.warn(n.message)}}}async function jv(t,e){try{const r=(await u1()).transaction(wl,"readwrite");await r.objectStore(wl).put(e,c1(t)),await r.done}catch(n){if(n instanceof ui)xs.warn(n.message);else{const r=$i.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});xs.warn(r.message)}}}function c1(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const px=1024,mx=30*24*60*60*1e3;class gx{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new vx(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;const i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=Fv();if(!(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null))&&!(this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(o=>o.date===s)))return this._heartbeatsCache.heartbeats.push({date:s,agent:i}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(o=>{const a=new Date(o.date).valueOf();return Date.now()-a<=mx}),this._storage.overwrite(this._heartbeatsCache)}async getHeartbeatsHeader(){var e;if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=Fv(),{heartbeatsToSend:r,unsentEntries:i}=yx(this._heartbeatsCache.heartbeats),s=xc(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}}function Fv(){return new Date().toISOString().substring(0,10)}function yx(t,e=px){const n=[];let r=t.slice();for(const i of t){const s=n.find(o=>o.agent===i.agent);if(s){if(s.dates.push(i.date),Uv(n)>e){s.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),Uv(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class vx{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return sb()?ob().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await fx(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return jv(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return jv(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function Uv(t){return xc(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _x(t){jo(new bs("platform-logger",e=>new Ob(e),"PRIVATE")),jo(new bs("heartbeat",e=>new gx(e),"PRIVATE")),Hi(Yf,Mv,t),Hi(Yf,Mv,"esm2017"),Hi("fire-js","")}_x("");var zv=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Es,d1;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(S,g){function w(){}w.prototype=g.prototype,S.D=g.prototype,S.prototype=new w,S.prototype.constructor=S,S.C=function(T,b,N){for(var R=Array(arguments.length-2),oe=2;oe<arguments.length;oe++)R[oe-2]=arguments[oe];return g.prototype[b].apply(T,R)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(S,g,w){w||(w=0);var T=Array(16);if(typeof g=="string")for(var b=0;16>b;++b)T[b]=g.charCodeAt(w++)|g.charCodeAt(w++)<<8|g.charCodeAt(w++)<<16|g.charCodeAt(w++)<<24;else for(b=0;16>b;++b)T[b]=g[w++]|g[w++]<<8|g[w++]<<16|g[w++]<<24;g=S.g[0],w=S.g[1],b=S.g[2];var N=S.g[3],R=g+(N^w&(b^N))+T[0]+3614090360&4294967295;g=w+(R<<7&4294967295|R>>>25),R=N+(b^g&(w^b))+T[1]+3905402710&4294967295,N=g+(R<<12&4294967295|R>>>20),R=b+(w^N&(g^w))+T[2]+606105819&4294967295,b=N+(R<<17&4294967295|R>>>15),R=w+(g^b&(N^g))+T[3]+3250441966&4294967295,w=b+(R<<22&4294967295|R>>>10),R=g+(N^w&(b^N))+T[4]+4118548399&4294967295,g=w+(R<<7&4294967295|R>>>25),R=N+(b^g&(w^b))+T[5]+1200080426&4294967295,N=g+(R<<12&4294967295|R>>>20),R=b+(w^N&(g^w))+T[6]+2821735955&4294967295,b=N+(R<<17&4294967295|R>>>15),R=w+(g^b&(N^g))+T[7]+4249261313&4294967295,w=b+(R<<22&4294967295|R>>>10),R=g+(N^w&(b^N))+T[8]+1770035416&4294967295,g=w+(R<<7&4294967295|R>>>25),R=N+(b^g&(w^b))+T[9]+2336552879&4294967295,N=g+(R<<12&4294967295|R>>>20),R=b+(w^N&(g^w))+T[10]+4294925233&4294967295,b=N+(R<<17&4294967295|R>>>15),R=w+(g^b&(N^g))+T[11]+2304563134&4294967295,w=b+(R<<22&4294967295|R>>>10),R=g+(N^w&(b^N))+T[12]+1804603682&4294967295,g=w+(R<<7&4294967295|R>>>25),R=N+(b^g&(w^b))+T[13]+4254626195&4294967295,N=g+(R<<12&4294967295|R>>>20),R=b+(w^N&(g^w))+T[14]+2792965006&4294967295,b=N+(R<<17&4294967295|R>>>15),R=w+(g^b&(N^g))+T[15]+1236535329&4294967295,w=b+(R<<22&4294967295|R>>>10),R=g+(b^N&(w^b))+T[1]+4129170786&4294967295,g=w+(R<<5&4294967295|R>>>27),R=N+(w^b&(g^w))+T[6]+3225465664&4294967295,N=g+(R<<9&4294967295|R>>>23),R=b+(g^w&(N^g))+T[11]+643717713&4294967295,b=N+(R<<14&4294967295|R>>>18),R=w+(N^g&(b^N))+T[0]+3921069994&4294967295,w=b+(R<<20&4294967295|R>>>12),R=g+(b^N&(w^b))+T[5]+3593408605&4294967295,g=w+(R<<5&4294967295|R>>>27),R=N+(w^b&(g^w))+T[10]+38016083&4294967295,N=g+(R<<9&4294967295|R>>>23),R=b+(g^w&(N^g))+T[15]+3634488961&4294967295,b=N+(R<<14&4294967295|R>>>18),R=w+(N^g&(b^N))+T[4]+3889429448&4294967295,w=b+(R<<20&4294967295|R>>>12),R=g+(b^N&(w^b))+T[9]+568446438&4294967295,g=w+(R<<5&4294967295|R>>>27),R=N+(w^b&(g^w))+T[14]+3275163606&4294967295,N=g+(R<<9&4294967295|R>>>23),R=b+(g^w&(N^g))+T[3]+4107603335&4294967295,b=N+(R<<14&4294967295|R>>>18),R=w+(N^g&(b^N))+T[8]+1163531501&4294967295,w=b+(R<<20&4294967295|R>>>12),R=g+(b^N&(w^b))+T[13]+2850285829&4294967295,g=w+(R<<5&4294967295|R>>>27),R=N+(w^b&(g^w))+T[2]+4243563512&4294967295,N=g+(R<<9&4294967295|R>>>23),R=b+(g^w&(N^g))+T[7]+1735328473&4294967295,b=N+(R<<14&4294967295|R>>>18),R=w+(N^g&(b^N))+T[12]+2368359562&4294967295,w=b+(R<<20&4294967295|R>>>12),R=g+(w^b^N)+T[5]+4294588738&4294967295,g=w+(R<<4&4294967295|R>>>28),R=N+(g^w^b)+T[8]+2272392833&4294967295,N=g+(R<<11&4294967295|R>>>21),R=b+(N^g^w)+T[11]+1839030562&4294967295,b=N+(R<<16&4294967295|R>>>16),R=w+(b^N^g)+T[14]+4259657740&4294967295,w=b+(R<<23&4294967295|R>>>9),R=g+(w^b^N)+T[1]+2763975236&4294967295,g=w+(R<<4&4294967295|R>>>28),R=N+(g^w^b)+T[4]+1272893353&4294967295,N=g+(R<<11&4294967295|R>>>21),R=b+(N^g^w)+T[7]+4139469664&4294967295,b=N+(R<<16&4294967295|R>>>16),R=w+(b^N^g)+T[10]+3200236656&4294967295,w=b+(R<<23&4294967295|R>>>9),R=g+(w^b^N)+T[13]+681279174&4294967295,g=w+(R<<4&4294967295|R>>>28),R=N+(g^w^b)+T[0]+3936430074&4294967295,N=g+(R<<11&4294967295|R>>>21),R=b+(N^g^w)+T[3]+3572445317&4294967295,b=N+(R<<16&4294967295|R>>>16),R=w+(b^N^g)+T[6]+76029189&4294967295,w=b+(R<<23&4294967295|R>>>9),R=g+(w^b^N)+T[9]+3654602809&4294967295,g=w+(R<<4&4294967295|R>>>28),R=N+(g^w^b)+T[12]+3873151461&4294967295,N=g+(R<<11&4294967295|R>>>21),R=b+(N^g^w)+T[15]+530742520&4294967295,b=N+(R<<16&4294967295|R>>>16),R=w+(b^N^g)+T[2]+3299628645&4294967295,w=b+(R<<23&4294967295|R>>>9),R=g+(b^(w|~N))+T[0]+4096336452&4294967295,g=w+(R<<6&4294967295|R>>>26),R=N+(w^(g|~b))+T[7]+1126891415&4294967295,N=g+(R<<10&4294967295|R>>>22),R=b+(g^(N|~w))+T[14]+2878612391&4294967295,b=N+(R<<15&4294967295|R>>>17),R=w+(N^(b|~g))+T[5]+4237533241&4294967295,w=b+(R<<21&4294967295|R>>>11),R=g+(b^(w|~N))+T[12]+1700485571&4294967295,g=w+(R<<6&4294967295|R>>>26),R=N+(w^(g|~b))+T[3]+2399980690&4294967295,N=g+(R<<10&4294967295|R>>>22),R=b+(g^(N|~w))+T[10]+4293915773&4294967295,b=N+(R<<15&4294967295|R>>>17),R=w+(N^(b|~g))+T[1]+2240044497&4294967295,w=b+(R<<21&4294967295|R>>>11),R=g+(b^(w|~N))+T[8]+1873313359&4294967295,g=w+(R<<6&4294967295|R>>>26),R=N+(w^(g|~b))+T[15]+4264355552&4294967295,N=g+(R<<10&4294967295|R>>>22),R=b+(g^(N|~w))+T[6]+2734768916&4294967295,b=N+(R<<15&4294967295|R>>>17),R=w+(N^(b|~g))+T[13]+1309151649&4294967295,w=b+(R<<21&4294967295|R>>>11),R=g+(b^(w|~N))+T[4]+4149444226&4294967295,g=w+(R<<6&4294967295|R>>>26),R=N+(w^(g|~b))+T[11]+3174756917&4294967295,N=g+(R<<10&4294967295|R>>>22),R=b+(g^(N|~w))+T[2]+718787259&4294967295,b=N+(R<<15&4294967295|R>>>17),R=w+(N^(b|~g))+T[9]+3951481745&4294967295,S.g[0]=S.g[0]+g&4294967295,S.g[1]=S.g[1]+(b+(R<<21&4294967295|R>>>11))&4294967295,S.g[2]=S.g[2]+b&4294967295,S.g[3]=S.g[3]+N&4294967295}r.prototype.u=function(S,g){g===void 0&&(g=S.length);for(var w=g-this.blockSize,T=this.B,b=this.h,N=0;N<g;){if(b==0)for(;N<=w;)i(this,S,N),N+=this.blockSize;if(typeof S=="string"){for(;N<g;)if(T[b++]=S.charCodeAt(N++),b==this.blockSize){i(this,T),b=0;break}}else for(;N<g;)if(T[b++]=S[N++],b==this.blockSize){i(this,T),b=0;break}}this.h=b,this.o+=g},r.prototype.v=function(){var S=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);S[0]=128;for(var g=1;g<S.length-8;++g)S[g]=0;var w=8*this.o;for(g=S.length-8;g<S.length;++g)S[g]=w&255,w/=256;for(this.u(S),S=Array(16),g=w=0;4>g;++g)for(var T=0;32>T;T+=8)S[w++]=this.g[g]>>>T&255;return S};function s(S,g){var w=a;return Object.prototype.hasOwnProperty.call(w,S)?w[S]:w[S]=g(S)}function o(S,g){this.h=g;for(var w=[],T=!0,b=S.length-1;0<=b;b--){var N=S[b]|0;T&&N==g||(w[b]=N,T=!1)}this.g=w}var a={};function u(S){return-128<=S&&128>S?s(S,function(g){return new o([g|0],0>g?-1:0)}):new o([S|0],0>S?-1:0)}function c(S){if(isNaN(S)||!isFinite(S))return f;if(0>S)return O(c(-S));for(var g=[],w=1,T=0;S>=w;T++)g[T]=S/w|0,w*=4294967296;return new o(g,0)}function d(S,g){if(S.length==0)throw Error("number format error: empty string");if(g=g||10,2>g||36<g)throw Error("radix out of range: "+g);if(S.charAt(0)=="-")return O(d(S.substring(1),g));if(0<=S.indexOf("-"))throw Error('number format error: interior "-" character');for(var w=c(Math.pow(g,8)),T=f,b=0;b<S.length;b+=8){var N=Math.min(8,S.length-b),R=parseInt(S.substring(b,b+N),g);8>N?(N=c(Math.pow(g,N)),T=T.j(N).add(c(R))):(T=T.j(w),T=T.add(c(R)))}return T}var f=u(0),m=u(1),E=u(16777216);t=o.prototype,t.m=function(){if(A(this))return-O(this).m();for(var S=0,g=1,w=0;w<this.g.length;w++){var T=this.i(w);S+=(0<=T?T:4294967296+T)*g,g*=4294967296}return S},t.toString=function(S){if(S=S||10,2>S||36<S)throw Error("radix out of range: "+S);if(C(this))return"0";if(A(this))return"-"+O(this).toString(S);for(var g=c(Math.pow(S,6)),w=this,T="";;){var b=M(w,g).g;w=P(w,b.j(g));var N=((0<w.g.length?w.g[0]:w.h)>>>0).toString(S);if(w=b,C(w))return N+T;for(;6>N.length;)N="0"+N;T=N+T}},t.i=function(S){return 0>S?0:S<this.g.length?this.g[S]:this.h};function C(S){if(S.h!=0)return!1;for(var g=0;g<S.g.length;g++)if(S.g[g]!=0)return!1;return!0}function A(S){return S.h==-1}t.l=function(S){return S=P(this,S),A(S)?-1:C(S)?0:1};function O(S){for(var g=S.g.length,w=[],T=0;T<g;T++)w[T]=~S.g[T];return new o(w,~S.h).add(m)}t.abs=function(){return A(this)?O(this):this},t.add=function(S){for(var g=Math.max(this.g.length,S.g.length),w=[],T=0,b=0;b<=g;b++){var N=T+(this.i(b)&65535)+(S.i(b)&65535),R=(N>>>16)+(this.i(b)>>>16)+(S.i(b)>>>16);T=R>>>16,N&=65535,R&=65535,w[b]=R<<16|N}return new o(w,w[w.length-1]&-2147483648?-1:0)};function P(S,g){return S.add(O(g))}t.j=function(S){if(C(this)||C(S))return f;if(A(this))return A(S)?O(this).j(O(S)):O(O(this).j(S));if(A(S))return O(this.j(O(S)));if(0>this.l(E)&&0>S.l(E))return c(this.m()*S.m());for(var g=this.g.length+S.g.length,w=[],T=0;T<2*g;T++)w[T]=0;for(T=0;T<this.g.length;T++)for(var b=0;b<S.g.length;b++){var N=this.i(T)>>>16,R=this.i(T)&65535,oe=S.i(b)>>>16,Fe=S.i(b)&65535;w[2*T+2*b]+=R*Fe,v(w,2*T+2*b),w[2*T+2*b+1]+=N*Fe,v(w,2*T+2*b+1),w[2*T+2*b+1]+=R*oe,v(w,2*T+2*b+1),w[2*T+2*b+2]+=N*oe,v(w,2*T+2*b+2)}for(T=0;T<g;T++)w[T]=w[2*T+1]<<16|w[2*T];for(T=g;T<2*g;T++)w[T]=0;return new o(w,0)};function v(S,g){for(;(S[g]&65535)!=S[g];)S[g+1]+=S[g]>>>16,S[g]&=65535,g++}function I(S,g){this.g=S,this.h=g}function M(S,g){if(C(g))throw Error("division by zero");if(C(S))return new I(f,f);if(A(S))return g=M(O(S),g),new I(O(g.g),O(g.h));if(A(g))return g=M(S,O(g)),new I(O(g.g),g.h);if(30<S.g.length){if(A(S)||A(g))throw Error("slowDivide_ only works with positive integers.");for(var w=m,T=g;0>=T.l(S);)w=F(w),T=F(T);var b=k(w,1),N=k(T,1);for(T=k(T,2),w=k(w,2);!C(T);){var R=N.add(T);0>=R.l(S)&&(b=b.add(w),N=R),T=k(T,1),w=k(w,1)}return g=P(S,b.j(g)),new I(b,g)}for(b=f;0<=S.l(g);){for(w=Math.max(1,Math.floor(S.m()/g.m())),T=Math.ceil(Math.log(w)/Math.LN2),T=48>=T?1:Math.pow(2,T-48),N=c(w),R=N.j(g);A(R)||0<R.l(S);)w-=T,N=c(w),R=N.j(g);C(N)&&(N=m),b=b.add(N),S=P(S,R)}return new I(b,S)}t.A=function(S){return M(this,S).h},t.and=function(S){for(var g=Math.max(this.g.length,S.g.length),w=[],T=0;T<g;T++)w[T]=this.i(T)&S.i(T);return new o(w,this.h&S.h)},t.or=function(S){for(var g=Math.max(this.g.length,S.g.length),w=[],T=0;T<g;T++)w[T]=this.i(T)|S.i(T);return new o(w,this.h|S.h)},t.xor=function(S){for(var g=Math.max(this.g.length,S.g.length),w=[],T=0;T<g;T++)w[T]=this.i(T)^S.i(T);return new o(w,this.h^S.h)};function F(S){for(var g=S.g.length+1,w=[],T=0;T<g;T++)w[T]=S.i(T)<<1|S.i(T-1)>>>31;return new o(w,S.h)}function k(S,g){var w=g>>5;g%=32;for(var T=S.g.length-w,b=[],N=0;N<T;N++)b[N]=0<g?S.i(N+w)>>>g|S.i(N+w+1)<<32-g:S.i(N+w);return new o(b,S.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,d1=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=c,o.fromString=d,Es=o}).apply(typeof zv<"u"?zv:typeof self<"u"?self:typeof window<"u"?window:{});var Ru=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var h1,f1,Oa,p1,Qu,Zf,m1,g1,y1;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(l,h,p){return l==Array.prototype||l==Object.prototype||(l[h]=p.value),l};function n(l){l=[typeof globalThis=="object"&&globalThis,l,typeof window=="object"&&window,typeof self=="object"&&self,typeof Ru=="object"&&Ru];for(var h=0;h<l.length;++h){var p=l[h];if(p&&p.Math==Math)return p}throw Error("Cannot find global object")}var r=n(this);function i(l,h){if(h)e:{var p=r;l=l.split(".");for(var _=0;_<l.length-1;_++){var j=l[_];if(!(j in p))break e;p=p[j]}l=l[l.length-1],_=p[l],h=h(_),h!=_&&h!=null&&e(p,l,{configurable:!0,writable:!0,value:h})}}function s(l,h){l instanceof String&&(l+="");var p=0,_=!1,j={next:function(){if(!_&&p<l.length){var $=p++;return{value:h($,l[$]),done:!1}}return _=!0,{done:!0,value:void 0}}};return j[Symbol.iterator]=function(){return j},j}i("Array.prototype.values",function(l){return l||function(){return s(this,function(h,p){return p})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var o=o||{},a=this||self;function u(l){var h=typeof l;return h=h!="object"?h:l?Array.isArray(l)?"array":h:"null",h=="array"||h=="object"&&typeof l.length=="number"}function c(l){var h=typeof l;return h=="object"&&l!=null||h=="function"}function d(l,h,p){return l.call.apply(l.bind,arguments)}function f(l,h,p){if(!l)throw Error();if(2<arguments.length){var _=Array.prototype.slice.call(arguments,2);return function(){var j=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(j,_),l.apply(h,j)}}return function(){return l.apply(h,arguments)}}function m(l,h,p){return m=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?d:f,m.apply(null,arguments)}function E(l,h){var p=Array.prototype.slice.call(arguments,1);return function(){var _=p.slice();return _.push.apply(_,arguments),l.apply(this,_)}}function C(l,h){function p(){}p.prototype=h.prototype,l.aa=h.prototype,l.prototype=new p,l.prototype.constructor=l,l.Qb=function(_,j,$){for(var Z=Array(arguments.length-2),Je=2;Je<arguments.length;Je++)Z[Je-2]=arguments[Je];return h.prototype[j].apply(_,Z)}}function A(l){const h=l.length;if(0<h){const p=Array(h);for(let _=0;_<h;_++)p[_]=l[_];return p}return[]}function O(l,h){for(let p=1;p<arguments.length;p++){const _=arguments[p];if(u(_)){const j=l.length||0,$=_.length||0;l.length=j+$;for(let Z=0;Z<$;Z++)l[j+Z]=_[Z]}else l.push(_)}}class P{constructor(h,p){this.i=h,this.j=p,this.h=0,this.g=null}get(){let h;return 0<this.h?(this.h--,h=this.g,this.g=h.next,h.next=null):h=this.i(),h}}function v(l){return/^[\s\xa0]*$/.test(l)}function I(){var l=a.navigator;return l&&(l=l.userAgent)?l:""}function M(l){return M[" "](l),l}M[" "]=function(){};var F=I().indexOf("Gecko")!=-1&&!(I().toLowerCase().indexOf("webkit")!=-1&&I().indexOf("Edge")==-1)&&!(I().indexOf("Trident")!=-1||I().indexOf("MSIE")!=-1)&&I().indexOf("Edge")==-1;function k(l,h,p){for(const _ in l)h.call(p,l[_],_,l)}function S(l,h){for(const p in l)h.call(void 0,l[p],p,l)}function g(l){const h={};for(const p in l)h[p]=l[p];return h}const w="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function T(l,h){let p,_;for(let j=1;j<arguments.length;j++){_=arguments[j];for(p in _)l[p]=_[p];for(let $=0;$<w.length;$++)p=w[$],Object.prototype.hasOwnProperty.call(_,p)&&(l[p]=_[p])}}function b(l){var h=1;l=l.split(":");const p=[];for(;0<h&&l.length;)p.push(l.shift()),h--;return l.length&&p.push(l.join(":")),p}function N(l){a.setTimeout(()=>{throw l},0)}function R(){var l=re;let h=null;return l.g&&(h=l.g,l.g=l.g.next,l.g||(l.h=null),h.next=null),h}class oe{constructor(){this.h=this.g=null}add(h,p){const _=Fe.get();_.set(h,p),this.h?this.h.next=_:this.g=_,this.h=_}}var Fe=new P(()=>new Be,l=>l.reset());class Be{constructor(){this.next=this.g=this.h=null}set(h,p){this.h=h,this.g=p,this.next=null}reset(){this.next=this.g=this.h=null}}let ge,X=!1,re=new oe,te=()=>{const l=a.Promise.resolve(void 0);ge=()=>{l.then(ye)}};var ye=()=>{for(var l;l=R();){try{l.h.call(l.g)}catch(p){N(p)}var h=Fe;h.j(l),100>h.h&&(h.h++,l.next=h.g,h.g=l)}X=!1};function ve(){this.s=this.s,this.C=this.C}ve.prototype.s=!1,ve.prototype.ma=function(){this.s||(this.s=!0,this.N())},ve.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function _e(l,h){this.type=l,this.g=this.target=h,this.defaultPrevented=!1}_e.prototype.h=function(){this.defaultPrevented=!0};var Ce=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var l=!1,h=Object.defineProperty({},"passive",{get:function(){l=!0}});try{const p=()=>{};a.addEventListener("test",p,h),a.removeEventListener("test",p,h)}catch{}return l}();function $e(l,h){if(_e.call(this,l?l.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,l){var p=this.type=l.type,_=l.changedTouches&&l.changedTouches.length?l.changedTouches[0]:null;if(this.target=l.target||l.srcElement,this.g=h,h=l.relatedTarget){if(F){e:{try{M(h.nodeName);var j=!0;break e}catch{}j=!1}j||(h=null)}}else p=="mouseover"?h=l.fromElement:p=="mouseout"&&(h=l.toElement);this.relatedTarget=h,_?(this.clientX=_.clientX!==void 0?_.clientX:_.pageX,this.clientY=_.clientY!==void 0?_.clientY:_.pageY,this.screenX=_.screenX||0,this.screenY=_.screenY||0):(this.clientX=l.clientX!==void 0?l.clientX:l.pageX,this.clientY=l.clientY!==void 0?l.clientY:l.pageY,this.screenX=l.screenX||0,this.screenY=l.screenY||0),this.button=l.button,this.key=l.key||"",this.ctrlKey=l.ctrlKey,this.altKey=l.altKey,this.shiftKey=l.shiftKey,this.metaKey=l.metaKey,this.pointerId=l.pointerId||0,this.pointerType=typeof l.pointerType=="string"?l.pointerType:ct[l.pointerType]||"",this.state=l.state,this.i=l,l.defaultPrevented&&$e.aa.h.call(this)}}C($e,_e);var ct={2:"touch",3:"pen",4:"mouse"};$e.prototype.h=function(){$e.aa.h.call(this);var l=this.i;l.preventDefault?l.preventDefault():l.returnValue=!1};var Yt="closure_listenable_"+(1e6*Math.random()|0),Rn=0;function tr(l,h,p,_,j){this.listener=l,this.proxy=null,this.src=h,this.type=p,this.capture=!!_,this.ha=j,this.key=++Rn,this.da=this.fa=!1}function _n(l){l.da=!0,l.listener=null,l.proxy=null,l.src=null,l.ha=null}function vt(l){this.src=l,this.g={},this.h=0}vt.prototype.add=function(l,h,p,_,j){var $=l.toString();l=this.g[$],l||(l=this.g[$]=[],this.h++);var Z=nt(l,h,_,j);return-1<Z?(h=l[Z],p||(h.fa=!1)):(h=new tr(h,this.src,$,!!_,j),h.fa=p,l.push(h)),h};function He(l,h){var p=h.type;if(p in l.g){var _=l.g[p],j=Array.prototype.indexOf.call(_,h,void 0),$;($=0<=j)&&Array.prototype.splice.call(_,j,1),$&&(_n(h),l.g[p].length==0&&(delete l.g[p],l.h--))}}function nt(l,h,p,_){for(var j=0;j<l.length;++j){var $=l[j];if(!$.da&&$.listener==h&&$.capture==!!p&&$.ha==_)return j}return-1}var hi="closure_lm_"+(1e6*Math.random()|0),rs={};function zn(l,h,p,_,j){if(Array.isArray(h)){for(var $=0;$<h.length;$++)zn(l,h[$],p,_,j);return null}return p=nr(p),l&&l[Yt]?l.K(h,p,c(_)?!!_.capture:!!_,j):Gs(l,h,p,!1,_,j)}function Gs(l,h,p,_,j,$){if(!h)throw Error("Invalid event type");var Z=c(j)?!!j.capture:!!j,Je=ss(l);if(Je||(l[hi]=Je=new vt(l)),p=Je.add(h,p,_,Z,$),p.proxy)return p;if(_=fi(),p.proxy=_,_.src=l,_.listener=p,l.addEventListener)Ce||(j=Z),j===void 0&&(j=!1),l.addEventListener(h.toString(),_,j);else if(l.attachEvent)l.attachEvent(is(h.toString()),_);else if(l.addListener&&l.removeListener)l.addListener(_);else throw Error("addEventListener and attachEvent are unavailable.");return p}function fi(){function l(p){return h.call(l.src,l.listener,p)}const h=yr;return l}function Or(l,h,p,_,j){if(Array.isArray(h))for(var $=0;$<h.length;$++)Or(l,h[$],p,_,j);else _=c(_)?!!_.capture:!!_,p=nr(p),l&&l[Yt]?(l=l.i,h=String(h).toString(),h in l.g&&($=l.g[h],p=nt($,p,_,j),-1<p&&(_n($[p]),Array.prototype.splice.call($,p,1),$.length==0&&(delete l.g[h],l.h--)))):l&&(l=ss(l))&&(h=l.g[h.toString()],l=-1,h&&(l=nt(h,p,_,j)),(p=-1<l?h[l]:null)&&Dr(p))}function Dr(l){if(typeof l!="number"&&l&&!l.da){var h=l.src;if(h&&h[Yt])He(h.i,l);else{var p=l.type,_=l.proxy;h.removeEventListener?h.removeEventListener(p,_,l.capture):h.detachEvent?h.detachEvent(is(p),_):h.addListener&&h.removeListener&&h.removeListener(_),(p=ss(h))?(He(p,l),p.h==0&&(p.src=null,h[hi]=null)):_n(l)}}}function is(l){return l in rs?rs[l]:rs[l]="on"+l}function yr(l,h){if(l.da)l=!0;else{h=new $e(h,this);var p=l.listener,_=l.ha||l.src;l.fa&&Dr(l),l=p.call(_,h)}return l}function ss(l){return l=l[hi],l instanceof vt?l:null}var Bn="__closure_events_fn_"+(1e9*Math.random()>>>0);function nr(l){return typeof l=="function"?l:(l[Bn]||(l[Bn]=function(h){return l.handleEvent(h)}),l[Bn])}function St(){ve.call(this),this.i=new vt(this),this.M=this,this.F=null}C(St,ve),St.prototype[Yt]=!0,St.prototype.removeEventListener=function(l,h,p,_){Or(this,l,h,p,_)};function lt(l,h){var p,_=l.F;if(_)for(p=[];_;_=_.F)p.push(_);if(l=l.M,_=h.type||h,typeof h=="string")h=new _e(h,l);else if(h instanceof _e)h.target=h.target||l;else{var j=h;h=new _e(_,l),T(h,j)}if(j=!0,p)for(var $=p.length-1;0<=$;$--){var Z=h.g=p[$];j=dn(Z,_,!0,h)&&j}if(Z=h.g=l,j=dn(Z,_,!0,h)&&j,j=dn(Z,_,!1,h)&&j,p)for($=0;$<p.length;$++)Z=h.g=p[$],j=dn(Z,_,!1,h)&&j}St.prototype.N=function(){if(St.aa.N.call(this),this.i){var l=this.i,h;for(h in l.g){for(var p=l.g[h],_=0;_<p.length;_++)_n(p[_]);delete l.g[h],l.h--}}this.F=null},St.prototype.K=function(l,h,p,_){return this.i.add(String(l),h,!1,p,_)},St.prototype.L=function(l,h,p,_){return this.i.add(String(l),h,!0,p,_)};function dn(l,h,p,_){if(h=l.i.g[String(h)],!h)return!0;h=h.concat();for(var j=!0,$=0;$<h.length;++$){var Z=h[$];if(Z&&!Z.da&&Z.capture==p){var Je=Z.listener,Ut=Z.ha||Z.src;Z.fa&&He(l.i,Z),j=Je.call(Ut,_)!==!1&&j}}return j&&!_.defaultPrevented}function hn(l,h,p){if(typeof l=="function")p&&(l=m(l,p));else if(l&&typeof l.handleEvent=="function")l=m(l.handleEvent,l);else throw Error("Invalid listener argument");return 2147483647<Number(h)?-1:a.setTimeout(l,h||0)}function os(l){l.g=hn(()=>{l.g=null,l.i&&(l.i=!1,os(l))},l.l);const h=l.h;l.h=null,l.m.apply(null,h)}class Lr extends ve{constructor(h,p){super(),this.m=h,this.l=p,this.h=null,this.i=!1,this.g=null}j(h){this.h=arguments,this.g?this.i=!0:os(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function $n(l){ve.call(this),this.h=l,this.g={}}C($n,ve);var fn=[];function Mr(l){k(l.g,function(h,p){this.g.hasOwnProperty(p)&&Dr(h)},l),l.g={}}$n.prototype.N=function(){$n.aa.N.call(this),Mr(this)},$n.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var pi=a.JSON.stringify,H=a.JSON.parse,D=class{stringify(l){return a.JSON.stringify(l,void 0)}parse(l){return a.JSON.parse(l,void 0)}};function B(){}B.prototype.h=null;function K(l){return l.h||(l.h=l.i())}function U(){}var W={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function ce(){_e.call(this,"d")}C(ce,_e);function se(){_e.call(this,"c")}C(se,_e);var pe={},De=null;function qe(){return De=De||new St}pe.La="serverreachability";function Qe(l){_e.call(this,pe.La,l)}C(Qe,_e);function be(l){const h=qe();lt(h,new Qe(h))}pe.STAT_EVENT="statevent";function rt(l,h){_e.call(this,pe.STAT_EVENT,l),this.stat=h}C(rt,_e);function xe(l){const h=qe();lt(h,new rt(h,l))}pe.Ma="timingevent";function _t(l,h){_e.call(this,pe.Ma,l),this.size=h}C(_t,_e);function x(l,h){if(typeof l!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){l()},h)}function L(){this.g=!0}L.prototype.xa=function(){this.g=!1};function z(l,h,p,_,j,$){l.info(function(){if(l.g)if($)for(var Z="",Je=$.split("&"),Ut=0;Ut<Je.length;Ut++){var ze=Je[Ut].split("=");if(1<ze.length){var Zt=ze[0];ze=ze[1];var en=Zt.split("_");Z=2<=en.length&&en[1]=="type"?Z+(Zt+"="+ze+"&"):Z+(Zt+"=redacted&")}}else Z=null;else Z=$;return"XMLHTTP REQ ("+_+") [attempt "+j+"]: "+h+`
`+p+`
`+Z})}function q(l,h,p,_,j,$,Z){l.info(function(){return"XMLHTTP RESP ("+_+") [ attempt "+j+"]: "+h+`
`+p+`
`+$+" "+Z})}function ee(l,h,p,_){l.info(function(){return"XMLHTTP TEXT ("+h+"): "+fe(l,p)+(_?" "+_:"")})}function ae(l,h){l.info(function(){return"TIMEOUT: "+h})}L.prototype.info=function(){};function fe(l,h){if(!l.g)return h;if(!h)return null;try{var p=JSON.parse(h);if(p){for(l=0;l<p.length;l++)if(Array.isArray(p[l])){var _=p[l];if(!(2>_.length)){var j=_[1];if(Array.isArray(j)&&!(1>j.length)){var $=j[0];if($!="noop"&&$!="stop"&&$!="close")for(var Z=1;Z<j.length;Z++)j[Z]=""}}}}return pi(p)}catch{return h}}var J={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Te={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},le;function ue(){}C(ue,B),ue.prototype.g=function(){return new XMLHttpRequest},ue.prototype.i=function(){return{}},le=new ue;function Ae(l,h,p,_){this.j=l,this.i=h,this.l=p,this.R=_||1,this.U=new $n(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Ue}function Ue(){this.i=null,this.g="",this.h=!1}var Ke={},Le={};function It(l,h,p){l.L=1,l.v=nu(jr(h)),l.m=p,l.P=!0,dt(l,null)}function dt(l,h){l.F=Date.now(),rr(l),l.A=jr(l.v);var p=l.A,_=l.R;Array.isArray(_)||(_=[String(_)]),Cg(p.i,"t",_),l.C=0,p=l.j.J,l.h=new Ue,l.g=Hg(l.j,p?h:null,!l.m),0<l.O&&(l.M=new Lr(m(l.Y,l,l.g),l.O)),h=l.U,p=l.g,_=l.ca;var j="readystatechange";Array.isArray(j)||(j&&(fn[0]=j.toString()),j=fn);for(var $=0;$<j.length;$++){var Z=zn(p,j[$],_||h.handleEvent,!1,h.h||h);if(!Z)break;h.g[Z.key]=Z}h=l.H?g(l.H):{},l.m?(l.u||(l.u="POST"),h["Content-Type"]="application/x-www-form-urlencoded",l.g.ea(l.A,l.u,l.m,h)):(l.u="GET",l.g.ea(l.A,l.u,null,h)),be(),z(l.i,l.u,l.A,l.l,l.R,l.m)}Ae.prototype.ca=function(l){l=l.target;const h=this.M;h&&Fr(l)==3?h.j():this.Y(l)},Ae.prototype.Y=function(l){try{if(l==this.g)e:{const en=Fr(this.g);var h=this.g.Ba();const Js=this.g.Z();if(!(3>en)&&(en!=3||this.g&&(this.h.h||this.g.oa()||Og(this.g)))){this.J||en!=4||h==7||(h==8||0>=Js?be(3):be(2)),_r(this);var p=this.g.Z();this.X=p;t:if(mi(this)){var _=Og(this.g);l="";var j=_.length,$=Fr(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Hn(this),Xt(this);var Z="";break t}this.h.i=new a.TextDecoder}for(h=0;h<j;h++)this.h.h=!0,l+=this.h.i.decode(_[h],{stream:!($&&h==j-1)});_.length=0,this.h.g+=l,this.C=0,Z=this.h.g}else Z=this.g.oa();if(this.o=p==200,q(this.i,this.u,this.A,this.l,this.R,en,p),this.o){if(this.T&&!this.K){t:{if(this.g){var Je,Ut=this.g;if((Je=Ut.g?Ut.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!v(Je)){var ze=Je;break t}}ze=null}if(p=ze)ee(this.i,this.l,p,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,gi(this,p);else{this.o=!1,this.s=3,xe(12),Hn(this),Xt(this);break e}}if(this.P){p=!0;let ir;for(;!this.J&&this.C<Z.length;)if(ir=vr(this,Z),ir==Le){en==4&&(this.s=4,xe(14),p=!1),ee(this.i,this.l,null,"[Incomplete Response]");break}else if(ir==Ke){this.s=4,xe(15),ee(this.i,this.l,Z,"[Invalid Chunk]"),p=!1;break}else ee(this.i,this.l,ir,null),gi(this,ir);if(mi(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),en!=4||Z.length!=0||this.h.h||(this.s=1,xe(16),p=!1),this.o=this.o&&p,!p)ee(this.i,this.l,Z,"[Invalid Chunked Response]"),Hn(this),Xt(this);else if(0<Z.length&&!this.W){this.W=!0;var Zt=this.j;Zt.g==this&&Zt.ba&&!Zt.M&&(Zt.j.info("Great, no buffering proxy detected. Bytes received: "+Z.length),Xd(Zt),Zt.M=!0,xe(11))}}else ee(this.i,this.l,Z,null),gi(this,Z);en==4&&Hn(this),this.o&&!this.J&&(en==4?Ug(this.j,this):(this.o=!1,rr(this)))}else rI(this.g),p==400&&0<Z.indexOf("Unknown SID")?(this.s=3,xe(12)):(this.s=0,xe(13)),Hn(this),Xt(this)}}}catch{}finally{}};function mi(l){return l.g?l.u=="GET"&&l.L!=2&&l.j.Ca:!1}function vr(l,h){var p=l.C,_=h.indexOf(`
`,p);return _==-1?Le:(p=Number(h.substring(p,_)),isNaN(p)?Ke:(_+=1,_+p>h.length?Le:(h=h.slice(_,_+p),l.C=_+p,h)))}Ae.prototype.cancel=function(){this.J=!0,Hn(this)};function rr(l){l.S=Date.now()+l.I,Vr(l,l.I)}function Vr(l,h){if(l.B!=null)throw Error("WatchDog timer not null");l.B=x(m(l.ba,l),h)}function _r(l){l.B&&(a.clearTimeout(l.B),l.B=null)}Ae.prototype.ba=function(){this.B=null;const l=Date.now();0<=l-this.S?(ae(this.i,this.A),this.L!=2&&(be(),xe(17)),Hn(this),this.s=2,Xt(this)):Vr(this,this.S-l)};function Xt(l){l.j.G==0||l.J||Ug(l.j,l)}function Hn(l){_r(l);var h=l.M;h&&typeof h.ma=="function"&&h.ma(),l.M=null,Mr(l.U),l.g&&(h=l.g,l.g=null,h.abort(),h.ma())}function gi(l,h){try{var p=l.j;if(p.G!=0&&(p.g==l||Xe(p.h,l))){if(!l.K&&Xe(p.h,l)&&p.G==3){try{var _=p.Da.g.parse(h)}catch{_=null}if(Array.isArray(_)&&_.length==3){var j=_;if(j[0]==0){e:if(!p.u){if(p.g)if(p.g.F+3e3<l.F)au(p),su(p);else break e;Yd(p),xe(18)}}else p.za=j[1],0<p.za-p.T&&37500>j[2]&&p.F&&p.v==0&&!p.C&&(p.C=x(m(p.Za,p),6e3));if(1>=Jt(p.h)&&p.ca){try{p.ca()}catch{}p.ca=void 0}}else ls(p,11)}else if((l.K||p.g==l)&&au(p),!v(h))for(j=p.Da.g.parse(h),h=0;h<j.length;h++){let ze=j[h];if(p.T=ze[0],ze=ze[1],p.G==2)if(ze[0]=="c"){p.K=ze[1],p.ia=ze[2];const Zt=ze[3];Zt!=null&&(p.la=Zt,p.j.info("VER="+p.la));const en=ze[4];en!=null&&(p.Aa=en,p.j.info("SVER="+p.Aa));const Js=ze[5];Js!=null&&typeof Js=="number"&&0<Js&&(_=1.5*Js,p.L=_,p.j.info("backChannelRequestTimeoutMs_="+_)),_=p;const ir=l.g;if(ir){const uu=ir.g?ir.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(uu){var $=_.h;$.g||uu.indexOf("spdy")==-1&&uu.indexOf("quic")==-1&&uu.indexOf("h2")==-1||($.j=$.l,$.g=new Set,$.h&&(An($,$.h),$.h=null))}if(_.D){const Jd=ir.g?ir.g.getResponseHeader("X-HTTP-Session-Id"):null;Jd&&(_.ya=Jd,st(_.I,_.D,Jd))}}p.G=3,p.l&&p.l.ua(),p.ba&&(p.R=Date.now()-l.F,p.j.info("Handshake RTT: "+p.R+"ms")),_=p;var Z=l;if(_.qa=$g(_,_.J?_.ia:null,_.W),Z.K){sa(_.h,Z);var Je=Z,Ut=_.L;Ut&&(Je.I=Ut),Je.B&&(_r(Je),rr(Je)),_.g=Z}else jg(_);0<p.i.length&&ou(p)}else ze[0]!="stop"&&ze[0]!="close"||ls(p,7);else p.G==3&&(ze[0]=="stop"||ze[0]=="close"?ze[0]=="stop"?ls(p,7):Qd(p):ze[0]!="noop"&&p.l&&p.l.ta(ze),p.v=0)}}be(4)}catch{}}var Qs=class{constructor(l,h){this.g=l,this.map=h}};function Ie(l){this.l=l||10,a.PerformanceNavigationTiming?(l=a.performance.getEntriesByType("navigation"),l=0<l.length&&(l[0].nextHopProtocol=="hq"||l[0].nextHopProtocol=="h2")):l=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=l?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function it(l){return l.h?!0:l.g?l.g.size>=l.j:!1}function Jt(l){return l.h?1:l.g?l.g.size:0}function Xe(l,h){return l.h?l.h==h:l.g?l.g.has(h):!1}function An(l,h){l.g?l.g.add(h):l.h=h}function sa(l,h){l.h&&l.h==h?l.h=null:l.g&&l.g.has(h)&&l.g.delete(h)}Ie.prototype.cancel=function(){if(this.i=Zl(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const l of this.g.values())l.cancel();this.g.clear()}};function Zl(l){if(l.h!=null)return l.i.concat(l.h.D);if(l.g!=null&&l.g.size!==0){let h=l.i;for(const p of l.g.values())h=h.concat(p.D);return h}return A(l.i)}function BS(l){if(l.V&&typeof l.V=="function")return l.V();if(typeof Map<"u"&&l instanceof Map||typeof Set<"u"&&l instanceof Set)return Array.from(l.values());if(typeof l=="string")return l.split("");if(u(l)){for(var h=[],p=l.length,_=0;_<p;_++)h.push(l[_]);return h}h=[],p=0;for(_ in l)h[p++]=l[_];return h}function $S(l){if(l.na&&typeof l.na=="function")return l.na();if(!l.V||typeof l.V!="function"){if(typeof Map<"u"&&l instanceof Map)return Array.from(l.keys());if(!(typeof Set<"u"&&l instanceof Set)){if(u(l)||typeof l=="string"){var h=[];l=l.length;for(var p=0;p<l;p++)h.push(p);return h}h=[],p=0;for(const _ in l)h[p++]=_;return h}}}function wg(l,h){if(l.forEach&&typeof l.forEach=="function")l.forEach(h,void 0);else if(u(l)||typeof l=="string")Array.prototype.forEach.call(l,h,void 0);else for(var p=$S(l),_=BS(l),j=_.length,$=0;$<j;$++)h.call(void 0,_[$],p&&p[$],l)}var Eg=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function HS(l,h){if(l){l=l.split("&");for(var p=0;p<l.length;p++){var _=l[p].indexOf("="),j=null;if(0<=_){var $=l[p].substring(0,_);j=l[p].substring(_+1)}else $=l[p];h($,j?decodeURIComponent(j.replace(/\+/g," ")):"")}}}function as(l){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,l instanceof as){this.h=l.h,eu(this,l.j),this.o=l.o,this.g=l.g,tu(this,l.s),this.l=l.l;var h=l.i,p=new la;p.i=h.i,h.g&&(p.g=new Map(h.g),p.h=h.h),Tg(this,p),this.m=l.m}else l&&(h=String(l).match(Eg))?(this.h=!1,eu(this,h[1]||"",!0),this.o=oa(h[2]||""),this.g=oa(h[3]||"",!0),tu(this,h[4]),this.l=oa(h[5]||"",!0),Tg(this,h[6]||"",!0),this.m=oa(h[7]||"")):(this.h=!1,this.i=new la(null,this.h))}as.prototype.toString=function(){var l=[],h=this.j;h&&l.push(aa(h,Sg,!0),":");var p=this.g;return(p||h=="file")&&(l.push("//"),(h=this.o)&&l.push(aa(h,Sg,!0),"@"),l.push(encodeURIComponent(String(p)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),p=this.s,p!=null&&l.push(":",String(p))),(p=this.l)&&(this.g&&p.charAt(0)!="/"&&l.push("/"),l.push(aa(p,p.charAt(0)=="/"?KS:qS,!0))),(p=this.i.toString())&&l.push("?",p),(p=this.m)&&l.push("#",aa(p,QS)),l.join("")};function jr(l){return new as(l)}function eu(l,h,p){l.j=p?oa(h,!0):h,l.j&&(l.j=l.j.replace(/:$/,""))}function tu(l,h){if(h){if(h=Number(h),isNaN(h)||0>h)throw Error("Bad port number "+h);l.s=h}else l.s=null}function Tg(l,h,p){h instanceof la?(l.i=h,YS(l.i,l.h)):(p||(h=aa(h,GS)),l.i=new la(h,l.h))}function st(l,h,p){l.i.set(h,p)}function nu(l){return st(l,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),l}function oa(l,h){return l?h?decodeURI(l.replace(/%25/g,"%2525")):decodeURIComponent(l):""}function aa(l,h,p){return typeof l=="string"?(l=encodeURI(l).replace(h,WS),p&&(l=l.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),l):null}function WS(l){return l=l.charCodeAt(0),"%"+(l>>4&15).toString(16)+(l&15).toString(16)}var Sg=/[#\/\?@]/g,qS=/[#\?:]/g,KS=/[#\?]/g,GS=/[#\?@]/g,QS=/#/g;function la(l,h){this.h=this.g=null,this.i=l||null,this.j=!!h}function yi(l){l.g||(l.g=new Map,l.h=0,l.i&&HS(l.i,function(h,p){l.add(decodeURIComponent(h.replace(/\+/g," ")),p)}))}t=la.prototype,t.add=function(l,h){yi(this),this.i=null,l=Ys(this,l);var p=this.g.get(l);return p||this.g.set(l,p=[]),p.push(h),this.h+=1,this};function Ig(l,h){yi(l),h=Ys(l,h),l.g.has(h)&&(l.i=null,l.h-=l.g.get(h).length,l.g.delete(h))}function Pg(l,h){return yi(l),h=Ys(l,h),l.g.has(h)}t.forEach=function(l,h){yi(this),this.g.forEach(function(p,_){p.forEach(function(j){l.call(h,j,_,this)},this)},this)},t.na=function(){yi(this);const l=Array.from(this.g.values()),h=Array.from(this.g.keys()),p=[];for(let _=0;_<h.length;_++){const j=l[_];for(let $=0;$<j.length;$++)p.push(h[_])}return p},t.V=function(l){yi(this);let h=[];if(typeof l=="string")Pg(this,l)&&(h=h.concat(this.g.get(Ys(this,l))));else{l=Array.from(this.g.values());for(let p=0;p<l.length;p++)h=h.concat(l[p])}return h},t.set=function(l,h){return yi(this),this.i=null,l=Ys(this,l),Pg(this,l)&&(this.h-=this.g.get(l).length),this.g.set(l,[h]),this.h+=1,this},t.get=function(l,h){return l?(l=this.V(l),0<l.length?String(l[0]):h):h};function Cg(l,h,p){Ig(l,h),0<p.length&&(l.i=null,l.g.set(Ys(l,h),A(p)),l.h+=p.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const l=[],h=Array.from(this.g.keys());for(var p=0;p<h.length;p++){var _=h[p];const $=encodeURIComponent(String(_)),Z=this.V(_);for(_=0;_<Z.length;_++){var j=$;Z[_]!==""&&(j+="="+encodeURIComponent(String(Z[_]))),l.push(j)}}return this.i=l.join("&")};function Ys(l,h){return h=String(h),l.j&&(h=h.toLowerCase()),h}function YS(l,h){h&&!l.j&&(yi(l),l.i=null,l.g.forEach(function(p,_){var j=_.toLowerCase();_!=j&&(Ig(this,_),Cg(this,j,p))},l)),l.j=h}function XS(l,h){const p=new L;if(a.Image){const _=new Image;_.onload=E(vi,p,"TestLoadImage: loaded",!0,h,_),_.onerror=E(vi,p,"TestLoadImage: error",!1,h,_),_.onabort=E(vi,p,"TestLoadImage: abort",!1,h,_),_.ontimeout=E(vi,p,"TestLoadImage: timeout",!1,h,_),a.setTimeout(function(){_.ontimeout&&_.ontimeout()},1e4),_.src=l}else h(!1)}function JS(l,h){const p=new L,_=new AbortController,j=setTimeout(()=>{_.abort(),vi(p,"TestPingServer: timeout",!1,h)},1e4);fetch(l,{signal:_.signal}).then($=>{clearTimeout(j),$.ok?vi(p,"TestPingServer: ok",!0,h):vi(p,"TestPingServer: server error",!1,h)}).catch(()=>{clearTimeout(j),vi(p,"TestPingServer: error",!1,h)})}function vi(l,h,p,_,j){try{j&&(j.onload=null,j.onerror=null,j.onabort=null,j.ontimeout=null),_(p)}catch{}}function ZS(){this.g=new D}function eI(l,h,p){const _=p||"";try{wg(l,function(j,$){let Z=j;c(j)&&(Z=pi(j)),h.push(_+$+"="+encodeURIComponent(Z))})}catch(j){throw h.push(_+"type="+encodeURIComponent("_badmap")),j}}function ua(l){this.l=l.Ub||null,this.j=l.eb||!1}C(ua,B),ua.prototype.g=function(){return new ru(this.l,this.j)},ua.prototype.i=function(l){return function(){return l}}({});function ru(l,h){St.call(this),this.D=l,this.o=h,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}C(ru,St),t=ru.prototype,t.open=function(l,h){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=l,this.A=h,this.readyState=1,da(this)},t.send=function(l){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const h={headers:this.u,method:this.B,credentials:this.m,cache:void 0};l&&(h.body=l),(this.D||a).fetch(new Request(this.A,h)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,ca(this)),this.readyState=0},t.Sa=function(l){if(this.g&&(this.l=l,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=l.headers,this.readyState=2,da(this)),this.g&&(this.readyState=3,da(this),this.g)))if(this.responseType==="arraybuffer")l.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in l){if(this.j=l.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Rg(this)}else l.text().then(this.Ra.bind(this),this.ga.bind(this))};function Rg(l){l.j.read().then(l.Pa.bind(l)).catch(l.ga.bind(l))}t.Pa=function(l){if(this.g){if(this.o&&l.value)this.response.push(l.value);else if(!this.o){var h=l.value?l.value:new Uint8Array(0);(h=this.v.decode(h,{stream:!l.done}))&&(this.response=this.responseText+=h)}l.done?ca(this):da(this),this.readyState==3&&Rg(this)}},t.Ra=function(l){this.g&&(this.response=this.responseText=l,ca(this))},t.Qa=function(l){this.g&&(this.response=l,ca(this))},t.ga=function(){this.g&&ca(this)};function ca(l){l.readyState=4,l.l=null,l.j=null,l.v=null,da(l)}t.setRequestHeader=function(l,h){this.u.append(l,h)},t.getResponseHeader=function(l){return this.h&&this.h.get(l.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const l=[],h=this.h.entries();for(var p=h.next();!p.done;)p=p.value,l.push(p[0]+": "+p[1]),p=h.next();return l.join(`\r
`)};function da(l){l.onreadystatechange&&l.onreadystatechange.call(l)}Object.defineProperty(ru.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(l){this.m=l?"include":"same-origin"}});function Ag(l){let h="";return k(l,function(p,_){h+=_,h+=":",h+=p,h+=`\r
`}),h}function Gd(l,h,p){e:{for(_ in p){var _=!1;break e}_=!0}_||(p=Ag(p),typeof l=="string"?p!=null&&encodeURIComponent(String(p)):st(l,h,p))}function wt(l){St.call(this),this.headers=new Map,this.o=l||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}C(wt,St);var tI=/^https?$/i,nI=["POST","PUT"];t=wt.prototype,t.Ha=function(l){this.J=l},t.ea=function(l,h,p,_){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+l);h=h?h.toUpperCase():"GET",this.D=l,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():le.g(),this.v=this.o?K(this.o):K(le),this.g.onreadystatechange=m(this.Ea,this);try{this.B=!0,this.g.open(h,String(l),!0),this.B=!1}catch($){kg(this,$);return}if(l=p||"",p=new Map(this.headers),_)if(Object.getPrototypeOf(_)===Object.prototype)for(var j in _)p.set(j,_[j]);else if(typeof _.keys=="function"&&typeof _.get=="function")for(const $ of _.keys())p.set($,_.get($));else throw Error("Unknown input type for opt_headers: "+String(_));_=Array.from(p.keys()).find($=>$.toLowerCase()=="content-type"),j=a.FormData&&l instanceof a.FormData,!(0<=Array.prototype.indexOf.call(nI,h,void 0))||_||j||p.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[$,Z]of p)this.g.setRequestHeader($,Z);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Ng(this),this.u=!0,this.g.send(l),this.u=!1}catch($){kg(this,$)}};function kg(l,h){l.h=!1,l.g&&(l.j=!0,l.g.abort(),l.j=!1),l.l=h,l.m=5,bg(l),iu(l)}function bg(l){l.A||(l.A=!0,lt(l,"complete"),lt(l,"error"))}t.abort=function(l){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=l||7,lt(this,"complete"),lt(this,"abort"),iu(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),iu(this,!0)),wt.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?xg(this):this.bb())},t.bb=function(){xg(this)};function xg(l){if(l.h&&typeof o<"u"&&(!l.v[1]||Fr(l)!=4||l.Z()!=2)){if(l.u&&Fr(l)==4)hn(l.Ea,0,l);else if(lt(l,"readystatechange"),Fr(l)==4){l.h=!1;try{const Z=l.Z();e:switch(Z){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var h=!0;break e;default:h=!1}var p;if(!(p=h)){var _;if(_=Z===0){var j=String(l.D).match(Eg)[1]||null;!j&&a.self&&a.self.location&&(j=a.self.location.protocol.slice(0,-1)),_=!tI.test(j?j.toLowerCase():"")}p=_}if(p)lt(l,"complete"),lt(l,"success");else{l.m=6;try{var $=2<Fr(l)?l.g.statusText:""}catch{$=""}l.l=$+" ["+l.Z()+"]",bg(l)}}finally{iu(l)}}}}function iu(l,h){if(l.g){Ng(l);const p=l.g,_=l.v[0]?()=>{}:null;l.g=null,l.v=null,h||lt(l,"ready");try{p.onreadystatechange=_}catch{}}}function Ng(l){l.I&&(a.clearTimeout(l.I),l.I=null)}t.isActive=function(){return!!this.g};function Fr(l){return l.g?l.g.readyState:0}t.Z=function(){try{return 2<Fr(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(l){if(this.g){var h=this.g.responseText;return l&&h.indexOf(l)==0&&(h=h.substring(l.length)),H(h)}};function Og(l){try{if(!l.g)return null;if("response"in l.g)return l.g.response;switch(l.H){case"":case"text":return l.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in l.g)return l.g.mozResponseArrayBuffer}return null}catch{return null}}function rI(l){const h={};l=(l.g&&2<=Fr(l)&&l.g.getAllResponseHeaders()||"").split(`\r
`);for(let _=0;_<l.length;_++){if(v(l[_]))continue;var p=b(l[_]);const j=p[0];if(p=p[1],typeof p!="string")continue;p=p.trim();const $=h[j]||[];h[j]=$,$.push(p)}S(h,function(_){return _.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function ha(l,h,p){return p&&p.internalChannelParams&&p.internalChannelParams[l]||h}function Dg(l){this.Aa=0,this.i=[],this.j=new L,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=ha("failFast",!1,l),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=ha("baseRetryDelayMs",5e3,l),this.cb=ha("retryDelaySeedMs",1e4,l),this.Wa=ha("forwardChannelMaxRetries",2,l),this.wa=ha("forwardChannelRequestTimeoutMs",2e4,l),this.pa=l&&l.xmlHttpFactory||void 0,this.Xa=l&&l.Tb||void 0,this.Ca=l&&l.useFetchStreams||!1,this.L=void 0,this.J=l&&l.supportsCrossDomainXhr||!1,this.K="",this.h=new Ie(l&&l.concurrentRequestLimit),this.Da=new ZS,this.P=l&&l.fastHandshake||!1,this.O=l&&l.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=l&&l.Rb||!1,l&&l.xa&&this.j.xa(),l&&l.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&l&&l.detectBufferingProxy||!1,this.ja=void 0,l&&l.longPollingTimeout&&0<l.longPollingTimeout&&(this.ja=l.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=Dg.prototype,t.la=8,t.G=1,t.connect=function(l,h,p,_){xe(0),this.W=l,this.H=h||{},p&&_!==void 0&&(this.H.OSID=p,this.H.OAID=_),this.F=this.X,this.I=$g(this,null,this.W),ou(this)};function Qd(l){if(Lg(l),l.G==3){var h=l.U++,p=jr(l.I);if(st(p,"SID",l.K),st(p,"RID",h),st(p,"TYPE","terminate"),fa(l,p),h=new Ae(l,l.j,h),h.L=2,h.v=nu(jr(p)),p=!1,a.navigator&&a.navigator.sendBeacon)try{p=a.navigator.sendBeacon(h.v.toString(),"")}catch{}!p&&a.Image&&(new Image().src=h.v,p=!0),p||(h.g=Hg(h.j,null),h.g.ea(h.v)),h.F=Date.now(),rr(h)}Bg(l)}function su(l){l.g&&(Xd(l),l.g.cancel(),l.g=null)}function Lg(l){su(l),l.u&&(a.clearTimeout(l.u),l.u=null),au(l),l.h.cancel(),l.s&&(typeof l.s=="number"&&a.clearTimeout(l.s),l.s=null)}function ou(l){if(!it(l.h)&&!l.s){l.s=!0;var h=l.Ga;ge||te(),X||(ge(),X=!0),re.add(h,l),l.B=0}}function iI(l,h){return Jt(l.h)>=l.h.j-(l.s?1:0)?!1:l.s?(l.i=h.D.concat(l.i),!0):l.G==1||l.G==2||l.B>=(l.Va?0:l.Wa)?!1:(l.s=x(m(l.Ga,l,h),zg(l,l.B)),l.B++,!0)}t.Ga=function(l){if(this.s)if(this.s=null,this.G==1){if(!l){this.U=Math.floor(1e5*Math.random()),l=this.U++;const j=new Ae(this,this.j,l);let $=this.o;if(this.S&&($?($=g($),T($,this.S)):$=this.S),this.m!==null||this.O||(j.H=$,$=null),this.P)e:{for(var h=0,p=0;p<this.i.length;p++){t:{var _=this.i[p];if("__data__"in _.map&&(_=_.map.__data__,typeof _=="string")){_=_.length;break t}_=void 0}if(_===void 0)break;if(h+=_,4096<h){h=p;break e}if(h===4096||p===this.i.length-1){h=p+1;break e}}h=1e3}else h=1e3;h=Vg(this,j,h),p=jr(this.I),st(p,"RID",l),st(p,"CVER",22),this.D&&st(p,"X-HTTP-Session-Id",this.D),fa(this,p),$&&(this.O?h="headers="+encodeURIComponent(String(Ag($)))+"&"+h:this.m&&Gd(p,this.m,$)),An(this.h,j),this.Ua&&st(p,"TYPE","init"),this.P?(st(p,"$req",h),st(p,"SID","null"),j.T=!0,It(j,p,null)):It(j,p,h),this.G=2}}else this.G==3&&(l?Mg(this,l):this.i.length==0||it(this.h)||Mg(this))};function Mg(l,h){var p;h?p=h.l:p=l.U++;const _=jr(l.I);st(_,"SID",l.K),st(_,"RID",p),st(_,"AID",l.T),fa(l,_),l.m&&l.o&&Gd(_,l.m,l.o),p=new Ae(l,l.j,p,l.B+1),l.m===null&&(p.H=l.o),h&&(l.i=h.D.concat(l.i)),h=Vg(l,p,1e3),p.I=Math.round(.5*l.wa)+Math.round(.5*l.wa*Math.random()),An(l.h,p),It(p,_,h)}function fa(l,h){l.H&&k(l.H,function(p,_){st(h,_,p)}),l.l&&wg({},function(p,_){st(h,_,p)})}function Vg(l,h,p){p=Math.min(l.i.length,p);var _=l.l?m(l.l.Na,l.l,l):null;e:{var j=l.i;let $=-1;for(;;){const Z=["count="+p];$==-1?0<p?($=j[0].g,Z.push("ofs="+$)):$=0:Z.push("ofs="+$);let Je=!0;for(let Ut=0;Ut<p;Ut++){let ze=j[Ut].g;const Zt=j[Ut].map;if(ze-=$,0>ze)$=Math.max(0,j[Ut].g-100),Je=!1;else try{eI(Zt,Z,"req"+ze+"_")}catch{_&&_(Zt)}}if(Je){_=Z.join("&");break e}}}return l=l.i.splice(0,p),h.D=l,_}function jg(l){if(!l.g&&!l.u){l.Y=1;var h=l.Fa;ge||te(),X||(ge(),X=!0),re.add(h,l),l.v=0}}function Yd(l){return l.g||l.u||3<=l.v?!1:(l.Y++,l.u=x(m(l.Fa,l),zg(l,l.v)),l.v++,!0)}t.Fa=function(){if(this.u=null,Fg(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var l=2*this.R;this.j.info("BP detection timer enabled: "+l),this.A=x(m(this.ab,this),l)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,xe(10),su(this),Fg(this))};function Xd(l){l.A!=null&&(a.clearTimeout(l.A),l.A=null)}function Fg(l){l.g=new Ae(l,l.j,"rpc",l.Y),l.m===null&&(l.g.H=l.o),l.g.O=0;var h=jr(l.qa);st(h,"RID","rpc"),st(h,"SID",l.K),st(h,"AID",l.T),st(h,"CI",l.F?"0":"1"),!l.F&&l.ja&&st(h,"TO",l.ja),st(h,"TYPE","xmlhttp"),fa(l,h),l.m&&l.o&&Gd(h,l.m,l.o),l.L&&(l.g.I=l.L);var p=l.g;l=l.ia,p.L=1,p.v=nu(jr(h)),p.m=null,p.P=!0,dt(p,l)}t.Za=function(){this.C!=null&&(this.C=null,su(this),Yd(this),xe(19))};function au(l){l.C!=null&&(a.clearTimeout(l.C),l.C=null)}function Ug(l,h){var p=null;if(l.g==h){au(l),Xd(l),l.g=null;var _=2}else if(Xe(l.h,h))p=h.D,sa(l.h,h),_=1;else return;if(l.G!=0){if(h.o)if(_==1){p=h.m?h.m.length:0,h=Date.now()-h.F;var j=l.B;_=qe(),lt(_,new _t(_,p)),ou(l)}else jg(l);else if(j=h.s,j==3||j==0&&0<h.X||!(_==1&&iI(l,h)||_==2&&Yd(l)))switch(p&&0<p.length&&(h=l.h,h.i=h.i.concat(p)),j){case 1:ls(l,5);break;case 4:ls(l,10);break;case 3:ls(l,6);break;default:ls(l,2)}}}function zg(l,h){let p=l.Ta+Math.floor(Math.random()*l.cb);return l.isActive()||(p*=2),p*h}function ls(l,h){if(l.j.info("Error code "+h),h==2){var p=m(l.fb,l),_=l.Xa;const j=!_;_=new as(_||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||eu(_,"https"),nu(_),j?XS(_.toString(),p):JS(_.toString(),p)}else xe(2);l.G=0,l.l&&l.l.sa(h),Bg(l),Lg(l)}t.fb=function(l){l?(this.j.info("Successfully pinged google.com"),xe(2)):(this.j.info("Failed to ping google.com"),xe(1))};function Bg(l){if(l.G=0,l.ka=[],l.l){const h=Zl(l.h);(h.length!=0||l.i.length!=0)&&(O(l.ka,h),O(l.ka,l.i),l.h.i.length=0,A(l.i),l.i.length=0),l.l.ra()}}function $g(l,h,p){var _=p instanceof as?jr(p):new as(p);if(_.g!="")h&&(_.g=h+"."+_.g),tu(_,_.s);else{var j=a.location;_=j.protocol,h=h?h+"."+j.hostname:j.hostname,j=+j.port;var $=new as(null);_&&eu($,_),h&&($.g=h),j&&tu($,j),p&&($.l=p),_=$}return p=l.D,h=l.ya,p&&h&&st(_,p,h),st(_,"VER",l.la),fa(l,_),_}function Hg(l,h,p){if(h&&!l.J)throw Error("Can't create secondary domain capable XhrIo object.");return h=l.Ca&&!l.pa?new wt(new ua({eb:p})):new wt(l.pa),h.Ha(l.J),h}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function Wg(){}t=Wg.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function lu(){}lu.prototype.g=function(l,h){return new kn(l,h)};function kn(l,h){St.call(this),this.g=new Dg(h),this.l=l,this.h=h&&h.messageUrlParams||null,l=h&&h.messageHeaders||null,h&&h.clientProtocolHeaderRequired&&(l?l["X-Client-Protocol"]="webchannel":l={"X-Client-Protocol":"webchannel"}),this.g.o=l,l=h&&h.initMessageHeaders||null,h&&h.messageContentType&&(l?l["X-WebChannel-Content-Type"]=h.messageContentType:l={"X-WebChannel-Content-Type":h.messageContentType}),h&&h.va&&(l?l["X-WebChannel-Client-Profile"]=h.va:l={"X-WebChannel-Client-Profile":h.va}),this.g.S=l,(l=h&&h.Sb)&&!v(l)&&(this.g.m=l),this.v=h&&h.supportsCrossDomainXhr||!1,this.u=h&&h.sendRawJson||!1,(h=h&&h.httpSessionIdParam)&&!v(h)&&(this.g.D=h,l=this.h,l!==null&&h in l&&(l=this.h,h in l&&delete l[h])),this.j=new Xs(this)}C(kn,St),kn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},kn.prototype.close=function(){Qd(this.g)},kn.prototype.o=function(l){var h=this.g;if(typeof l=="string"){var p={};p.__data__=l,l=p}else this.u&&(p={},p.__data__=pi(l),l=p);h.i.push(new Qs(h.Ya++,l)),h.G==3&&ou(h)},kn.prototype.N=function(){this.g.l=null,delete this.j,Qd(this.g),delete this.g,kn.aa.N.call(this)};function qg(l){ce.call(this),l.__headers__&&(this.headers=l.__headers__,this.statusCode=l.__status__,delete l.__headers__,delete l.__status__);var h=l.__sm__;if(h){e:{for(const p in h){l=p;break e}l=void 0}(this.i=l)&&(l=this.i,h=h!==null&&l in h?h[l]:void 0),this.data=h}else this.data=l}C(qg,ce);function Kg(){se.call(this),this.status=1}C(Kg,se);function Xs(l){this.g=l}C(Xs,Wg),Xs.prototype.ua=function(){lt(this.g,"a")},Xs.prototype.ta=function(l){lt(this.g,new qg(l))},Xs.prototype.sa=function(l){lt(this.g,new Kg)},Xs.prototype.ra=function(){lt(this.g,"b")},lu.prototype.createWebChannel=lu.prototype.g,kn.prototype.send=kn.prototype.o,kn.prototype.open=kn.prototype.m,kn.prototype.close=kn.prototype.close,y1=function(){return new lu},g1=function(){return qe()},m1=pe,Zf={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},J.NO_ERROR=0,J.TIMEOUT=8,J.HTTP_ERROR=6,Qu=J,Te.COMPLETE="complete",p1=Te,U.EventType=W,W.OPEN="a",W.CLOSE="b",W.ERROR="c",W.MESSAGE="d",St.prototype.listen=St.prototype.K,Oa=U,f1=ua,wt.prototype.listenOnce=wt.prototype.L,wt.prototype.getLastError=wt.prototype.Ka,wt.prototype.getLastErrorCode=wt.prototype.Ba,wt.prototype.getStatus=wt.prototype.Z,wt.prototype.getResponseJson=wt.prototype.Oa,wt.prototype.getResponseText=wt.prototype.oa,wt.prototype.send=wt.prototype.ea,wt.prototype.setWithCredentials=wt.prototype.Ha,h1=wt}).apply(typeof Ru<"u"?Ru:typeof self<"u"?self:typeof window<"u"?window:{});const Bv="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sn{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}sn.UNAUTHENTICATED=new sn(null),sn.GOOGLE_CREDENTIALS=new sn("google-credentials-uid"),sn.FIRST_PARTY=new sn("first-party-uid"),sn.MOCK_USER=new sn("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ea="10.12.3";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ns=new Pm("@firebase/firestore");function Pa(){return Ns.logLevel}function ie(t,...e){if(Ns.logLevel<=Oe.DEBUG){const n=e.map(Am);Ns.debug(`Firestore (${ea}): ${t}`,...n)}}function ni(t,...e){if(Ns.logLevel<=Oe.ERROR){const n=e.map(Am);Ns.error(`Firestore (${ea}): ${t}`,...n)}}function Fo(t,...e){if(Ns.logLevel<=Oe.WARN){const n=e.map(Am);Ns.warn(`Firestore (${ea}): ${t}`,...n)}}function Am(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ee(t="Unexpected state"){const e=`FIRESTORE (${ea}) INTERNAL ASSERTION FAILED: `+t;throw ni(e),new Error(e)}function tt(t,e){t||Ee()}function Pe(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Q={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class de extends ui{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wi{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class v1{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class wx{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(sn.UNAUTHENTICATED))}shutdown(){}}class Ex{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class Tx{constructor(e){this.t=e,this.currentUser=sn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){let r=this.i;const i=u=>this.i!==r?(r=this.i,n(u)):Promise.resolve();let s=new Wi;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new Wi,e.enqueueRetryable(()=>i(this.currentUser))};const o=()=>{const u=s;e.enqueueRetryable(async()=>{await u.promise,await i(this.currentUser)})},a=u=>{ie("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=u,this.auth.addAuthTokenListener(this.o),o()};this.t.onInit(u=>a(u)),setTimeout(()=>{if(!this.auth){const u=this.t.getImmediate({optional:!0});u?a(u):(ie("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new Wi)}},0),o()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(ie("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(tt(typeof r.accessToken=="string"),new v1(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return tt(e===null||typeof e=="string"),new sn(e)}}class Sx{constructor(e,n,r){this.l=e,this.h=n,this.P=r,this.type="FirstParty",this.user=sn.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class Ix{constructor(e,n,r){this.l=e,this.h=n,this.P=r}getToken(){return Promise.resolve(new Sx(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable(()=>n(sn.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class Px{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class Cx{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,n){const r=s=>{s.error!=null&&ie("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const o=s.token!==this.R;return this.R=s.token,ie("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>r(s))};const i=s=>{ie("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.appCheck.addTokenListener(this.o)};this.A.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){const s=this.A.getImmediate({optional:!0});s?i(s):ie("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(tt(typeof n.token=="string"),this.R=n.token,new Px(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rx(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _1{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const i=Rx(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<n&&(r+=e.charAt(i[s]%e.length))}return r}}function We(t,e){return t<e?-1:t>e?1:0}function Uo(t,e,n){return t.length===e.length&&t.every((r,i)=>n(r,e[i]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dt{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new de(Q.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new de(Q.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new de(Q.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new de(Q.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Dt.fromMillis(Date.now())}static fromDate(e){return Dt.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*n));return new Dt(n,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?We(this.nanoseconds,e.nanoseconds):We(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Se{constructor(e){this.timestamp=e}static fromTimestamp(e){return new Se(e)}static min(){return new Se(new Dt(0,0))}static max(){return new Se(new Dt(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class El{constructor(e,n,r){n===void 0?n=0:n>e.length&&Ee(),r===void 0?r=e.length-n:r>e.length-n&&Ee(),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return El.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof El?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let i=0;i<r;i++){const s=e.get(i),o=n.get(i);if(s<o)return-1;if(s>o)return 1}return e.length<n.length?-1:e.length>n.length?1:0}}class Tt extends El{construct(e,n,r){return new Tt(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new de(Q.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(i=>i.length>0))}return new Tt(n)}static emptyPath(){return new Tt([])}}const Ax=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Ht extends El{construct(e,n,r){return new Ht(e,n,r)}static isValidIdentifier(e){return Ax.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Ht.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new Ht(["__name__"])}static fromServerFormat(e){const n=[];let r="",i=0;const s=()=>{if(r.length===0)throw new de(Q.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let o=!1;for(;i<e.length;){const a=e[i];if(a==="\\"){if(i+1===e.length)throw new de(Q.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const u=e[i+1];if(u!=="\\"&&u!=="."&&u!=="`")throw new de(Q.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=u,i+=2}else a==="`"?(o=!o,i++):a!=="."||o?(r+=a,i++):(s(),i++)}if(s(),o)throw new de(Q.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Ht(n)}static emptyPath(){return new Ht([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class he{constructor(e){this.path=e}static fromPath(e){return new he(Tt.fromString(e))}static fromName(e){return new he(Tt.fromString(e).popFirst(5))}static empty(){return new he(Tt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Tt.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return Tt.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new he(new Tt(e.slice()))}}function kx(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,i=Se.fromTimestamp(r===1e9?new Dt(n+1,0):new Dt(n,r));return new Qi(i,he.empty(),e)}function bx(t){return new Qi(t.readTime,t.key,-1)}class Qi{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new Qi(Se.min(),he.empty(),-1)}static max(){return new Qi(Se.max(),he.empty(),-1)}}function xx(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=he.comparator(t.documentKey,e.documentKey),n!==0?n:We(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nx="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class Ox{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function zl(t){if(t.code!==Q.FAILED_PRECONDITION||t.message!==Nx)throw t;ie("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&Ee(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new G((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(n,s).next(r,i)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof G?n:G.resolve(n)}catch(n){return G.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):G.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):G.reject(n)}static resolve(e){return new G((n,r)=>{n(e)})}static reject(e){return new G((n,r)=>{r(e)})}static waitFor(e){return new G((n,r)=>{let i=0,s=0,o=!1;e.forEach(a=>{++i,a.next(()=>{++s,o&&s===i&&n()},u=>r(u))}),o=!0,s===i&&n()})}static or(e){let n=G.resolve(!1);for(const r of e)n=n.next(i=>i?G.resolve(i):r());return n}static forEach(e,n){const r=[];return e.forEach((i,s)=>{r.push(n.call(this,i,s))}),this.waitFor(r)}static mapArray(e,n){return new G((r,i)=>{const s=e.length,o=new Array(s);let a=0;for(let u=0;u<s;u++){const c=u;n(e[c]).next(d=>{o[c]=d,++a,a===s&&r(o)},d=>i(d))}})}static doWhile(e,n){return new G((r,i)=>{const s=()=>{e()===!0?n().next(()=>{s()},i):r()};s()})}}function Dx(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function Bl(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class km{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ie(r),this.se=r=>n.writeSequenceNumber(r))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}km.oe=-1;function Td(t){return t==null}function Oc(t){return t===0&&1/t==-1/0}function Lx(t){return typeof t=="number"&&Number.isInteger(t)&&!Oc(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $v(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Hs(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function w1(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yt{constructor(e,n){this.comparator=e,this.root=n||$t.EMPTY}insert(e,n){return new yt(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,$t.BLACK,null,null))}remove(e){return new yt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,$t.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(i===0)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Au(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Au(this.root,e,this.comparator,!1)}getReverseIterator(){return new Au(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Au(this.root,e,this.comparator,!0)}}class Au{constructor(e,n,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=n?r(e.key,n):1,n&&i&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(s===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class $t{constructor(e,n,r,i,s){this.key=e,this.value=n,this.color=r??$t.RED,this.left=i??$t.EMPTY,this.right=s??$t.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,i,s){return new $t(e??this.key,n??this.value,r??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this;const s=r(e,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(e,n,r),null):s===0?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return $t.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),n(e,i.key)===0){if(i.right.isEmpty())return $t.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,$t.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,$t.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw Ee();const e=this.left.check();if(e!==this.right.check())throw Ee();return e+(this.isRed()?0:1)}}$t.EMPTY=null,$t.RED=!0,$t.BLACK=!1;$t.EMPTY=new class{constructor(){this.size=0}get key(){throw Ee()}get value(){throw Ee()}get color(){throw Ee()}get left(){throw Ee()}get right(){throw Ee()}copy(e,n,r,i,s){return this}insert(e,n,r){return new $t(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qt{constructor(e){this.comparator=e,this.data=new yt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;n(i.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new Hv(this.data.getIterator())}getIteratorFrom(e){return new Hv(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof qt)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(this.comparator(i,s)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new qt(this.comparator);return n.data=e,n}}class Hv{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dn{constructor(e){this.fields=e,e.sort(Ht.comparator)}static empty(){return new Dn([])}unionWith(e){let n=new qt(Ht.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new Dn(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Uo(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class E1 extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class un{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(i){try{return atob(i)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new E1("Invalid base64 string: "+s):s}}(e);return new un(n)}static fromUint8Array(e){const n=function(i){let s="";for(let o=0;o<i.length;++o)s+=String.fromCharCode(i[o]);return s}(e);return new un(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return We(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}un.EMPTY_BYTE_STRING=new un("");const Mx=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Yi(t){if(tt(!!t),typeof t=="string"){let e=0;const n=Mx.exec(t);if(tt(!!n),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:At(t.seconds),nanos:At(t.nanos)}}function At(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Os(t){return typeof t=="string"?un.fromBase64String(t):un.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bm(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function xm(t){const e=t.mapValue.fields.__previous_value__;return bm(e)?xm(e):e}function Tl(t){const e=Yi(t.mapValue.fields.__local_write_time__.timestampValue);return new Dt(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vx{constructor(e,n,r,i,s,o,a,u,c){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=u,this.useFetchStreams=c}}class Sl{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new Sl("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof Sl&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ku={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function Ds(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?bm(t)?4:jx(t)?9007199254740991:10:Ee()}function xr(t,e){if(t===e)return!0;const n=Ds(t);if(n!==Ds(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Tl(t).isEqual(Tl(e));case 3:return function(i,s){if(typeof i.timestampValue=="string"&&typeof s.timestampValue=="string"&&i.timestampValue.length===s.timestampValue.length)return i.timestampValue===s.timestampValue;const o=Yi(i.timestampValue),a=Yi(s.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(i,s){return Os(i.bytesValue).isEqual(Os(s.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(i,s){return At(i.geoPointValue.latitude)===At(s.geoPointValue.latitude)&&At(i.geoPointValue.longitude)===At(s.geoPointValue.longitude)}(t,e);case 2:return function(i,s){if("integerValue"in i&&"integerValue"in s)return At(i.integerValue)===At(s.integerValue);if("doubleValue"in i&&"doubleValue"in s){const o=At(i.doubleValue),a=At(s.doubleValue);return o===a?Oc(o)===Oc(a):isNaN(o)&&isNaN(a)}return!1}(t,e);case 9:return Uo(t.arrayValue.values||[],e.arrayValue.values||[],xr);case 10:return function(i,s){const o=i.mapValue.fields||{},a=s.mapValue.fields||{};if($v(o)!==$v(a))return!1;for(const u in o)if(o.hasOwnProperty(u)&&(a[u]===void 0||!xr(o[u],a[u])))return!1;return!0}(t,e);default:return Ee()}}function Il(t,e){return(t.values||[]).find(n=>xr(n,e))!==void 0}function zo(t,e){if(t===e)return 0;const n=Ds(t),r=Ds(e);if(n!==r)return We(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return We(t.booleanValue,e.booleanValue);case 2:return function(s,o){const a=At(s.integerValue||s.doubleValue),u=At(o.integerValue||o.doubleValue);return a<u?-1:a>u?1:a===u?0:isNaN(a)?isNaN(u)?0:-1:1}(t,e);case 3:return Wv(t.timestampValue,e.timestampValue);case 4:return Wv(Tl(t),Tl(e));case 5:return We(t.stringValue,e.stringValue);case 6:return function(s,o){const a=Os(s),u=Os(o);return a.compareTo(u)}(t.bytesValue,e.bytesValue);case 7:return function(s,o){const a=s.split("/"),u=o.split("/");for(let c=0;c<a.length&&c<u.length;c++){const d=We(a[c],u[c]);if(d!==0)return d}return We(a.length,u.length)}(t.referenceValue,e.referenceValue);case 8:return function(s,o){const a=We(At(s.latitude),At(o.latitude));return a!==0?a:We(At(s.longitude),At(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return function(s,o){const a=s.values||[],u=o.values||[];for(let c=0;c<a.length&&c<u.length;++c){const d=zo(a[c],u[c]);if(d)return d}return We(a.length,u.length)}(t.arrayValue,e.arrayValue);case 10:return function(s,o){if(s===ku.mapValue&&o===ku.mapValue)return 0;if(s===ku.mapValue)return 1;if(o===ku.mapValue)return-1;const a=s.fields||{},u=Object.keys(a),c=o.fields||{},d=Object.keys(c);u.sort(),d.sort();for(let f=0;f<u.length&&f<d.length;++f){const m=We(u[f],d[f]);if(m!==0)return m;const E=zo(a[u[f]],c[d[f]]);if(E!==0)return E}return We(u.length,d.length)}(t.mapValue,e.mapValue);default:throw Ee()}}function Wv(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return We(t,e);const n=Yi(t),r=Yi(e),i=We(n.seconds,r.seconds);return i!==0?i:We(n.nanos,r.nanos)}function Bo(t){return ep(t)}function ep(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=Yi(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return Os(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return he.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",i=!0;for(const s of n.values||[])i?i=!1:r+=",",r+=ep(s);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let i="{",s=!0;for(const o of r)s?s=!1:i+=",",i+=`${o}:${ep(n.fields[o])}`;return i+"}"}(t.mapValue):Ee()}function tp(t){return!!t&&"integerValue"in t}function Nm(t){return!!t&&"arrayValue"in t}function qv(t){return!!t&&"nullValue"in t}function Kv(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Yu(t){return!!t&&"mapValue"in t}function Ga(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return Hs(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=Ga(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Ga(t.arrayValue.values[n]);return e}return Object.assign({},t)}function jx(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class En{constructor(e){this.value=e}static empty(){return new En({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!Yu(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=Ga(n)}setAll(e){let n=Ht.emptyPath(),r={},i=[];e.forEach((o,a)=>{if(!n.isImmediateParentOf(a)){const u=this.getFieldsMap(n);this.applyChanges(u,r,i),r={},i=[],n=a.popLast()}o?r[a.lastSegment()]=Ga(o):i.push(a.lastSegment())});const s=this.getFieldsMap(n);this.applyChanges(s,r,i)}delete(e){const n=this.field(e.popLast());Yu(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return xr(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=n.mapValue.fields[e.get(r)];Yu(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=i),n=i}return n.mapValue.fields}applyChanges(e,n,r){Hs(n,(i,s)=>e[i]=s);for(const i of r)delete e[i]}clone(){return new En(Ga(this.value))}}function T1(t){const e=[];return Hs(t.fields,(n,r)=>{const i=new Ht([n]);if(Yu(r)){const s=T1(r.mapValue).fields;if(s.length===0)e.push(i);else for(const o of s)e.push(i.child(o))}else e.push(i)}),new Dn(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class an{constructor(e,n,r,i,s,o,a){this.key=e,this.documentType=n,this.version=r,this.readTime=i,this.createTime=s,this.data=o,this.documentState=a}static newInvalidDocument(e){return new an(e,0,Se.min(),Se.min(),Se.min(),En.empty(),0)}static newFoundDocument(e,n,r,i){return new an(e,1,n,Se.min(),r,i,0)}static newNoDocument(e,n){return new an(e,2,n,Se.min(),Se.min(),En.empty(),0)}static newUnknownDocument(e,n){return new an(e,3,n,Se.min(),Se.min(),En.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(Se.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=En.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=En.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Se.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof an&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new an(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dc{constructor(e,n){this.position=e,this.inclusive=n}}function Gv(t,e,n){let r=0;for(let i=0;i<t.position.length;i++){const s=e[i],o=t.position[i];if(s.field.isKeyField()?r=he.comparator(he.fromName(o.referenceValue),n.key):r=zo(o,n.data.field(s.field)),s.dir==="desc"&&(r*=-1),r!==0)break}return r}function Qv(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!xr(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lc{constructor(e,n="asc"){this.field=e,this.dir=n}}function Fx(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class S1{}class xt extends S1{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new zx(e,n,r):n==="array-contains"?new Hx(e,r):n==="in"?new Wx(e,r):n==="not-in"?new qx(e,r):n==="array-contains-any"?new Kx(e,r):new xt(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new Bx(e,r):new $x(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(zo(n,this.value)):n!==null&&Ds(this.value)===Ds(n)&&this.matchesComparison(zo(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Ee()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Nr extends S1{constructor(e,n){super(),this.filters=e,this.op=n,this.ae=null}static create(e,n){return new Nr(e,n)}matches(e){return I1(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function I1(t){return t.op==="and"}function P1(t){return Ux(t)&&I1(t)}function Ux(t){for(const e of t.filters)if(e instanceof Nr)return!1;return!0}function np(t){if(t instanceof xt)return t.field.canonicalString()+t.op.toString()+Bo(t.value);if(P1(t))return t.filters.map(e=>np(e)).join(",");{const e=t.filters.map(n=>np(n)).join(",");return`${t.op}(${e})`}}function C1(t,e){return t instanceof xt?function(r,i){return i instanceof xt&&r.op===i.op&&r.field.isEqual(i.field)&&xr(r.value,i.value)}(t,e):t instanceof Nr?function(r,i){return i instanceof Nr&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((s,o,a)=>s&&C1(o,i.filters[a]),!0):!1}(t,e):void Ee()}function R1(t){return t instanceof xt?function(n){return`${n.field.canonicalString()} ${n.op} ${Bo(n.value)}`}(t):t instanceof Nr?function(n){return n.op.toString()+" {"+n.getFilters().map(R1).join(" ,")+"}"}(t):"Filter"}class zx extends xt{constructor(e,n,r){super(e,n,r),this.key=he.fromName(r.referenceValue)}matches(e){const n=he.comparator(e.key,this.key);return this.matchesComparison(n)}}class Bx extends xt{constructor(e,n){super(e,"in",n),this.keys=A1("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class $x extends xt{constructor(e,n){super(e,"not-in",n),this.keys=A1("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function A1(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>he.fromName(r.referenceValue))}class Hx extends xt{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return Nm(n)&&Il(n.arrayValue,this.value)}}class Wx extends xt{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&Il(this.value.arrayValue,n)}}class qx extends xt{constructor(e,n){super(e,"not-in",n)}matches(e){if(Il(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&!Il(this.value.arrayValue,n)}}class Kx extends xt{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!Nm(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>Il(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gx{constructor(e,n=null,r=[],i=[],s=null,o=null,a=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=o,this.endAt=a,this.ue=null}}function Yv(t,e=null,n=[],r=[],i=null,s=null,o=null){return new Gx(t,e,n,r,i,s,o)}function Om(t){const e=Pe(t);if(e.ue===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>np(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(s){return s.field.canonicalString()+s.dir}(r)).join(","),Td(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>Bo(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>Bo(r)).join(",")),e.ue=n}return e.ue}function Dm(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!Fx(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!C1(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!Qv(t.startAt,e.startAt)&&Qv(t.endAt,e.endAt)}function rp(t){return he.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sd{constructor(e,n=null,r=[],i=[],s=null,o="F",a=null,u=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=o,this.startAt=a,this.endAt=u,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function Qx(t,e,n,r,i,s,o,a){return new Sd(t,e,n,r,i,s,o,a)}function Lm(t){return new Sd(t)}function Xv(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function Yx(t){return t.collectionGroup!==null}function Qa(t){const e=Pe(t);if(e.ce===null){e.ce=[];const n=new Set;for(const s of e.explicitOrderBy)e.ce.push(s),n.add(s.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let a=new qt(Ht.comparator);return o.filters.forEach(u=>{u.getFlattenedFilters().forEach(c=>{c.isInequality()&&(a=a.add(c.field))})}),a})(e).forEach(s=>{n.has(s.canonicalString())||s.isKeyField()||e.ce.push(new Lc(s,r))}),n.has(Ht.keyField().canonicalString())||e.ce.push(new Lc(Ht.keyField(),r))}return e.ce}function Cr(t){const e=Pe(t);return e.le||(e.le=Xx(e,Qa(t))),e.le}function Xx(t,e){if(t.limitType==="F")return Yv(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(i=>{const s=i.dir==="desc"?"asc":"desc";return new Lc(i.field,s)});const n=t.endAt?new Dc(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new Dc(t.startAt.position,t.startAt.inclusive):null;return Yv(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function ip(t,e,n){return new Sd(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function Id(t,e){return Dm(Cr(t),Cr(e))&&t.limitType===e.limitType}function k1(t){return`${Om(Cr(t))}|lt:${t.limitType}`}function no(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(i=>R1(i)).join(", ")}]`),Td(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(i=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(i)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(i=>Bo(i)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(i=>Bo(i)).join(",")),`Target(${r})`}(Cr(t))}; limitType=${t.limitType})`}function Pd(t,e){return e.isFoundDocument()&&function(r,i){const s=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(s):he.isDocumentKey(r.path)?r.path.isEqual(s):r.path.isImmediateParentOf(s)}(t,e)&&function(r,i){for(const s of Qa(r))if(!s.field.isKeyField()&&i.data.field(s.field)===null)return!1;return!0}(t,e)&&function(r,i){for(const s of r.filters)if(!s.matches(i))return!1;return!0}(t,e)&&function(r,i){return!(r.startAt&&!function(o,a,u){const c=Gv(o,a,u);return o.inclusive?c<=0:c<0}(r.startAt,Qa(r),i)||r.endAt&&!function(o,a,u){const c=Gv(o,a,u);return o.inclusive?c>=0:c>0}(r.endAt,Qa(r),i))}(t,e)}function Jx(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function b1(t){return(e,n)=>{let r=!1;for(const i of Qa(t)){const s=Zx(i,e,n);if(s!==0)return s;r=r||i.field.isKeyField()}return 0}}function Zx(t,e,n){const r=t.field.isKeyField()?he.comparator(e.key,n.key):function(s,o,a){const u=o.data.field(s),c=a.data.field(s);return u!==null&&c!==null?zo(u,c):Ee()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return Ee()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ta{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[i,s]of r)if(this.equalsFn(i,e))return s}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return void(i[s]=[e,n]);i.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[n]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){Hs(this.inner,(n,r)=>{for(const[i,s]of r)e(i,s)})}isEmpty(){return w1(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const e2=new yt(he.comparator);function ri(){return e2}const x1=new yt(he.comparator);function Da(...t){let e=x1;for(const n of t)e=e.insert(n.key,n);return e}function N1(t){let e=x1;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function vs(){return Ya()}function O1(){return Ya()}function Ya(){return new ta(t=>t.toString(),(t,e)=>t.isEqual(e))}const t2=new yt(he.comparator),n2=new qt(he.comparator);function Ne(...t){let e=n2;for(const n of t)e=e.add(n);return e}const r2=new qt(We);function i2(){return r2}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function D1(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Oc(e)?"-0":e}}function L1(t){return{integerValue:""+t}}function s2(t,e){return Lx(e)?L1(e):D1(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cd{constructor(){this._=void 0}}function o2(t,e,n){return t instanceof Mc?function(i,s){const o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return s&&bm(s)&&(s=xm(s)),s&&(o.fields.__previous_value__=s),{mapValue:o}}(n,e):t instanceof $o?V1(t,e):t instanceof Ho?j1(t,e):function(i,s){const o=M1(i,s),a=Jv(o)+Jv(i.Pe);return tp(o)&&tp(i.Pe)?L1(a):D1(i.serializer,a)}(t,e)}function a2(t,e,n){return t instanceof $o?V1(t,e):t instanceof Ho?j1(t,e):n}function M1(t,e){return t instanceof Vc?function(r){return tp(r)||function(s){return!!s&&"doubleValue"in s}(r)}(e)?e:{integerValue:0}:null}class Mc extends Cd{}class $o extends Cd{constructor(e){super(),this.elements=e}}function V1(t,e){const n=F1(e);for(const r of t.elements)n.some(i=>xr(i,r))||n.push(r);return{arrayValue:{values:n}}}class Ho extends Cd{constructor(e){super(),this.elements=e}}function j1(t,e){let n=F1(e);for(const r of t.elements)n=n.filter(i=>!xr(i,r));return{arrayValue:{values:n}}}class Vc extends Cd{constructor(e,n){super(),this.serializer=e,this.Pe=n}}function Jv(t){return At(t.integerValue||t.doubleValue)}function F1(t){return Nm(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U1{constructor(e,n){this.field=e,this.transform=n}}function l2(t,e){return t.field.isEqual(e.field)&&function(r,i){return r instanceof $o&&i instanceof $o||r instanceof Ho&&i instanceof Ho?Uo(r.elements,i.elements,xr):r instanceof Vc&&i instanceof Vc?xr(r.Pe,i.Pe):r instanceof Mc&&i instanceof Mc}(t.transform,e.transform)}class u2{constructor(e,n){this.version=e,this.transformResults=n}}class Rr{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new Rr}static exists(e){return new Rr(void 0,e)}static updateTime(e){return new Rr(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Xu(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class Rd{}function z1(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new $1(t.key,Rr.none()):new $l(t.key,t.data,Rr.none());{const n=t.data,r=En.empty();let i=new qt(Ht.comparator);for(let s of e.fields)if(!i.has(s)){let o=n.field(s);o===null&&s.length>1&&(s=s.popLast(),o=n.field(s)),o===null?r.delete(s):r.set(s,o),i=i.add(s)}return new ts(t.key,r,new Dn(i.toArray()),Rr.none())}}function c2(t,e,n){t instanceof $l?function(i,s,o){const a=i.value.clone(),u=e_(i.fieldTransforms,s,o.transformResults);a.setAll(u),s.convertToFoundDocument(o.version,a).setHasCommittedMutations()}(t,e,n):t instanceof ts?function(i,s,o){if(!Xu(i.precondition,s))return void s.convertToUnknownDocument(o.version);const a=e_(i.fieldTransforms,s,o.transformResults),u=s.data;u.setAll(B1(i)),u.setAll(a),s.convertToFoundDocument(o.version,u).setHasCommittedMutations()}(t,e,n):function(i,s,o){s.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,n)}function Xa(t,e,n,r){return t instanceof $l?function(s,o,a,u){if(!Xu(s.precondition,o))return a;const c=s.value.clone(),d=t_(s.fieldTransforms,u,o);return c.setAll(d),o.convertToFoundDocument(o.version,c).setHasLocalMutations(),null}(t,e,n,r):t instanceof ts?function(s,o,a,u){if(!Xu(s.precondition,o))return a;const c=t_(s.fieldTransforms,u,o),d=o.data;return d.setAll(B1(s)),d.setAll(c),o.convertToFoundDocument(o.version,d).setHasLocalMutations(),a===null?null:a.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(f=>f.field))}(t,e,n,r):function(s,o,a){return Xu(s.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a}(t,e,n)}function d2(t,e){let n=null;for(const r of t.fieldTransforms){const i=e.data.field(r.field),s=M1(r.transform,i||null);s!=null&&(n===null&&(n=En.empty()),n.set(r.field,s))}return n||null}function Zv(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&Uo(r,i,(s,o)=>l2(s,o))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class $l extends Rd{constructor(e,n,r,i=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class ts extends Rd{constructor(e,n,r,i,s=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function B1(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function e_(t,e,n){const r=new Map;tt(t.length===n.length);for(let i=0;i<n.length;i++){const s=t[i],o=s.transform,a=e.data.field(s.field);r.set(s.field,a2(o,a,n[i]))}return r}function t_(t,e,n){const r=new Map;for(const i of t){const s=i.transform,o=n.data.field(i.field);r.set(i.field,o2(s,o,e))}return r}class $1 extends Rd{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class h2 extends Rd{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class f2{constructor(e,n,r,i){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let i=0;i<this.mutations.length;i++){const s=this.mutations[i];s.key.isEqual(e.key)&&c2(s,e,r[i])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=Xa(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=Xa(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=O1();return this.mutations.forEach(i=>{const s=e.get(i.key),o=s.overlayedDocument;let a=this.applyToLocalView(o,s.mutatedFields);a=n.has(i.key)?null:a;const u=z1(o,a);u!==null&&r.set(i.key,u),o.isValidDocument()||o.convertToNoDocument(Se.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),Ne())}isEqual(e){return this.batchId===e.batchId&&Uo(this.mutations,e.mutations,(n,r)=>Zv(n,r))&&Uo(this.baseMutations,e.baseMutations,(n,r)=>Zv(n,r))}}class Mm{constructor(e,n,r,i){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}static from(e,n,r){tt(e.mutations.length===r.length);let i=function(){return t2}();const s=e.mutations;for(let o=0;o<s.length;o++)i=i.insert(s[o].key,r[o].version);return new Mm(e,n,r,i)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class p2{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class m2{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ct,Me;function g2(t){switch(t){default:return Ee();case Q.CANCELLED:case Q.UNKNOWN:case Q.DEADLINE_EXCEEDED:case Q.RESOURCE_EXHAUSTED:case Q.INTERNAL:case Q.UNAVAILABLE:case Q.UNAUTHENTICATED:return!1;case Q.INVALID_ARGUMENT:case Q.NOT_FOUND:case Q.ALREADY_EXISTS:case Q.PERMISSION_DENIED:case Q.FAILED_PRECONDITION:case Q.ABORTED:case Q.OUT_OF_RANGE:case Q.UNIMPLEMENTED:case Q.DATA_LOSS:return!0}}function H1(t){if(t===void 0)return ni("GRPC error has no .code"),Q.UNKNOWN;switch(t){case Ct.OK:return Q.OK;case Ct.CANCELLED:return Q.CANCELLED;case Ct.UNKNOWN:return Q.UNKNOWN;case Ct.DEADLINE_EXCEEDED:return Q.DEADLINE_EXCEEDED;case Ct.RESOURCE_EXHAUSTED:return Q.RESOURCE_EXHAUSTED;case Ct.INTERNAL:return Q.INTERNAL;case Ct.UNAVAILABLE:return Q.UNAVAILABLE;case Ct.UNAUTHENTICATED:return Q.UNAUTHENTICATED;case Ct.INVALID_ARGUMENT:return Q.INVALID_ARGUMENT;case Ct.NOT_FOUND:return Q.NOT_FOUND;case Ct.ALREADY_EXISTS:return Q.ALREADY_EXISTS;case Ct.PERMISSION_DENIED:return Q.PERMISSION_DENIED;case Ct.FAILED_PRECONDITION:return Q.FAILED_PRECONDITION;case Ct.ABORTED:return Q.ABORTED;case Ct.OUT_OF_RANGE:return Q.OUT_OF_RANGE;case Ct.UNIMPLEMENTED:return Q.UNIMPLEMENTED;case Ct.DATA_LOSS:return Q.DATA_LOSS;default:return Ee()}}(Me=Ct||(Ct={}))[Me.OK=0]="OK",Me[Me.CANCELLED=1]="CANCELLED",Me[Me.UNKNOWN=2]="UNKNOWN",Me[Me.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Me[Me.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Me[Me.NOT_FOUND=5]="NOT_FOUND",Me[Me.ALREADY_EXISTS=6]="ALREADY_EXISTS",Me[Me.PERMISSION_DENIED=7]="PERMISSION_DENIED",Me[Me.UNAUTHENTICATED=16]="UNAUTHENTICATED",Me[Me.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Me[Me.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Me[Me.ABORTED=10]="ABORTED",Me[Me.OUT_OF_RANGE=11]="OUT_OF_RANGE",Me[Me.UNIMPLEMENTED=12]="UNIMPLEMENTED",Me[Me.INTERNAL=13]="INTERNAL",Me[Me.UNAVAILABLE=14]="UNAVAILABLE",Me[Me.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function y2(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const v2=new Es([4294967295,4294967295],0);function n_(t){const e=y2().encode(t),n=new d1;return n.update(e),new Uint8Array(n.digest())}function r_(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new Es([n,r],0),new Es([i,s],0)]}class Vm{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new La(`Invalid padding: ${n}`);if(r<0)throw new La(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new La(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new La(`Invalid padding when bitmap length is 0: ${n}`);this.Ie=8*e.length-n,this.Te=Es.fromNumber(this.Ie)}Ee(e,n,r){let i=e.add(n.multiply(Es.fromNumber(r)));return i.compare(v2)===1&&(i=new Es([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;const n=n_(e),[r,i]=r_(n);for(let s=0;s<this.hashCount;s++){const o=this.Ee(r,i,s);if(!this.de(o))return!1}return!0}static create(e,n,r){const i=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),o=new Vm(s,i,n);return r.forEach(a=>o.insert(a)),o}insert(e){if(this.Ie===0)return;const n=n_(e),[r,i]=r_(n);for(let s=0;s<this.hashCount;s++){const o=this.Ee(r,i,s);this.Ae(o)}}Ae(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class La extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ad{constructor(e,n,r,i,s){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const i=new Map;return i.set(e,Hl.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new Ad(Se.min(),i,new yt(We),ri(),Ne())}}class Hl{constructor(e,n,r,i,s){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new Hl(r,n,Ne(),Ne(),Ne())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ju{constructor(e,n,r,i){this.Re=e,this.removedTargetIds=n,this.key=r,this.Ve=i}}class W1{constructor(e,n){this.targetId=e,this.me=n}}class q1{constructor(e,n,r=un.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=i}}class i_{constructor(){this.fe=0,this.ge=o_(),this.pe=un.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}Ce(){let e=Ne(),n=Ne(),r=Ne();return this.ge.forEach((i,s)=>{switch(s){case 0:e=e.add(i);break;case 2:n=n.add(i);break;case 1:r=r.add(i);break;default:Ee()}}),new Hl(this.pe,this.ye,e,n,r)}ve(){this.we=!1,this.ge=o_()}Fe(e,n){this.we=!0,this.ge=this.ge.insert(e,n)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,tt(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class _2{constructor(e){this.Le=e,this.Be=new Map,this.ke=ri(),this.qe=s_(),this.Qe=new yt(We)}Ke(e){for(const n of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(n,e.Ve):this.Ue(n,e.key,e.Ve);for(const n of e.removedTargetIds)this.Ue(n,e.key,e.Ve)}We(e){this.forEachTarget(e,n=>{const r=this.Ge(n);switch(e.state){case 0:this.ze(n)&&r.De(e.resumeToken);break;case 1:r.Oe(),r.Se||r.ve(),r.De(e.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(n);break;case 3:this.ze(n)&&(r.Ne(),r.De(e.resumeToken));break;case 4:this.ze(n)&&(this.je(n),r.De(e.resumeToken));break;default:Ee()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Be.forEach((r,i)=>{this.ze(i)&&n(i)})}He(e){const n=e.targetId,r=e.me.count,i=this.Je(n);if(i){const s=i.target;if(rp(s))if(r===0){const o=new he(s.path);this.Ue(n,o,an.newNoDocument(o,Se.min()))}else tt(r===1);else{const o=this.Ye(n);if(o!==r){const a=this.Ze(e),u=a?this.Xe(a,e,o):1;if(u!==0){this.je(n);const c=u===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(n,c)}}}}}Ze(e){const n=e.me.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:i=0},hashCount:s=0}=n;let o,a;try{o=Os(r).toUint8Array()}catch(u){if(u instanceof E1)return Fo("Decoding the base64 bloom filter in existence filter failed ("+u.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw u}try{a=new Vm(o,i,s)}catch(u){return Fo(u instanceof La?"BloomFilter error: ":"Applying bloom filter failed: ",u),null}return a.Ie===0?null:a}Xe(e,n,r){return n.me.count===r-this.nt(e,n.targetId)?0:2}nt(e,n){const r=this.Le.getRemoteKeysForTarget(n);let i=0;return r.forEach(s=>{const o=this.Le.tt(),a=`projects/${o.projectId}/databases/${o.database}/documents/${s.path.canonicalString()}`;e.mightContain(a)||(this.Ue(n,s,null),i++)}),i}rt(e){const n=new Map;this.Be.forEach((s,o)=>{const a=this.Je(o);if(a){if(s.current&&rp(a.target)){const u=new he(a.target.path);this.ke.get(u)!==null||this.it(o,u)||this.Ue(o,u,an.newNoDocument(u,e))}s.be&&(n.set(o,s.Ce()),s.ve())}});let r=Ne();this.qe.forEach((s,o)=>{let a=!0;o.forEachWhile(u=>{const c=this.Je(u);return!c||c.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(s))}),this.ke.forEach((s,o)=>o.setReadTime(e));const i=new Ad(e,n,this.Qe,this.ke,r);return this.ke=ri(),this.qe=s_(),this.Qe=new yt(We),i}$e(e,n){if(!this.ze(e))return;const r=this.it(e,n.key)?2:0;this.Ge(e).Fe(n.key,r),this.ke=this.ke.insert(n.key,n),this.qe=this.qe.insert(n.key,this.st(n.key).add(e))}Ue(e,n,r){if(!this.ze(e))return;const i=this.Ge(e);this.it(e,n)?i.Fe(n,1):i.Me(n),this.qe=this.qe.insert(n,this.st(n).delete(e)),r&&(this.ke=this.ke.insert(n,r))}removeTarget(e){this.Be.delete(e)}Ye(e){const n=this.Ge(e).Ce();return this.Le.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let n=this.Be.get(e);return n||(n=new i_,this.Be.set(e,n)),n}st(e){let n=this.qe.get(e);return n||(n=new qt(We),this.qe=this.qe.insert(e,n)),n}ze(e){const n=this.Je(e)!==null;return n||ie("WatchChangeAggregator","Detected inactive target",e),n}Je(e){const n=this.Be.get(e);return n&&n.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new i_),this.Le.getRemoteKeysForTarget(e).forEach(n=>{this.Ue(e,n,null)})}it(e,n){return this.Le.getRemoteKeysForTarget(e).has(n)}}function s_(){return new yt(he.comparator)}function o_(){return new yt(he.comparator)}const w2={asc:"ASCENDING",desc:"DESCENDING"},E2={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},T2={and:"AND",or:"OR"};class S2{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function sp(t,e){return t.useProto3Json||Td(e)?e:{value:e}}function jc(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function K1(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function I2(t,e){return jc(t,e.toTimestamp())}function Ar(t){return tt(!!t),Se.fromTimestamp(function(n){const r=Yi(n);return new Dt(r.seconds,r.nanos)}(t))}function jm(t,e){return op(t,e).canonicalString()}function op(t,e){const n=function(i){return new Tt(["projects",i.projectId,"databases",i.database])}(t).child("documents");return e===void 0?n:n.child(e)}function G1(t){const e=Tt.fromString(t);return tt(Z1(e)),e}function ap(t,e){return jm(t.databaseId,e.path)}function Lh(t,e){const n=G1(e);if(n.get(1)!==t.databaseId.projectId)throw new de(Q.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new de(Q.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new he(Y1(n))}function Q1(t,e){return jm(t.databaseId,e)}function P2(t){const e=G1(t);return e.length===4?Tt.emptyPath():Y1(e)}function lp(t){return new Tt(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function Y1(t){return tt(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function a_(t,e,n){return{name:ap(t,e),fields:n.value.mapValue.fields}}function C2(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(c){return c==="NO_CHANGE"?0:c==="ADD"?1:c==="REMOVE"?2:c==="CURRENT"?3:c==="RESET"?4:Ee()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],s=function(c,d){return c.useProto3Json?(tt(d===void 0||typeof d=="string"),un.fromBase64String(d||"")):(tt(d===void 0||d instanceof Buffer||d instanceof Uint8Array),un.fromUint8Array(d||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&function(c){const d=c.code===void 0?Q.UNKNOWN:H1(c.code);return new de(d,c.message||"")}(o);n=new q1(r,i,s,a||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const i=Lh(t,r.document.name),s=Ar(r.document.updateTime),o=r.document.createTime?Ar(r.document.createTime):Se.min(),a=new En({mapValue:{fields:r.document.fields}}),u=an.newFoundDocument(i,s,o,a),c=r.targetIds||[],d=r.removedTargetIds||[];n=new Ju(c,d,u.key,u)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const i=Lh(t,r.document),s=r.readTime?Ar(r.readTime):Se.min(),o=an.newNoDocument(i,s),a=r.removedTargetIds||[];n=new Ju([],a,o.key,o)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const i=Lh(t,r.document),s=r.removedTargetIds||[];n=new Ju([],s,i,null)}else{if(!("filter"in e))return Ee();{e.filter;const r=e.filter;r.targetId;const{count:i=0,unchangedNames:s}=r,o=new m2(i,s),a=r.targetId;n=new W1(a,o)}}return n}function R2(t,e){let n;if(e instanceof $l)n={update:a_(t,e.key,e.value)};else if(e instanceof $1)n={delete:ap(t,e.key)};else if(e instanceof ts)n={update:a_(t,e.key,e.data),updateMask:M2(e.fieldMask)};else{if(!(e instanceof h2))return Ee();n={verify:ap(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(s,o){const a=o.transform;if(a instanceof Mc)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof $o)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof Ho)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof Vc)return{fieldPath:o.field.canonicalString(),increment:a.Pe};throw Ee()}(0,r))),e.precondition.isNone||(n.currentDocument=function(i,s){return s.updateTime!==void 0?{updateTime:I2(i,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:Ee()}(t,e.precondition)),n}function A2(t,e){return t&&t.length>0?(tt(e!==void 0),t.map(n=>function(i,s){let o=i.updateTime?Ar(i.updateTime):Ar(s);return o.isEqual(Se.min())&&(o=Ar(s)),new u2(o,i.transformResults||[])}(n,e))):[]}function k2(t,e){return{documents:[Q1(t,e.path)]}}function b2(t,e){const n={structuredQuery:{}},r=e.path;let i;e.collectionGroup!==null?(i=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=Q1(t,i);const s=function(c){if(c.length!==0)return J1(Nr.create(c,"and"))}(e.filters);s&&(n.structuredQuery.where=s);const o=function(c){if(c.length!==0)return c.map(d=>function(m){return{field:ro(m.field),direction:O2(m.dir)}}(d))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);const a=sp(t,e.limit);return a!==null&&(n.structuredQuery.limit=a),e.startAt&&(n.structuredQuery.startAt=function(c){return{before:c.inclusive,values:c.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(c){return{before:!c.inclusive,values:c.position}}(e.endAt)),{_t:n,parent:i}}function x2(t){let e=P2(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){tt(r===1);const d=n.from[0];d.allDescendants?i=d.collectionId:e=e.child(d.collectionId)}let s=[];n.where&&(s=function(f){const m=X1(f);return m instanceof Nr&&P1(m)?m.getFilters():[m]}(n.where));let o=[];n.orderBy&&(o=function(f){return f.map(m=>function(C){return new Lc(io(C.field),function(O){switch(O){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(C.direction))}(m))}(n.orderBy));let a=null;n.limit&&(a=function(f){let m;return m=typeof f=="object"?f.value:f,Td(m)?null:m}(n.limit));let u=null;n.startAt&&(u=function(f){const m=!!f.before,E=f.values||[];return new Dc(E,m)}(n.startAt));let c=null;return n.endAt&&(c=function(f){const m=!f.before,E=f.values||[];return new Dc(E,m)}(n.endAt)),Qx(e,i,o,s,a,"F",u,c)}function N2(t,e){const n=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Ee()}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function X1(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=io(n.unaryFilter.field);return xt.create(r,"==",{doubleValue:NaN});case"IS_NULL":const i=io(n.unaryFilter.field);return xt.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=io(n.unaryFilter.field);return xt.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=io(n.unaryFilter.field);return xt.create(o,"!=",{nullValue:"NULL_VALUE"});default:return Ee()}}(t):t.fieldFilter!==void 0?function(n){return xt.create(io(n.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Ee()}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return Nr.create(n.compositeFilter.filters.map(r=>X1(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return Ee()}}(n.compositeFilter.op))}(t):Ee()}function O2(t){return w2[t]}function D2(t){return E2[t]}function L2(t){return T2[t]}function ro(t){return{fieldPath:t.canonicalString()}}function io(t){return Ht.fromServerFormat(t.fieldPath)}function J1(t){return t instanceof xt?function(n){if(n.op==="=="){if(Kv(n.value))return{unaryFilter:{field:ro(n.field),op:"IS_NAN"}};if(qv(n.value))return{unaryFilter:{field:ro(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(Kv(n.value))return{unaryFilter:{field:ro(n.field),op:"IS_NOT_NAN"}};if(qv(n.value))return{unaryFilter:{field:ro(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:ro(n.field),op:D2(n.op),value:n.value}}}(t):t instanceof Nr?function(n){const r=n.getFilters().map(i=>J1(i));return r.length===1?r[0]:{compositeFilter:{op:L2(n.op),filters:r}}}(t):Ee()}function M2(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function Z1(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oi{constructor(e,n,r,i,s=Se.min(),o=Se.min(),a=un.EMPTY_BYTE_STRING,u=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=u}withSequenceNumber(e){return new Oi(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new Oi(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Oi(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Oi(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class V2{constructor(e){this.ct=e}}function j2(t){const e=x2({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?ip(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F2{constructor(){this._n=new U2}addToCollectionParentIndex(e,n){return this._n.add(n),G.resolve()}getCollectionParents(e,n){return G.resolve(this._n.getEntries(n))}addFieldIndex(e,n){return G.resolve()}deleteFieldIndex(e,n){return G.resolve()}deleteAllFieldIndexes(e){return G.resolve()}createTargetIndexes(e,n){return G.resolve()}getDocumentsMatchingTarget(e,n){return G.resolve(null)}getIndexType(e,n){return G.resolve(0)}getFieldIndexes(e,n){return G.resolve([])}getNextCollectionGroupToUpdate(e){return G.resolve(null)}getMinOffset(e,n){return G.resolve(Qi.min())}getMinOffsetFromCollectionGroup(e,n){return G.resolve(Qi.min())}updateCollectionGroup(e,n,r){return G.resolve()}updateIndexEntries(e,n){return G.resolve()}}class U2{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n]||new qt(Tt.comparator),s=!i.has(r);return this.index[n]=i.add(r),s}has(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n];return i&&i.has(r)}getEntries(e){return(this.index[e]||new qt(Tt.comparator)).toArray()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wo{constructor(e){this.On=e}next(){return this.On+=2,this.On}static Nn(){return new Wo(0)}static Ln(){return new Wo(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z2{constructor(){this.changes=new ta(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,an.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?G.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B2{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $2{constructor(e,n,r,i){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,n))).next(i=>(r!==null&&Xa(r.mutation,i,Dn.empty(),Dt.now()),i))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,Ne()).next(()=>r))}getLocalViewOfDocuments(e,n,r=Ne()){const i=vs();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,r).next(s=>{let o=Da();return s.forEach((a,u)=>{o=o.insert(a,u.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){const r=vs();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,Ne()))}populateOverlays(e,n,r){const i=[];return r.forEach(s=>{n.has(s)||i.push(s)}),this.documentOverlayCache.getOverlays(e,i).next(s=>{s.forEach((o,a)=>{n.set(o,a)})})}computeViews(e,n,r,i){let s=ri();const o=Ya(),a=function(){return Ya()}();return n.forEach((u,c)=>{const d=r.get(c.key);i.has(c.key)&&(d===void 0||d.mutation instanceof ts)?s=s.insert(c.key,c):d!==void 0?(o.set(c.key,d.mutation.getFieldMask()),Xa(d.mutation,c,d.mutation.getFieldMask(),Dt.now())):o.set(c.key,Dn.empty())}),this.recalculateAndSaveOverlays(e,s).next(u=>(u.forEach((c,d)=>o.set(c,d)),n.forEach((c,d)=>{var f;return a.set(c,new B2(d,(f=o.get(c))!==null&&f!==void 0?f:null))}),a))}recalculateAndSaveOverlays(e,n){const r=Ya();let i=new yt((o,a)=>o-a),s=Ne();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(const a of o)a.keys().forEach(u=>{const c=n.get(u);if(c===null)return;let d=r.get(u)||Dn.empty();d=a.applyToLocalView(c,d),r.set(u,d);const f=(i.get(a.batchId)||Ne()).add(u);i=i.insert(a.batchId,f)})}).next(()=>{const o=[],a=i.getReverseIterator();for(;a.hasNext();){const u=a.getNext(),c=u.key,d=u.value,f=O1();d.forEach(m=>{if(!s.has(m)){const E=z1(n.get(m),r.get(m));E!==null&&f.set(m,E),s=s.add(m)}}),o.push(this.documentOverlayCache.saveOverlays(e,c,f))}return G.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,i){return function(o){return he.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):Yx(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,i):this.getDocumentsMatchingCollectionQuery(e,n,r,i)}getNextDocuments(e,n,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,i).next(s=>{const o=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,i-s.size):G.resolve(vs());let a=-1,u=s;return o.next(c=>G.forEach(c,(d,f)=>(a<f.largestBatchId&&(a=f.largestBatchId),s.get(d)?G.resolve():this.remoteDocumentCache.getEntry(e,d).next(m=>{u=u.insert(d,m)}))).next(()=>this.populateOverlays(e,c,s)).next(()=>this.computeViews(e,u,c,Ne())).next(d=>({batchId:a,changes:N1(d)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new he(n)).next(r=>{let i=Da();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,n,r,i){const s=n.collectionGroup;let o=Da();return this.indexManager.getCollectionParents(e,s).next(a=>G.forEach(a,u=>{const c=function(f,m){return new Sd(m,null,f.explicitOrderBy.slice(),f.filters.slice(),f.limit,f.limitType,f.startAt,f.endAt)}(n,u.child(s));return this.getDocumentsMatchingCollectionQuery(e,c,r,i).next(d=>{d.forEach((f,m)=>{o=o.insert(f,m)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,n,r,i){let s;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(o=>(s=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,s,i))).next(o=>{s.forEach((u,c)=>{const d=c.getKey();o.get(d)===null&&(o=o.insert(d,an.newInvalidDocument(d)))});let a=Da();return o.forEach((u,c)=>{const d=s.get(u);d!==void 0&&Xa(d.mutation,c,Dn.empty(),Dt.now()),Pd(n,c)&&(a=a.insert(u,c))}),a})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H2{constructor(e){this.serializer=e,this.cr=new Map,this.lr=new Map}getBundleMetadata(e,n){return G.resolve(this.cr.get(n))}saveBundleMetadata(e,n){return this.cr.set(n.id,function(i){return{id:i.id,version:i.version,createTime:Ar(i.createTime)}}(n)),G.resolve()}getNamedQuery(e,n){return G.resolve(this.lr.get(n))}saveNamedQuery(e,n){return this.lr.set(n.name,function(i){return{name:i.name,query:j2(i.bundledQuery),readTime:Ar(i.readTime)}}(n)),G.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W2{constructor(){this.overlays=new yt(he.comparator),this.hr=new Map}getOverlay(e,n){return G.resolve(this.overlays.get(n))}getOverlays(e,n){const r=vs();return G.forEach(n,i=>this.getOverlay(e,i).next(s=>{s!==null&&r.set(i,s)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((i,s)=>{this.ht(e,n,s)}),G.resolve()}removeOverlaysForBatchId(e,n,r){const i=this.hr.get(r);return i!==void 0&&(i.forEach(s=>this.overlays=this.overlays.remove(s)),this.hr.delete(r)),G.resolve()}getOverlaysForCollection(e,n,r){const i=vs(),s=n.length+1,o=new he(n.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){const u=a.getNext().value,c=u.getKey();if(!n.isPrefixOf(c.path))break;c.path.length===s&&u.largestBatchId>r&&i.set(u.getKey(),u)}return G.resolve(i)}getOverlaysForCollectionGroup(e,n,r,i){let s=new yt((c,d)=>c-d);const o=this.overlays.getIterator();for(;o.hasNext();){const c=o.getNext().value;if(c.getKey().getCollectionGroup()===n&&c.largestBatchId>r){let d=s.get(c.largestBatchId);d===null&&(d=vs(),s=s.insert(c.largestBatchId,d)),d.set(c.getKey(),c)}}const a=vs(),u=s.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach((c,d)=>a.set(c,d)),!(a.size()>=i)););return G.resolve(a)}ht(e,n,r){const i=this.overlays.get(r.key);if(i!==null){const o=this.hr.get(i.largestBatchId).delete(r.key);this.hr.set(i.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new p2(n,r));let s=this.hr.get(n);s===void 0&&(s=Ne(),this.hr.set(n,s)),this.hr.set(n,s.add(r.key))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fm{constructor(){this.Pr=new qt(Vt.Ir),this.Tr=new qt(Vt.Er)}isEmpty(){return this.Pr.isEmpty()}addReference(e,n){const r=new Vt(e,n);this.Pr=this.Pr.add(r),this.Tr=this.Tr.add(r)}dr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Ar(new Vt(e,n))}Rr(e,n){e.forEach(r=>this.removeReference(r,n))}Vr(e){const n=new he(new Tt([])),r=new Vt(n,e),i=new Vt(n,e+1),s=[];return this.Tr.forEachInRange([r,i],o=>{this.Ar(o),s.push(o.key)}),s}mr(){this.Pr.forEach(e=>this.Ar(e))}Ar(e){this.Pr=this.Pr.delete(e),this.Tr=this.Tr.delete(e)}gr(e){const n=new he(new Tt([])),r=new Vt(n,e),i=new Vt(n,e+1);let s=Ne();return this.Tr.forEachInRange([r,i],o=>{s=s.add(o.key)}),s}containsKey(e){const n=new Vt(e,0),r=this.Pr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class Vt{constructor(e,n){this.key=e,this.pr=n}static Ir(e,n){return he.comparator(e.key,n.key)||We(e.pr,n.pr)}static Er(e,n){return We(e.pr,n.pr)||he.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q2{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.yr=1,this.wr=new qt(Vt.Ir)}checkEmpty(e){return G.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,i){const s=this.yr;this.yr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new f2(s,n,r,i);this.mutationQueue.push(o);for(const a of i)this.wr=this.wr.add(new Vt(a.key,s)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return G.resolve(o)}lookupMutationBatch(e,n){return G.resolve(this.Sr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,i=this.br(r),s=i<0?0:i;return G.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return G.resolve(this.mutationQueue.length===0?-1:this.yr-1)}getAllMutationBatches(e){return G.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new Vt(n,0),i=new Vt(n,Number.POSITIVE_INFINITY),s=[];return this.wr.forEachInRange([r,i],o=>{const a=this.Sr(o.pr);s.push(a)}),G.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new qt(We);return n.forEach(i=>{const s=new Vt(i,0),o=new Vt(i,Number.POSITIVE_INFINITY);this.wr.forEachInRange([s,o],a=>{r=r.add(a.pr)})}),G.resolve(this.Dr(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,i=r.length+1;let s=r;he.isDocumentKey(s)||(s=s.child(""));const o=new Vt(new he(s),0);let a=new qt(We);return this.wr.forEachWhile(u=>{const c=u.key.path;return!!r.isPrefixOf(c)&&(c.length===i&&(a=a.add(u.pr)),!0)},o),G.resolve(this.Dr(a))}Dr(e){const n=[];return e.forEach(r=>{const i=this.Sr(r);i!==null&&n.push(i)}),n}removeMutationBatch(e,n){tt(this.Cr(n.batchId,"removed")===0),this.mutationQueue.shift();let r=this.wr;return G.forEach(n.mutations,i=>{const s=new Vt(i.key,n.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.wr=r})}Mn(e){}containsKey(e,n){const r=new Vt(n,0),i=this.wr.firstAfterOrEqual(r);return G.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,G.resolve()}Cr(e,n){return this.br(e)}br(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Sr(e){const n=this.br(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K2{constructor(e){this.vr=e,this.docs=function(){return new yt(he.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,i=this.docs.get(r),s=i?i.size:0,o=this.vr(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return G.resolve(r?r.document.mutableCopy():an.newInvalidDocument(n))}getEntries(e,n){let r=ri();return n.forEach(i=>{const s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():an.newInvalidDocument(i))}),G.resolve(r)}getDocumentsMatchingQuery(e,n,r,i){let s=ri();const o=n.path,a=new he(o.child("")),u=this.docs.getIteratorFrom(a);for(;u.hasNext();){const{key:c,value:{document:d}}=u.getNext();if(!o.isPrefixOf(c.path))break;c.path.length>o.length+1||xx(bx(d),r)<=0||(i.has(d.key)||Pd(n,d))&&(s=s.insert(d.key,d.mutableCopy()))}return G.resolve(s)}getAllFromCollectionGroup(e,n,r,i){Ee()}Fr(e,n){return G.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new G2(this)}getSize(e){return G.resolve(this.size)}}class G2 extends z2{constructor(e){super(),this.ar=e}applyChanges(e){const n=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?n.push(this.ar.addEntry(e,i)):this.ar.removeEntry(r)}),G.waitFor(n)}getFromCache(e,n){return this.ar.getEntry(e,n)}getAllFromCache(e,n){return this.ar.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q2{constructor(e){this.persistence=e,this.Mr=new ta(n=>Om(n),Dm),this.lastRemoteSnapshotVersion=Se.min(),this.highestTargetId=0,this.Or=0,this.Nr=new Fm,this.targetCount=0,this.Lr=Wo.Nn()}forEachTarget(e,n){return this.Mr.forEach((r,i)=>n(i)),G.resolve()}getLastRemoteSnapshotVersion(e){return G.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return G.resolve(this.Or)}allocateTargetId(e){return this.highestTargetId=this.Lr.next(),G.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.Or&&(this.Or=n),G.resolve()}qn(e){this.Mr.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.Lr=new Wo(n),this.highestTargetId=n),e.sequenceNumber>this.Or&&(this.Or=e.sequenceNumber)}addTargetData(e,n){return this.qn(n),this.targetCount+=1,G.resolve()}updateTargetData(e,n){return this.qn(n),G.resolve()}removeTargetData(e,n){return this.Mr.delete(n.target),this.Nr.Vr(n.targetId),this.targetCount-=1,G.resolve()}removeTargets(e,n,r){let i=0;const s=[];return this.Mr.forEach((o,a)=>{a.sequenceNumber<=n&&r.get(a.targetId)===null&&(this.Mr.delete(o),s.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)}),G.waitFor(s).next(()=>i)}getTargetCount(e){return G.resolve(this.targetCount)}getTargetData(e,n){const r=this.Mr.get(n)||null;return G.resolve(r)}addMatchingKeys(e,n,r){return this.Nr.dr(n,r),G.resolve()}removeMatchingKeys(e,n,r){this.Nr.Rr(n,r);const i=this.persistence.referenceDelegate,s=[];return i&&n.forEach(o=>{s.push(i.markPotentiallyOrphaned(e,o))}),G.waitFor(s)}removeMatchingKeysForTargetId(e,n){return this.Nr.Vr(n),G.resolve()}getMatchingKeysForTargetId(e,n){const r=this.Nr.gr(n);return G.resolve(r)}containsKey(e,n){return G.resolve(this.Nr.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y2{constructor(e,n){this.Br={},this.overlays={},this.kr=new km(0),this.qr=!1,this.qr=!0,this.referenceDelegate=e(this),this.Qr=new Q2(this),this.indexManager=new F2,this.remoteDocumentCache=function(i){return new K2(i)}(r=>this.referenceDelegate.Kr(r)),this.serializer=new V2(n),this.$r=new H2(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.qr=!1,Promise.resolve()}get started(){return this.qr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new W2,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.Br[e.toKey()];return r||(r=new q2(n,this.referenceDelegate),this.Br[e.toKey()]=r),r}getTargetCache(){return this.Qr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.$r}runTransaction(e,n,r){ie("MemoryPersistence","Starting transaction:",e);const i=new X2(this.kr.next());return this.referenceDelegate.Ur(),r(i).next(s=>this.referenceDelegate.Wr(i).next(()=>s)).toPromise().then(s=>(i.raiseOnCommittedEvent(),s))}Gr(e,n){return G.or(Object.values(this.Br).map(r=>()=>r.containsKey(e,n)))}}class X2 extends Ox{constructor(e){super(),this.currentSequenceNumber=e}}class Um{constructor(e){this.persistence=e,this.zr=new Fm,this.jr=null}static Hr(e){return new Um(e)}get Jr(){if(this.jr)return this.jr;throw Ee()}addReference(e,n,r){return this.zr.addReference(r,n),this.Jr.delete(r.toString()),G.resolve()}removeReference(e,n,r){return this.zr.removeReference(r,n),this.Jr.add(r.toString()),G.resolve()}markPotentiallyOrphaned(e,n){return this.Jr.add(n.toString()),G.resolve()}removeTarget(e,n){this.zr.Vr(n.targetId).forEach(i=>this.Jr.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(i=>{i.forEach(s=>this.Jr.add(s.toString()))}).next(()=>r.removeTargetData(e,n))}Ur(){this.jr=new Set}Wr(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return G.forEach(this.Jr,r=>{const i=he.fromPath(r);return this.Yr(e,i).next(s=>{s||n.removeEntry(i,Se.min())})}).next(()=>(this.jr=null,n.apply(e)))}updateLimboDocument(e,n){return this.Yr(e,n).next(r=>{r?this.Jr.delete(n.toString()):this.Jr.add(n.toString())})}Kr(e){return 0}Yr(e,n){return G.or([()=>G.resolve(this.zr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Gr(e,n)])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zm{constructor(e,n,r,i){this.targetId=e,this.fromCache=n,this.qi=r,this.Qi=i}static Ki(e,n){let r=Ne(),i=Ne();for(const s of n.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new zm(e,n.fromCache,r,i)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J2{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z2{constructor(){this.$i=!1,this.Ui=!1,this.Wi=100,this.Gi=function(){return ib()?8:Dx(Gt())>0?6:4}()}initialize(e,n){this.zi=e,this.indexManager=n,this.$i=!0}getDocumentsMatchingQuery(e,n,r,i){const s={result:null};return this.ji(e,n).next(o=>{s.result=o}).next(()=>{if(!s.result)return this.Hi(e,n,i,r).next(o=>{s.result=o})}).next(()=>{if(s.result)return;const o=new J2;return this.Ji(e,n,o).next(a=>{if(s.result=a,this.Ui)return this.Yi(e,n,o,a.size)})}).next(()=>s.result)}Yi(e,n,r,i){return r.documentReadCount<this.Wi?(Pa()<=Oe.DEBUG&&ie("QueryEngine","SDK will not create cache indexes for query:",no(n),"since it only creates cache indexes for collection contains","more than or equal to",this.Wi,"documents"),G.resolve()):(Pa()<=Oe.DEBUG&&ie("QueryEngine","Query:",no(n),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.Gi*i?(Pa()<=Oe.DEBUG&&ie("QueryEngine","The SDK decides to create cache indexes for query:",no(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Cr(n))):G.resolve())}ji(e,n){if(Xv(n))return G.resolve(null);let r=Cr(n);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(n.limit!==null&&i===1&&(n=ip(n,null,"F"),r=Cr(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(s=>{const o=Ne(...s);return this.zi.getDocuments(e,o).next(a=>this.indexManager.getMinOffset(e,r).next(u=>{const c=this.Zi(n,a);return this.Xi(n,c,o,u.readTime)?this.ji(e,ip(n,null,"F")):this.es(e,c,n,u)}))})))}Hi(e,n,r,i){return Xv(n)||i.isEqual(Se.min())?G.resolve(null):this.zi.getDocuments(e,r).next(s=>{const o=this.Zi(n,s);return this.Xi(n,o,r,i)?G.resolve(null):(Pa()<=Oe.DEBUG&&ie("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),no(n)),this.es(e,o,n,kx(i,-1)).next(a=>a))})}Zi(e,n){let r=new qt(b1(e));return n.forEach((i,s)=>{Pd(e,s)&&(r=r.add(s))}),r}Xi(e,n,r,i){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const s=e.limitType==="F"?n.last():n.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}Ji(e,n,r){return Pa()<=Oe.DEBUG&&ie("QueryEngine","Using full collection scan to execute query:",no(n)),this.zi.getDocumentsMatchingQuery(e,n,Qi.min(),r)}es(e,n,r,i){return this.zi.getDocumentsMatchingQuery(e,r,i).next(s=>(n.forEach(o=>{s=s.insert(o.key,o)}),s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eN{constructor(e,n,r,i){this.persistence=e,this.ts=n,this.serializer=i,this.ns=new yt(We),this.rs=new ta(s=>Om(s),Dm),this.ss=new Map,this.os=e.getRemoteDocumentCache(),this.Qr=e.getTargetCache(),this.$r=e.getBundleCache(),this._s(r)}_s(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new $2(this.os,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.os.setIndexManager(this.indexManager),this.ts.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.ns))}}function tN(t,e,n,r){return new eN(t,e,n,r)}async function eT(t,e){const n=Pe(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let i;return n.mutationQueue.getAllMutationBatches(r).next(s=>(i=s,n._s(e),n.mutationQueue.getAllMutationBatches(r))).next(s=>{const o=[],a=[];let u=Ne();for(const c of i){o.push(c.batchId);for(const d of c.mutations)u=u.add(d.key)}for(const c of s){a.push(c.batchId);for(const d of c.mutations)u=u.add(d.key)}return n.localDocuments.getDocuments(r,u).next(c=>({us:c,removedBatchIds:o,addedBatchIds:a}))})})}function nN(t,e){const n=Pe(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),s=n.os.newChangeBuffer({trackRemovals:!0});return function(a,u,c,d){const f=c.batch,m=f.keys();let E=G.resolve();return m.forEach(C=>{E=E.next(()=>d.getEntry(u,C)).next(A=>{const O=c.docVersions.get(C);tt(O!==null),A.version.compareTo(O)<0&&(f.applyToRemoteDocument(A,c),A.isValidDocument()&&(A.setReadTime(c.commitVersion),d.addEntry(A)))})}),E.next(()=>a.mutationQueue.removeMutationBatch(u,f))}(n,r,e,s).next(()=>s.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let u=Ne();for(let c=0;c<a.mutationResults.length;++c)a.mutationResults[c].transformResults.length>0&&(u=u.add(a.batch.mutations[c].key));return u}(e))).next(()=>n.localDocuments.getDocuments(r,i))})}function tT(t){const e=Pe(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Qr.getLastRemoteSnapshotVersion(n))}function rN(t,e){const n=Pe(t),r=e.snapshotVersion;let i=n.ns;return n.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const o=n.os.newChangeBuffer({trackRemovals:!0});i=n.ns;const a=[];e.targetChanges.forEach((d,f)=>{const m=i.get(f);if(!m)return;a.push(n.Qr.removeMatchingKeys(s,d.removedDocuments,f).next(()=>n.Qr.addMatchingKeys(s,d.addedDocuments,f)));let E=m.withSequenceNumber(s.currentSequenceNumber);e.targetMismatches.get(f)!==null?E=E.withResumeToken(un.EMPTY_BYTE_STRING,Se.min()).withLastLimboFreeSnapshotVersion(Se.min()):d.resumeToken.approximateByteSize()>0&&(E=E.withResumeToken(d.resumeToken,r)),i=i.insert(f,E),function(A,O,P){return A.resumeToken.approximateByteSize()===0||O.snapshotVersion.toMicroseconds()-A.snapshotVersion.toMicroseconds()>=3e8?!0:P.addedDocuments.size+P.modifiedDocuments.size+P.removedDocuments.size>0}(m,E,d)&&a.push(n.Qr.updateTargetData(s,E))});let u=ri(),c=Ne();if(e.documentUpdates.forEach(d=>{e.resolvedLimboDocuments.has(d)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(s,d))}),a.push(iN(s,o,e.documentUpdates).next(d=>{u=d.cs,c=d.ls})),!r.isEqual(Se.min())){const d=n.Qr.getLastRemoteSnapshotVersion(s).next(f=>n.Qr.setTargetsMetadata(s,s.currentSequenceNumber,r));a.push(d)}return G.waitFor(a).next(()=>o.apply(s)).next(()=>n.localDocuments.getLocalViewOfDocuments(s,u,c)).next(()=>u)}).then(s=>(n.ns=i,s))}function iN(t,e,n){let r=Ne(),i=Ne();return n.forEach(s=>r=r.add(s)),e.getEntries(t,r).next(s=>{let o=ri();return n.forEach((a,u)=>{const c=s.get(a);u.isFoundDocument()!==c.isFoundDocument()&&(i=i.add(a)),u.isNoDocument()&&u.version.isEqual(Se.min())?(e.removeEntry(a,u.readTime),o=o.insert(a,u)):!c.isValidDocument()||u.version.compareTo(c.version)>0||u.version.compareTo(c.version)===0&&c.hasPendingWrites?(e.addEntry(u),o=o.insert(a,u)):ie("LocalStore","Ignoring outdated watch update for ",a,". Current version:",c.version," Watch version:",u.version)}),{cs:o,ls:i}})}function sN(t,e){const n=Pe(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function oN(t,e){const n=Pe(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return n.Qr.getTargetData(r,e).next(s=>s?(i=s,G.resolve(i)):n.Qr.allocateTargetId(r).next(o=>(i=new Oi(e,o,"TargetPurposeListen",r.currentSequenceNumber),n.Qr.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=n.ns.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.ns=n.ns.insert(r.targetId,r),n.rs.set(e,r.targetId)),r})}async function up(t,e,n){const r=Pe(t),i=r.ns.get(e),s=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",s,o=>r.persistence.referenceDelegate.removeTarget(o,i))}catch(o){if(!Bl(o))throw o;ie("LocalStore",`Failed to update sequence numbers for target ${e}: ${o}`)}r.ns=r.ns.remove(e),r.rs.delete(i.target)}function l_(t,e,n){const r=Pe(t);let i=Se.min(),s=Ne();return r.persistence.runTransaction("Execute query","readwrite",o=>function(u,c,d){const f=Pe(u),m=f.rs.get(d);return m!==void 0?G.resolve(f.ns.get(m)):f.Qr.getTargetData(c,d)}(r,o,Cr(e)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.Qr.getMatchingKeysForTargetId(o,a.targetId).next(u=>{s=u})}).next(()=>r.ts.getDocumentsMatchingQuery(o,e,n?i:Se.min(),n?s:Ne())).next(a=>(aN(r,Jx(e),a),{documents:a,hs:s})))}function aN(t,e,n){let r=t.ss.get(e)||Se.min();n.forEach((i,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)}),t.ss.set(e,r)}class u_{constructor(){this.activeTargetIds=i2()}As(e){this.activeTargetIds=this.activeTargetIds.add(e)}Rs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}ds(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class lN{constructor(){this.no=new u_,this.ro={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e){return this.no.As(e),this.ro[e]||"not-current"}updateQueryState(e,n,r){this.ro[e]=n}removeLocalQueryTarget(e){this.no.Rs(e)}isLocalQueryTarget(e){return this.no.activeTargetIds.has(e)}clearQueryState(e){delete this.ro[e]}getAllActiveQueryTargets(){return this.no.activeTargetIds}isActiveQueryTarget(e){return this.no.activeTargetIds.has(e)}start(){return this.no=new u_,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uN{io(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class c_{constructor(){this.so=()=>this.oo(),this._o=()=>this.ao(),this.uo=[],this.co()}io(e){this.uo.push(e)}shutdown(){window.removeEventListener("online",this.so),window.removeEventListener("offline",this._o)}co(){window.addEventListener("online",this.so),window.addEventListener("offline",this._o)}oo(){ie("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.uo)e(0)}ao(){ie("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.uo)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let bu=null;function Mh(){return bu===null?bu=function(){return 268435456+Math.round(2147483648*Math.random())}():bu++,"0x"+bu.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cN={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dN{constructor(e){this.lo=e.lo,this.ho=e.ho}Po(e){this.Io=e}To(e){this.Eo=e}Ao(e){this.Ro=e}onMessage(e){this.Vo=e}close(){this.ho()}send(e){this.lo(e)}mo(){this.Io()}fo(){this.Eo()}po(e){this.Ro(e)}yo(e){this.Vo(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rn="WebChannelConnection";class hN extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;const r=n.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.wo=r+"://"+n.host,this.So=`projects/${i}/databases/${s}`,this.bo=this.databaseId.database==="(default)"?`project_id=${i}`:`project_id=${i}&database_id=${s}`}get Do(){return!1}Co(n,r,i,s,o){const a=Mh(),u=this.vo(n,r.toUriEncodedString());ie("RestConnection",`Sending RPC '${n}' ${a}:`,u,i);const c={"google-cloud-resource-prefix":this.So,"x-goog-request-params":this.bo};return this.Fo(c,s,o),this.Mo(n,u,c,i).then(d=>(ie("RestConnection",`Received RPC '${n}' ${a}: `,d),d),d=>{throw Fo("RestConnection",`RPC '${n}' ${a} failed with error: `,d,"url: ",u,"request:",i),d})}xo(n,r,i,s,o,a){return this.Co(n,r,i,s,o)}Fo(n,r,i){n["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+ea}(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((s,o)=>n[o]=s),i&&i.headers.forEach((s,o)=>n[o]=s)}vo(n,r){const i=cN[n];return`${this.wo}/v1/${r}:${i}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Mo(e,n,r,i){const s=Mh();return new Promise((o,a)=>{const u=new h1;u.setWithCredentials(!0),u.listenOnce(p1.COMPLETE,()=>{try{switch(u.getLastErrorCode()){case Qu.NO_ERROR:const d=u.getResponseJson();ie(rn,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(d)),o(d);break;case Qu.TIMEOUT:ie(rn,`RPC '${e}' ${s} timed out`),a(new de(Q.DEADLINE_EXCEEDED,"Request time out"));break;case Qu.HTTP_ERROR:const f=u.getStatus();if(ie(rn,`RPC '${e}' ${s} failed with status:`,f,"response text:",u.getResponseText()),f>0){let m=u.getResponseJson();Array.isArray(m)&&(m=m[0]);const E=m==null?void 0:m.error;if(E&&E.status&&E.message){const C=function(O){const P=O.toLowerCase().replace(/_/g,"-");return Object.values(Q).indexOf(P)>=0?P:Q.UNKNOWN}(E.status);a(new de(C,E.message))}else a(new de(Q.UNKNOWN,"Server responded with status "+u.getStatus()))}else a(new de(Q.UNAVAILABLE,"Connection failed."));break;default:Ee()}}finally{ie(rn,`RPC '${e}' ${s} completed.`)}});const c=JSON.stringify(i);ie(rn,`RPC '${e}' ${s} sending request:`,i),u.send(n,"POST",c,r,15)})}Oo(e,n,r){const i=Mh(),s=[this.wo,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=y1(),a=g1(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},c=this.longPollingOptions.timeoutSeconds;c!==void 0&&(u.longPollingTimeout=Math.round(1e3*c)),this.useFetchStreams&&(u.xmlHttpFactory=new f1({})),this.Fo(u.initMessageHeaders,n,r),u.encodeInitMessageHeaders=!0;const d=s.join("");ie(rn,`Creating RPC '${e}' stream ${i}: ${d}`,u);const f=o.createWebChannel(d,u);let m=!1,E=!1;const C=new dN({lo:O=>{E?ie(rn,`Not sending because RPC '${e}' stream ${i} is closed:`,O):(m||(ie(rn,`Opening RPC '${e}' stream ${i} transport.`),f.open(),m=!0),ie(rn,`RPC '${e}' stream ${i} sending:`,O),f.send(O))},ho:()=>f.close()}),A=(O,P,v)=>{O.listen(P,I=>{try{v(I)}catch(M){setTimeout(()=>{throw M},0)}})};return A(f,Oa.EventType.OPEN,()=>{E||(ie(rn,`RPC '${e}' stream ${i} transport opened.`),C.mo())}),A(f,Oa.EventType.CLOSE,()=>{E||(E=!0,ie(rn,`RPC '${e}' stream ${i} transport closed`),C.po())}),A(f,Oa.EventType.ERROR,O=>{E||(E=!0,Fo(rn,`RPC '${e}' stream ${i} transport errored:`,O),C.po(new de(Q.UNAVAILABLE,"The operation could not be completed")))}),A(f,Oa.EventType.MESSAGE,O=>{var P;if(!E){const v=O.data[0];tt(!!v);const I=v,M=I.error||((P=I[0])===null||P===void 0?void 0:P.error);if(M){ie(rn,`RPC '${e}' stream ${i} received error:`,M);const F=M.status;let k=function(w){const T=Ct[w];if(T!==void 0)return H1(T)}(F),S=M.message;k===void 0&&(k=Q.INTERNAL,S="Unknown error status: "+F+" with message "+M.message),E=!0,C.po(new de(k,S)),f.close()}else ie(rn,`RPC '${e}' stream ${i} received:`,v),C.yo(v)}}),A(a,m1.STAT_EVENT,O=>{O.stat===Zf.PROXY?ie(rn,`RPC '${e}' stream ${i} detected buffering proxy`):O.stat===Zf.NOPROXY&&ie(rn,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{C.fo()},0),C}}function Vh(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kd(t){return new S2(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nT{constructor(e,n,r=1e3,i=1.5,s=6e4){this.oi=e,this.timerId=n,this.No=r,this.Lo=i,this.Bo=s,this.ko=0,this.qo=null,this.Qo=Date.now(),this.reset()}reset(){this.ko=0}Ko(){this.ko=this.Bo}$o(e){this.cancel();const n=Math.floor(this.ko+this.Uo()),r=Math.max(0,Date.now()-this.Qo),i=Math.max(0,n-r);i>0&&ie("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.ko} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.qo=this.oi.enqueueAfterDelay(this.timerId,i,()=>(this.Qo=Date.now(),e())),this.ko*=this.Lo,this.ko<this.No&&(this.ko=this.No),this.ko>this.Bo&&(this.ko=this.Bo)}Wo(){this.qo!==null&&(this.qo.skipDelay(),this.qo=null)}cancel(){this.qo!==null&&(this.qo.cancel(),this.qo=null)}Uo(){return(Math.random()-.5)*this.ko}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rT{constructor(e,n,r,i,s,o,a,u){this.oi=e,this.Go=r,this.zo=i,this.connection=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=u,this.state=0,this.jo=0,this.Ho=null,this.Jo=null,this.stream=null,this.Yo=new nT(e,n)}Zo(){return this.state===1||this.state===5||this.Xo()}Xo(){return this.state===2||this.state===3}start(){this.state!==4?this.auth():this.e_()}async stop(){this.Zo()&&await this.close(0)}t_(){this.state=0,this.Yo.reset()}n_(){this.Xo()&&this.Ho===null&&(this.Ho=this.oi.enqueueAfterDelay(this.Go,6e4,()=>this.r_()))}i_(e){this.s_(),this.stream.send(e)}async r_(){if(this.Xo())return this.close(0)}s_(){this.Ho&&(this.Ho.cancel(),this.Ho=null)}o_(){this.Jo&&(this.Jo.cancel(),this.Jo=null)}async close(e,n){this.s_(),this.o_(),this.Yo.cancel(),this.jo++,e!==4?this.Yo.reset():n&&n.code===Q.RESOURCE_EXHAUSTED?(ni(n.toString()),ni("Using maximum backoff delay to prevent overloading the backend."),this.Yo.Ko()):n&&n.code===Q.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.__(),this.stream.close(),this.stream=null),this.state=e,await this.listener.Ao(n)}__(){}auth(){this.state=1;const e=this.a_(this.jo),n=this.jo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.jo===n&&this.u_(r,i)},r=>{e(()=>{const i=new de(Q.UNKNOWN,"Fetching auth token failed: "+r.message);return this.c_(i)})})}u_(e,n){const r=this.a_(this.jo);this.stream=this.l_(e,n),this.stream.Po(()=>{r(()=>this.listener.Po())}),this.stream.To(()=>{r(()=>(this.state=2,this.Jo=this.oi.enqueueAfterDelay(this.zo,1e4,()=>(this.Xo()&&(this.state=3),Promise.resolve())),this.listener.To()))}),this.stream.Ao(i=>{r(()=>this.c_(i))}),this.stream.onMessage(i=>{r(()=>this.onMessage(i))})}e_(){this.state=5,this.Yo.$o(async()=>{this.state=0,this.start()})}c_(e){return ie("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}a_(e){return n=>{this.oi.enqueueAndForget(()=>this.jo===e?n():(ie("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class fN extends rT{constructor(e,n,r,i,s,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s}l_(e,n){return this.connection.Oo("Listen",e,n)}onMessage(e){this.Yo.reset();const n=C2(this.serializer,e),r=function(s){if(!("targetChange"in s))return Se.min();const o=s.targetChange;return o.targetIds&&o.targetIds.length?Se.min():o.readTime?Ar(o.readTime):Se.min()}(e);return this.listener.h_(n,r)}P_(e){const n={};n.database=lp(this.serializer),n.addTarget=function(s,o){let a;const u=o.target;if(a=rp(u)?{documents:k2(s,u)}:{query:b2(s,u)._t},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=K1(s,o.resumeToken);const c=sp(s,o.expectedCount);c!==null&&(a.expectedCount=c)}else if(o.snapshotVersion.compareTo(Se.min())>0){a.readTime=jc(s,o.snapshotVersion.toTimestamp());const c=sp(s,o.expectedCount);c!==null&&(a.expectedCount=c)}return a}(this.serializer,e);const r=N2(this.serializer,e);r&&(n.labels=r),this.i_(n)}I_(e){const n={};n.database=lp(this.serializer),n.removeTarget=e,this.i_(n)}}class pN extends rT{constructor(e,n,r,i,s,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s,this.T_=!1}get E_(){return this.T_}start(){this.T_=!1,this.lastStreamToken=void 0,super.start()}__(){this.T_&&this.d_([])}l_(e,n){return this.connection.Oo("Write",e,n)}onMessage(e){if(tt(!!e.streamToken),this.lastStreamToken=e.streamToken,this.T_){this.Yo.reset();const n=A2(e.writeResults,e.commitTime),r=Ar(e.commitTime);return this.listener.A_(r,n)}return tt(!e.writeResults||e.writeResults.length===0),this.T_=!0,this.listener.R_()}V_(){const e={};e.database=lp(this.serializer),this.i_(e)}d_(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>R2(this.serializer,r))};this.i_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mN extends class{}{constructor(e,n,r,i){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=i,this.m_=!1}f_(){if(this.m_)throw new de(Q.FAILED_PRECONDITION,"The client has already been terminated.")}Co(e,n,r,i){return this.f_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection.Co(e,op(n,r),i,s,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===Q.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new de(Q.UNKNOWN,s.toString())})}xo(e,n,r,i,s){return this.f_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.xo(e,op(n,r),i,o,a,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===Q.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new de(Q.UNKNOWN,o.toString())})}terminate(){this.m_=!0,this.connection.terminate()}}class gN{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.g_=0,this.p_=null,this.y_=!0}w_(){this.g_===0&&(this.S_("Unknown"),this.p_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.p_=null,this.b_("Backend didn't respond within 10 seconds."),this.S_("Offline"),Promise.resolve())))}D_(e){this.state==="Online"?this.S_("Unknown"):(this.g_++,this.g_>=1&&(this.C_(),this.b_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.S_("Offline")))}set(e){this.C_(),this.g_=0,e==="Online"&&(this.y_=!1),this.S_(e)}S_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}b_(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.y_?(ni(n),this.y_=!1):ie("OnlineStateTracker",n)}C_(){this.p_!==null&&(this.p_.cancel(),this.p_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yN{constructor(e,n,r,i,s){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.v_=[],this.F_=new Map,this.M_=new Set,this.x_=[],this.O_=s,this.O_.io(o=>{r.enqueueAndForget(async()=>{Ws(this)&&(ie("RemoteStore","Restarting streams for network reachability change."),await async function(u){const c=Pe(u);c.M_.add(4),await Wl(c),c.N_.set("Unknown"),c.M_.delete(4),await bd(c)}(this))})}),this.N_=new gN(r,i)}}async function bd(t){if(Ws(t))for(const e of t.x_)await e(!0)}async function Wl(t){for(const e of t.x_)await e(!1)}function iT(t,e){const n=Pe(t);n.F_.has(e.targetId)||(n.F_.set(e.targetId,e),Wm(n)?Hm(n):na(n).Xo()&&$m(n,e))}function Bm(t,e){const n=Pe(t),r=na(n);n.F_.delete(e),r.Xo()&&sT(n,e),n.F_.size===0&&(r.Xo()?r.n_():Ws(n)&&n.N_.set("Unknown"))}function $m(t,e){if(t.L_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Se.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}na(t).P_(e)}function sT(t,e){t.L_.xe(e),na(t).I_(e)}function Hm(t){t.L_=new _2({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>t.F_.get(e)||null,tt:()=>t.datastore.serializer.databaseId}),na(t).start(),t.N_.w_()}function Wm(t){return Ws(t)&&!na(t).Zo()&&t.F_.size>0}function Ws(t){return Pe(t).M_.size===0}function oT(t){t.L_=void 0}async function vN(t){t.N_.set("Online")}async function _N(t){t.F_.forEach((e,n)=>{$m(t,e)})}async function wN(t,e){oT(t),Wm(t)?(t.N_.D_(e),Hm(t)):t.N_.set("Unknown")}async function EN(t,e,n){if(t.N_.set("Online"),e instanceof q1&&e.state===2&&e.cause)try{await async function(i,s){const o=s.cause;for(const a of s.targetIds)i.F_.has(a)&&(await i.remoteSyncer.rejectListen(a,o),i.F_.delete(a),i.L_.removeTarget(a))}(t,e)}catch(r){ie("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),await Fc(t,r)}else if(e instanceof Ju?t.L_.Ke(e):e instanceof W1?t.L_.He(e):t.L_.We(e),!n.isEqual(Se.min()))try{const r=await tT(t.localStore);n.compareTo(r)>=0&&await function(s,o){const a=s.L_.rt(o);return a.targetChanges.forEach((u,c)=>{if(u.resumeToken.approximateByteSize()>0){const d=s.F_.get(c);d&&s.F_.set(c,d.withResumeToken(u.resumeToken,o))}}),a.targetMismatches.forEach((u,c)=>{const d=s.F_.get(u);if(!d)return;s.F_.set(u,d.withResumeToken(un.EMPTY_BYTE_STRING,d.snapshotVersion)),sT(s,u);const f=new Oi(d.target,u,c,d.sequenceNumber);$m(s,f)}),s.remoteSyncer.applyRemoteEvent(a)}(t,n)}catch(r){ie("RemoteStore","Failed to raise snapshot:",r),await Fc(t,r)}}async function Fc(t,e,n){if(!Bl(e))throw e;t.M_.add(1),await Wl(t),t.N_.set("Offline"),n||(n=()=>tT(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{ie("RemoteStore","Retrying IndexedDB access"),await n(),t.M_.delete(1),await bd(t)})}function aT(t,e){return e().catch(n=>Fc(t,n,e))}async function xd(t){const e=Pe(t),n=Xi(e);let r=e.v_.length>0?e.v_[e.v_.length-1].batchId:-1;for(;TN(e);)try{const i=await sN(e.localStore,r);if(i===null){e.v_.length===0&&n.n_();break}r=i.batchId,SN(e,i)}catch(i){await Fc(e,i)}lT(e)&&uT(e)}function TN(t){return Ws(t)&&t.v_.length<10}function SN(t,e){t.v_.push(e);const n=Xi(t);n.Xo()&&n.E_&&n.d_(e.mutations)}function lT(t){return Ws(t)&&!Xi(t).Zo()&&t.v_.length>0}function uT(t){Xi(t).start()}async function IN(t){Xi(t).V_()}async function PN(t){const e=Xi(t);for(const n of t.v_)e.d_(n.mutations)}async function CN(t,e,n){const r=t.v_.shift(),i=Mm.from(r,e,n);await aT(t,()=>t.remoteSyncer.applySuccessfulWrite(i)),await xd(t)}async function RN(t,e){e&&Xi(t).E_&&await async function(r,i){if(function(o){return g2(o)&&o!==Q.ABORTED}(i.code)){const s=r.v_.shift();Xi(r).t_(),await aT(r,()=>r.remoteSyncer.rejectFailedWrite(s.batchId,i)),await xd(r)}}(t,e),lT(t)&&uT(t)}async function d_(t,e){const n=Pe(t);n.asyncQueue.verifyOperationInProgress(),ie("RemoteStore","RemoteStore received new credentials");const r=Ws(n);n.M_.add(3),await Wl(n),r&&n.N_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.M_.delete(3),await bd(n)}async function AN(t,e){const n=Pe(t);e?(n.M_.delete(2),await bd(n)):e||(n.M_.add(2),await Wl(n),n.N_.set("Unknown"))}function na(t){return t.B_||(t.B_=function(n,r,i){const s=Pe(n);return s.f_(),new fN(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(t.datastore,t.asyncQueue,{Po:vN.bind(null,t),To:_N.bind(null,t),Ao:wN.bind(null,t),h_:EN.bind(null,t)}),t.x_.push(async e=>{e?(t.B_.t_(),Wm(t)?Hm(t):t.N_.set("Unknown")):(await t.B_.stop(),oT(t))})),t.B_}function Xi(t){return t.k_||(t.k_=function(n,r,i){const s=Pe(n);return s.f_(),new pN(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(t.datastore,t.asyncQueue,{Po:()=>Promise.resolve(),To:IN.bind(null,t),Ao:RN.bind(null,t),R_:PN.bind(null,t),A_:CN.bind(null,t)}),t.x_.push(async e=>{e?(t.k_.t_(),await xd(t)):(await t.k_.stop(),t.v_.length>0&&(ie("RemoteStore",`Stopping write stream with ${t.v_.length} pending writes`),t.v_=[]))})),t.k_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qm{constructor(e,n,r,i,s){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new Wi,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,i,s){const o=Date.now()+r,a=new qm(e,n,o,i,s);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new de(Q.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Km(t,e){if(ni("AsyncQueue",`${e}: ${t}`),Bl(t))return new de(Q.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Co{constructor(e){this.comparator=e?(n,r)=>e(n,r)||he.comparator(n.key,r.key):(n,r)=>he.comparator(n.key,r.key),this.keyedMap=Da(),this.sortedSet=new yt(this.comparator)}static emptySet(e){return new Co(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof Co)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new Co;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class h_{constructor(){this.q_=new yt(he.comparator)}track(e){const n=e.doc.key,r=this.q_.get(n);r?e.type!==0&&r.type===3?this.q_=this.q_.insert(n,e):e.type===3&&r.type!==1?this.q_=this.q_.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.q_=this.q_.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.q_=this.q_.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.q_=this.q_.remove(n):e.type===1&&r.type===2?this.q_=this.q_.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.q_=this.q_.insert(n,{type:2,doc:e.doc}):Ee():this.q_=this.q_.insert(n,e)}Q_(){const e=[];return this.q_.inorderTraversal((n,r)=>{e.push(r)}),e}}class qo{constructor(e,n,r,i,s,o,a,u,c){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=u,this.hasCachedResults=c}static fromInitialDocuments(e,n,r,i,s){const o=[];return n.forEach(a=>{o.push({type:0,doc:a})}),new qo(e,n,Co.emptySet(n),o,r,i,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Id(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==r[i].type||!n[i].doc.isEqual(r[i].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kN{constructor(){this.K_=void 0,this.U_=[]}W_(){return this.U_.some(e=>e.G_())}}class bN{constructor(){this.queries=new ta(e=>k1(e),Id),this.onlineState="Unknown",this.z_=new Set}}async function xN(t,e){const n=Pe(t);let r=3;const i=e.query;let s=n.queries.get(i);s?!s.W_()&&e.G_()&&(r=2):(s=new kN,r=e.G_()?0:1);try{switch(r){case 0:s.K_=await n.onListen(i,!0);break;case 1:s.K_=await n.onListen(i,!1);break;case 2:await n.onFirstRemoteStoreListen(i)}}catch(o){const a=Km(o,`Initialization of query '${no(e.query)}' failed`);return void e.onError(a)}n.queries.set(i,s),s.U_.push(e),e.j_(n.onlineState),s.K_&&e.H_(s.K_)&&Gm(n)}async function NN(t,e){const n=Pe(t),r=e.query;let i=3;const s=n.queries.get(r);if(s){const o=s.U_.indexOf(e);o>=0&&(s.U_.splice(o,1),s.U_.length===0?i=e.G_()?0:1:!s.W_()&&e.G_()&&(i=2))}switch(i){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function ON(t,e){const n=Pe(t);let r=!1;for(const i of e){const s=i.query,o=n.queries.get(s);if(o){for(const a of o.U_)a.H_(i)&&(r=!0);o.K_=i}}r&&Gm(n)}function DN(t,e,n){const r=Pe(t),i=r.queries.get(e);if(i)for(const s of i.U_)s.onError(n);r.queries.delete(e)}function Gm(t){t.z_.forEach(e=>{e.next()})}var cp,f_;(f_=cp||(cp={})).J_="default",f_.Cache="cache";class LN{constructor(e,n,r){this.query=e,this.Y_=n,this.Z_=!1,this.X_=null,this.onlineState="Unknown",this.options=r||{}}H_(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)i.type!==3&&r.push(i);e=new qo(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Z_?this.ea(e)&&(this.Y_.next(e),n=!0):this.ta(e,this.onlineState)&&(this.na(e),n=!0),this.X_=e,n}onError(e){this.Y_.error(e)}j_(e){this.onlineState=e;let n=!1;return this.X_&&!this.Z_&&this.ta(this.X_,e)&&(this.na(this.X_),n=!0),n}ta(e,n){if(!e.fromCache||!this.G_())return!0;const r=n!=="Offline";return(!this.options.ra||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}ea(e){if(e.docChanges.length>0)return!0;const n=this.X_&&this.X_.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}na(e){e=qo.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Z_=!0,this.Y_.next(e)}G_(){return this.options.source!==cp.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cT{constructor(e){this.key=e}}class dT{constructor(e){this.key=e}}class MN{constructor(e,n){this.query=e,this.la=n,this.ha=null,this.hasCachedResults=!1,this.current=!1,this.Pa=Ne(),this.mutatedKeys=Ne(),this.Ia=b1(e),this.Ta=new Co(this.Ia)}get Ea(){return this.la}da(e,n){const r=n?n.Aa:new h_,i=n?n.Ta:this.Ta;let s=n?n.mutatedKeys:this.mutatedKeys,o=i,a=!1;const u=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,c=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((d,f)=>{const m=i.get(d),E=Pd(this.query,f)?f:null,C=!!m&&this.mutatedKeys.has(m.key),A=!!E&&(E.hasLocalMutations||this.mutatedKeys.has(E.key)&&E.hasCommittedMutations);let O=!1;m&&E?m.data.isEqual(E.data)?C!==A&&(r.track({type:3,doc:E}),O=!0):this.Ra(m,E)||(r.track({type:2,doc:E}),O=!0,(u&&this.Ia(E,u)>0||c&&this.Ia(E,c)<0)&&(a=!0)):!m&&E?(r.track({type:0,doc:E}),O=!0):m&&!E&&(r.track({type:1,doc:m}),O=!0,(u||c)&&(a=!0)),O&&(E?(o=o.add(E),s=A?s.add(d):s.delete(d)):(o=o.delete(d),s=s.delete(d)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const d=this.query.limitType==="F"?o.last():o.first();o=o.delete(d.key),s=s.delete(d.key),r.track({type:1,doc:d})}return{Ta:o,Aa:r,Xi:a,mutatedKeys:s}}Ra(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,i){const s=this.Ta;this.Ta=e.Ta,this.mutatedKeys=e.mutatedKeys;const o=e.Aa.Q_();o.sort((d,f)=>function(E,C){const A=O=>{switch(O){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Ee()}};return A(E)-A(C)}(d.type,f.type)||this.Ia(d.doc,f.doc)),this.Va(r),i=i!=null&&i;const a=n&&!i?this.ma():[],u=this.Pa.size===0&&this.current&&!i?1:0,c=u!==this.ha;return this.ha=u,o.length!==0||c?{snapshot:new qo(this.query,e.Ta,s,o,e.mutatedKeys,u===0,c,!1,!!r&&r.resumeToken.approximateByteSize()>0),fa:a}:{fa:a}}j_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ta:this.Ta,Aa:new h_,mutatedKeys:this.mutatedKeys,Xi:!1},!1)):{fa:[]}}ga(e){return!this.la.has(e)&&!!this.Ta.has(e)&&!this.Ta.get(e).hasLocalMutations}Va(e){e&&(e.addedDocuments.forEach(n=>this.la=this.la.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.la=this.la.delete(n)),this.current=e.current)}ma(){if(!this.current)return[];const e=this.Pa;this.Pa=Ne(),this.Ta.forEach(r=>{this.ga(r.key)&&(this.Pa=this.Pa.add(r.key))});const n=[];return e.forEach(r=>{this.Pa.has(r)||n.push(new dT(r))}),this.Pa.forEach(r=>{e.has(r)||n.push(new cT(r))}),n}pa(e){this.la=e.hs,this.Pa=Ne();const n=this.da(e.documents);return this.applyChanges(n,!0)}ya(){return qo.fromInitialDocuments(this.query,this.Ta,this.mutatedKeys,this.ha===0,this.hasCachedResults)}}class VN{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class jN{constructor(e){this.key=e,this.wa=!1}}class FN{constructor(e,n,r,i,s,o){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.Sa={},this.ba=new ta(a=>k1(a),Id),this.Da=new Map,this.Ca=new Set,this.va=new yt(he.comparator),this.Fa=new Map,this.Ma=new Fm,this.xa={},this.Oa=new Map,this.Na=Wo.Ln(),this.onlineState="Unknown",this.La=void 0}get isPrimaryClient(){return this.La===!0}}async function UN(t,e,n=!0){const r=yT(t);let i;const s=r.ba.get(e);return s?(r.sharedClientState.addLocalQueryTarget(s.targetId),i=s.view.ya()):i=await hT(r,e,n,!0),i}async function zN(t,e){const n=yT(t);await hT(n,e,!0,!1)}async function hT(t,e,n,r){const i=await oN(t.localStore,Cr(e)),s=i.targetId,o=n?t.sharedClientState.addLocalQueryTarget(s):"not-current";let a;return r&&(a=await BN(t,e,s,o==="current",i.resumeToken)),t.isPrimaryClient&&n&&iT(t.remoteStore,i),a}async function BN(t,e,n,r,i){t.Ba=(f,m,E)=>async function(A,O,P,v){let I=O.view.da(P);I.Xi&&(I=await l_(A.localStore,O.query,!1).then(({documents:S})=>O.view.da(S,I)));const M=v&&v.targetChanges.get(O.targetId),F=v&&v.targetMismatches.get(O.targetId)!=null,k=O.view.applyChanges(I,A.isPrimaryClient,M,F);return m_(A,O.targetId,k.fa),k.snapshot}(t,f,m,E);const s=await l_(t.localStore,e,!0),o=new MN(e,s.hs),a=o.da(s.documents),u=Hl.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",i),c=o.applyChanges(a,t.isPrimaryClient,u);m_(t,n,c.fa);const d=new VN(e,n,o);return t.ba.set(e,d),t.Da.has(n)?t.Da.get(n).push(e):t.Da.set(n,[e]),c.snapshot}async function $N(t,e,n){const r=Pe(t),i=r.ba.get(e),s=r.Da.get(i.targetId);if(s.length>1)return r.Da.set(i.targetId,s.filter(o=>!Id(o,e))),void r.ba.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await up(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),n&&Bm(r.remoteStore,i.targetId),dp(r,i.targetId)}).catch(zl)):(dp(r,i.targetId),await up(r.localStore,i.targetId,!0))}async function HN(t,e){const n=Pe(t),r=n.ba.get(e),i=n.Da.get(r.targetId);n.isPrimaryClient&&i.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),Bm(n.remoteStore,r.targetId))}async function WN(t,e,n){const r=JN(t);try{const i=await function(o,a){const u=Pe(o),c=Dt.now(),d=a.reduce((E,C)=>E.add(C.key),Ne());let f,m;return u.persistence.runTransaction("Locally write mutations","readwrite",E=>{let C=ri(),A=Ne();return u.os.getEntries(E,d).next(O=>{C=O,C.forEach((P,v)=>{v.isValidDocument()||(A=A.add(P))})}).next(()=>u.localDocuments.getOverlayedDocuments(E,C)).next(O=>{f=O;const P=[];for(const v of a){const I=d2(v,f.get(v.key).overlayedDocument);I!=null&&P.push(new ts(v.key,I,T1(I.value.mapValue),Rr.exists(!0)))}return u.mutationQueue.addMutationBatch(E,c,P,a)}).next(O=>{m=O;const P=O.applyToLocalDocumentSet(f,A);return u.documentOverlayCache.saveOverlays(E,O.batchId,P)})}).then(()=>({batchId:m.batchId,changes:N1(f)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(o,a,u){let c=o.xa[o.currentUser.toKey()];c||(c=new yt(We)),c=c.insert(a,u),o.xa[o.currentUser.toKey()]=c}(r,i.batchId,n),await ql(r,i.changes),await xd(r.remoteStore)}catch(i){const s=Km(i,"Failed to persist write");n.reject(s)}}async function fT(t,e){const n=Pe(t);try{const r=await rN(n.localStore,e);e.targetChanges.forEach((i,s)=>{const o=n.Fa.get(s);o&&(tt(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?o.wa=!0:i.modifiedDocuments.size>0?tt(o.wa):i.removedDocuments.size>0&&(tt(o.wa),o.wa=!1))}),await ql(n,r,e)}catch(r){await zl(r)}}function p_(t,e,n){const r=Pe(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const i=[];r.ba.forEach((s,o)=>{const a=o.view.j_(e);a.snapshot&&i.push(a.snapshot)}),function(o,a){const u=Pe(o);u.onlineState=a;let c=!1;u.queries.forEach((d,f)=>{for(const m of f.U_)m.j_(a)&&(c=!0)}),c&&Gm(u)}(r.eventManager,e),i.length&&r.Sa.h_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function qN(t,e,n){const r=Pe(t);r.sharedClientState.updateQueryState(e,"rejected",n);const i=r.Fa.get(e),s=i&&i.key;if(s){let o=new yt(he.comparator);o=o.insert(s,an.newNoDocument(s,Se.min()));const a=Ne().add(s),u=new Ad(Se.min(),new Map,new yt(We),o,a);await fT(r,u),r.va=r.va.remove(s),r.Fa.delete(e),Qm(r)}else await up(r.localStore,e,!1).then(()=>dp(r,e,n)).catch(zl)}async function KN(t,e){const n=Pe(t),r=e.batch.batchId;try{const i=await nN(n.localStore,e);mT(n,r,null),pT(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await ql(n,i)}catch(i){await zl(i)}}async function GN(t,e,n){const r=Pe(t);try{const i=await function(o,a){const u=Pe(o);return u.persistence.runTransaction("Reject batch","readwrite-primary",c=>{let d;return u.mutationQueue.lookupMutationBatch(c,a).next(f=>(tt(f!==null),d=f.keys(),u.mutationQueue.removeMutationBatch(c,f))).next(()=>u.mutationQueue.performConsistencyCheck(c)).next(()=>u.documentOverlayCache.removeOverlaysForBatchId(c,d,a)).next(()=>u.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(c,d)).next(()=>u.localDocuments.getDocuments(c,d))})}(r.localStore,e);mT(r,e,n),pT(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await ql(r,i)}catch(i){await zl(i)}}function pT(t,e){(t.Oa.get(e)||[]).forEach(n=>{n.resolve()}),t.Oa.delete(e)}function mT(t,e,n){const r=Pe(t);let i=r.xa[r.currentUser.toKey()];if(i){const s=i.get(e);s&&(n?s.reject(n):s.resolve(),i=i.remove(e)),r.xa[r.currentUser.toKey()]=i}}function dp(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Da.get(e))t.ba.delete(r),n&&t.Sa.ka(r,n);t.Da.delete(e),t.isPrimaryClient&&t.Ma.Vr(e).forEach(r=>{t.Ma.containsKey(r)||gT(t,r)})}function gT(t,e){t.Ca.delete(e.path.canonicalString());const n=t.va.get(e);n!==null&&(Bm(t.remoteStore,n),t.va=t.va.remove(e),t.Fa.delete(n),Qm(t))}function m_(t,e,n){for(const r of n)r instanceof cT?(t.Ma.addReference(r.key,e),QN(t,r)):r instanceof dT?(ie("SyncEngine","Document no longer in limbo: "+r.key),t.Ma.removeReference(r.key,e),t.Ma.containsKey(r.key)||gT(t,r.key)):Ee()}function QN(t,e){const n=e.key,r=n.path.canonicalString();t.va.get(n)||t.Ca.has(r)||(ie("SyncEngine","New document in limbo: "+n),t.Ca.add(r),Qm(t))}function Qm(t){for(;t.Ca.size>0&&t.va.size<t.maxConcurrentLimboResolutions;){const e=t.Ca.values().next().value;t.Ca.delete(e);const n=new he(Tt.fromString(e)),r=t.Na.next();t.Fa.set(r,new jN(n)),t.va=t.va.insert(n,r),iT(t.remoteStore,new Oi(Cr(Lm(n.path)),r,"TargetPurposeLimboResolution",km.oe))}}async function ql(t,e,n){const r=Pe(t),i=[],s=[],o=[];r.ba.isEmpty()||(r.ba.forEach((a,u)=>{o.push(r.Ba(u,e,n).then(c=>{var d;if((c||n)&&r.isPrimaryClient){const f=c?!c.fromCache:(d=n==null?void 0:n.targetChanges.get(u.targetId))===null||d===void 0?void 0:d.current;r.sharedClientState.updateQueryState(u.targetId,f?"current":"not-current")}if(c){i.push(c);const f=zm.Ki(u.targetId,c);s.push(f)}}))}),await Promise.all(o),r.Sa.h_(i),await async function(u,c){const d=Pe(u);try{await d.persistence.runTransaction("notifyLocalViewChanges","readwrite",f=>G.forEach(c,m=>G.forEach(m.qi,E=>d.persistence.referenceDelegate.addReference(f,m.targetId,E)).next(()=>G.forEach(m.Qi,E=>d.persistence.referenceDelegate.removeReference(f,m.targetId,E)))))}catch(f){if(!Bl(f))throw f;ie("LocalStore","Failed to update sequence numbers: "+f)}for(const f of c){const m=f.targetId;if(!f.fromCache){const E=d.ns.get(m),C=E.snapshotVersion,A=E.withLastLimboFreeSnapshotVersion(C);d.ns=d.ns.insert(m,A)}}}(r.localStore,s))}async function YN(t,e){const n=Pe(t);if(!n.currentUser.isEqual(e)){ie("SyncEngine","User change. New user:",e.toKey());const r=await eT(n.localStore,e);n.currentUser=e,function(s,o){s.Oa.forEach(a=>{a.forEach(u=>{u.reject(new de(Q.CANCELLED,o))})}),s.Oa.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await ql(n,r.us)}}function XN(t,e){const n=Pe(t),r=n.Fa.get(e);if(r&&r.wa)return Ne().add(r.key);{let i=Ne();const s=n.Da.get(e);if(!s)return i;for(const o of s){const a=n.ba.get(o);i=i.unionWith(a.view.Ea)}return i}}function yT(t){const e=Pe(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=fT.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=XN.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=qN.bind(null,e),e.Sa.h_=ON.bind(null,e.eventManager),e.Sa.ka=DN.bind(null,e.eventManager),e}function JN(t){const e=Pe(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=KN.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=GN.bind(null,e),e}class g_{constructor(){this.synchronizeTabs=!1}async initialize(e){this.serializer=kd(e.databaseInfo.databaseId),this.sharedClientState=this.createSharedClientState(e),this.persistence=this.createPersistence(e),await this.persistence.start(),this.localStore=this.createLocalStore(e),this.gcScheduler=this.createGarbageCollectionScheduler(e,this.localStore),this.indexBackfillerScheduler=this.createIndexBackfillerScheduler(e,this.localStore)}createGarbageCollectionScheduler(e,n){return null}createIndexBackfillerScheduler(e,n){return null}createLocalStore(e){return tN(this.persistence,new Z2,e.initialUser,this.serializer)}createPersistence(e){return new Y2(Um.Hr,this.serializer)}createSharedClientState(e){return new lN}async terminate(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}class ZN{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>p_(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=YN.bind(null,this.syncEngine),await AN(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new bN}()}createDatastore(e){const n=kd(e.databaseInfo.databaseId),r=function(s){return new hN(s)}(e.databaseInfo);return function(s,o,a,u){return new mN(s,o,a,u)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,i,s,o,a){return new yN(r,i,s,o,a)}(this.localStore,this.datastore,e.asyncQueue,n=>p_(this.syncEngine,n,0),function(){return c_.D()?new c_:new uN}())}createSyncEngine(e,n){return function(i,s,o,a,u,c,d){const f=new FN(i,s,o,a,u,c);return d&&(f.La=!0),f}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e;await async function(r){const i=Pe(r);ie("RemoteStore","RemoteStore shutting down."),i.M_.add(5),await Wl(i),i.O_.shutdown(),i.N_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eO{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Ka(this.observer.next,e)}error(e){this.observer.error?this.Ka(this.observer.error,e):ni("Uncaught Error in snapshot listener:",e.toString())}$a(){this.muted=!0}Ka(e,n){this.muted||setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tO{constructor(e,n,r,i){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=sn.UNAUTHENTICATED,this.clientId=_1.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,async s=>{ie("FirestoreClient","Received user=",s.uid),await this.authCredentialListener(s),this.user=s}),this.appCheckCredentials.start(r,s=>(ie("FirestoreClient","Received new app check token=",s),this.appCheckCredentialListener(s,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new de(Q.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Wi;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=Km(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function jh(t,e){t.asyncQueue.verifyOperationInProgress(),ie("FirestoreClient","Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async i=>{r.isEqual(i)||(await eT(e.localStore,i),r=i)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function y_(t,e){t.asyncQueue.verifyOperationInProgress();const n=await rO(t);ie("FirestoreClient","Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>d_(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,i)=>d_(e.remoteStore,i)),t._onlineComponents=e}function nO(t){return t.name==="FirebaseError"?t.code===Q.FAILED_PRECONDITION||t.code===Q.UNIMPLEMENTED:!(typeof DOMException<"u"&&t instanceof DOMException)||t.code===22||t.code===20||t.code===11}async function rO(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){ie("FirestoreClient","Using user provided OfflineComponentProvider");try{await jh(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!nO(n))throw n;Fo("Error using user provided cache. Falling back to memory cache: "+n),await jh(t,new g_)}}else ie("FirestoreClient","Using default OfflineComponentProvider"),await jh(t,new g_);return t._offlineComponents}async function vT(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(ie("FirestoreClient","Using user provided OnlineComponentProvider"),await y_(t,t._uninitializedComponentsProvider._online)):(ie("FirestoreClient","Using default OnlineComponentProvider"),await y_(t,new ZN))),t._onlineComponents}function iO(t){return vT(t).then(e=>e.syncEngine)}async function sO(t){const e=await vT(t),n=e.eventManager;return n.onListen=UN.bind(null,e.syncEngine),n.onUnlisten=$N.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=zN.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=HN.bind(null,e.syncEngine),n}function oO(t,e,n={}){const r=new Wi;return t.asyncQueue.enqueueAndForget(async()=>function(s,o,a,u,c){const d=new eO({next:m=>{o.enqueueAndForget(()=>NN(s,f));const E=m.docs.has(a);!E&&m.fromCache?c.reject(new de(Q.UNAVAILABLE,"Failed to get document because the client is offline.")):E&&m.fromCache&&u&&u.source==="server"?c.reject(new de(Q.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):c.resolve(m)},error:m=>c.reject(m)}),f=new LN(Lm(a.path),d,{includeMetadataChanges:!0,ra:!0});return xN(s,f)}(await sO(t),t.asyncQueue,e,n,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _T(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const v_=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aO(t,e,n){if(!n)throw new de(Q.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function lO(t,e,n,r){if(e===!0&&r===!0)throw new de(Q.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function __(t){if(!he.isDocumentKey(t))throw new de(Q.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function Ym(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":Ee()}function Ls(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new de(Q.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Ym(t);throw new de(Q.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class w_{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new de(Q.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new de(Q.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}lO("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=_T((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new de(Q.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new de(Q.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new de(Q.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Xm{constructor(e,n,r,i){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new w_({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new de(Q.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!==void 0}_setSettings(e){if(this._settingsFrozen)throw new de(Q.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new w_(e),e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new wx;switch(r.type){case"firstParty":return new Ix(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new de(Q.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=v_.get(n);r&&(ie("ComponentProvider","Removing Datastore"),v_.delete(n),r.terminate())}(this),Promise.resolve()}}function uO(t,e,n,r={}){var i;const s=(t=Ls(t,Xm))._getSettings(),o=`${e}:${n}`;if(s.host!=="firestore.googleapis.com"&&s.host!==o&&Fo("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},s),{host:o,ssl:!1})),r.mockUserToken){let a,u;if(typeof r.mockUserToken=="string")a=r.mockUserToken,u=sn.MOCK_USER;else{a=Jk(r.mockUserToken,(i=t._app)===null||i===void 0?void 0:i.options.projectId);const c=r.mockUserToken.sub||r.mockUserToken.user_id;if(!c)throw new de(Q.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");u=new sn(c)}t._authCredentials=new Ex(new v1(a,u))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jm{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Jm(this.firestore,e,this._query)}}class Mn{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Pl(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Mn(this.firestore,e,this._key)}}class Pl extends Jm{constructor(e,n,r){super(e,n,Lm(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Mn(this.firestore,null,new he(e))}withConverter(e){return new Pl(this.firestore,e,this._path)}}function qs(t,e,...n){if(t=Lt(t),arguments.length===1&&(e=_1.newId()),aO("doc","path",e),t instanceof Xm){const r=Tt.fromString(e,...n);return __(r),new Mn(t,null,new he(r))}{if(!(t instanceof Mn||t instanceof Pl))throw new de(Q.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Tt.fromString(e,...n));return __(r),new Mn(t.firestore,t instanceof Pl?t.converter:null,new he(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cO{constructor(){this.iu=Promise.resolve(),this.su=[],this.ou=!1,this._u=[],this.au=null,this.uu=!1,this.cu=!1,this.lu=[],this.Yo=new nT(this,"async_queue_retry"),this.hu=()=>{const n=Vh();n&&ie("AsyncQueue","Visibility state changed to "+n.visibilityState),this.Yo.Wo()};const e=Vh();e&&typeof e.addEventListener=="function"&&e.addEventListener("visibilitychange",this.hu)}get isShuttingDown(){return this.ou}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Pu(),this.Iu(e)}enterRestrictedMode(e){if(!this.ou){this.ou=!0,this.cu=e||!1;const n=Vh();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.hu)}}enqueue(e){if(this.Pu(),this.ou)return new Promise(()=>{});const n=new Wi;return this.Iu(()=>this.ou&&this.cu?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.su.push(e),this.Tu()))}async Tu(){if(this.su.length!==0){try{await this.su[0](),this.su.shift(),this.Yo.reset()}catch(e){if(!Bl(e))throw e;ie("AsyncQueue","Operation failed with retryable error: "+e)}this.su.length>0&&this.Yo.$o(()=>this.Tu())}}Iu(e){const n=this.iu.then(()=>(this.uu=!0,e().catch(r=>{this.au=r,this.uu=!1;const i=function(o){let a=o.message||"";return o.stack&&(a=o.stack.includes(o.message)?o.stack:o.message+`
`+o.stack),a}(r);throw ni("INTERNAL UNHANDLED ERROR: ",i),r}).then(r=>(this.uu=!1,r))));return this.iu=n,n}enqueueAfterDelay(e,n,r){this.Pu(),this.lu.indexOf(e)>-1&&(n=0);const i=qm.createAndSchedule(this,e,n,r,s=>this.Eu(s));return this._u.push(i),i}Pu(){this.au&&Ee()}verifyOperationInProgress(){}async du(){let e;do e=this.iu,await e;while(e!==this.iu)}Au(e){for(const n of this._u)if(n.timerId===e)return!0;return!1}Ru(e){return this.du().then(()=>{this._u.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this._u)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.du()})}Vu(e){this.lu.push(e)}Eu(e){const n=this._u.indexOf(e);this._u.splice(n,1)}}class Nd extends Xm{constructor(e,n,r,i){super(e,n,r,i),this.type="firestore",this._queue=function(){return new cO}(),this._persistenceKey=(i==null?void 0:i.name)||"[DEFAULT]"}_terminate(){return this._firestoreClient||ET(this),this._firestoreClient.terminate()}}function dO(t,e){const n=typeof t=="object"?t:l1(),r=typeof t=="string"?t:"(default)",i=Rm(n,"firestore").getImmediate({identifier:r});if(!i._initialized){const s=Yk("firestore");s&&uO(i,...s)}return i}function wT(t){return t._firestoreClient||ET(t),t._firestoreClient.verifyNotTerminated(),t._firestoreClient}function ET(t){var e,n,r;const i=t._freezeSettings(),s=function(a,u,c,d){return new Vx(a,u,c,d.host,d.ssl,d.experimentalForceLongPolling,d.experimentalAutoDetectLongPolling,_T(d.experimentalLongPollingOptions),d.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,i);t._firestoreClient=new tO(t._authCredentials,t._appCheckCredentials,t._queue,s),!((n=i.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._firestoreClient._uninitializedComponentsProvider={_offlineKind:i.localCache.kind,_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ko{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Ko(un.fromBase64String(e))}catch(n){throw new de(Q.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new Ko(un.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Od{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new de(Q.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Ht(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kl{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zm{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new de(Q.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new de(Q.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return We(this._lat,e._lat)||We(this._long,e._long)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hO=/^__.*__$/;class fO{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new ts(e,this.data,this.fieldMask,n,this.fieldTransforms):new $l(e,this.data,n,this.fieldTransforms)}}class TT{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new ts(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function ST(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Ee()}}class Dd{constructor(e,n,r,i,s,o){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,s===void 0&&this.mu(),this.fieldTransforms=s||[],this.fieldMask=o||[]}get path(){return this.settings.path}get fu(){return this.settings.fu}gu(e){return new Dd(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}pu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.gu({path:r,yu:!1});return i.wu(e),i}Su(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.gu({path:r,yu:!1});return i.mu(),i}bu(e){return this.gu({path:void 0,yu:!0})}Du(e){return Uc(e,this.settings.methodName,this.settings.Cu||!1,this.path,this.settings.vu)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}mu(){if(this.path)for(let e=0;e<this.path.length;e++)this.wu(this.path.get(e))}wu(e){if(e.length===0)throw this.Du("Document fields must not be empty");if(ST(this.fu)&&hO.test(e))throw this.Du('Document fields cannot begin and end with "__"')}}class pO{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||kd(e)}Fu(e,n,r,i=!1){return new Dd({fu:e,methodName:n,vu:r,path:Ht.emptyPath(),yu:!1,Cu:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function IT(t){const e=t._freezeSettings(),n=kd(t._databaseId);return new pO(t._databaseId,!!e.ignoreUndefinedProperties,n)}function mO(t,e,n,r,i,s={}){const o=t.Fu(s.merge||s.mergeFields?2:0,e,n,i);ng("Data must be an object, but it was:",o,r);const a=CT(r,o);let u,c;if(s.merge)u=new Dn(o.fieldMask),c=o.fieldTransforms;else if(s.mergeFields){const d=[];for(const f of s.mergeFields){const m=hp(e,f,n);if(!o.contains(m))throw new de(Q.INVALID_ARGUMENT,`Field '${m}' is specified in your field mask but missing from your input data.`);AT(d,m)||d.push(m)}u=new Dn(d),c=o.fieldTransforms.filter(f=>u.covers(f.field))}else u=null,c=o.fieldTransforms;return new fO(new En(a),u,c)}class Ld extends Kl{_toFieldTransform(e){if(e.fu!==2)throw e.fu===1?e.Du(`${this._methodName}() can only appear at the top level of your update data`):e.Du(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Ld}}function PT(t,e,n){return new Dd({fu:3,vu:e.settings.vu,methodName:t._methodName,yu:n},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class eg extends Kl{constructor(e,n){super(e),this.Mu=n}_toFieldTransform(e){const n=PT(this,e,!0),r=this.Mu.map(s=>ra(s,n)),i=new $o(r);return new U1(e.path,i)}isEqual(e){return e instanceof eg&&Vo(this.Mu,e.Mu)}}class tg extends Kl{constructor(e,n){super(e),this.Mu=n}_toFieldTransform(e){const n=PT(this,e,!0),r=this.Mu.map(s=>ra(s,n)),i=new Ho(r);return new U1(e.path,i)}isEqual(e){return e instanceof tg&&Vo(this.Mu,e.Mu)}}function gO(t,e,n,r){const i=t.Fu(1,e,n);ng("Data must be an object, but it was:",i,r);const s=[],o=En.empty();Hs(r,(u,c)=>{const d=rg(e,u,n);c=Lt(c);const f=i.Su(d);if(c instanceof Ld)s.push(d);else{const m=ra(c,f);m!=null&&(s.push(d),o.set(d,m))}});const a=new Dn(s);return new TT(o,a,i.fieldTransforms)}function yO(t,e,n,r,i,s){const o=t.Fu(1,e,n),a=[hp(e,r,n)],u=[i];if(s.length%2!=0)throw new de(Q.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let m=0;m<s.length;m+=2)a.push(hp(e,s[m])),u.push(s[m+1]);const c=[],d=En.empty();for(let m=a.length-1;m>=0;--m)if(!AT(c,a[m])){const E=a[m];let C=u[m];C=Lt(C);const A=o.Su(E);if(C instanceof Ld)c.push(E);else{const O=ra(C,A);O!=null&&(c.push(E),d.set(E,O))}}const f=new Dn(c);return new TT(d,f,o.fieldTransforms)}function ra(t,e){if(RT(t=Lt(t)))return ng("Unsupported field value:",e,t),CT(t,e);if(t instanceof Kl)return function(r,i){if(!ST(i.fu))throw i.Du(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Du(`${r._methodName}() is not currently supported inside arrays`);const s=r._toFieldTransform(i);s&&i.fieldTransforms.push(s)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.yu&&e.fu!==4)throw e.Du("Nested arrays are not supported");return function(r,i){const s=[];let o=0;for(const a of r){let u=ra(a,i.bu(o));u==null&&(u={nullValue:"NULL_VALUE"}),s.push(u),o++}return{arrayValue:{values:s}}}(t,e)}return function(r,i){if((r=Lt(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return s2(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const s=Dt.fromDate(r);return{timestampValue:jc(i.serializer,s)}}if(r instanceof Dt){const s=new Dt(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:jc(i.serializer,s)}}if(r instanceof Zm)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Ko)return{bytesValue:K1(i.serializer,r._byteString)};if(r instanceof Mn){const s=i.databaseId,o=r.firestore._databaseId;if(!o.isEqual(s))throw i.Du(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:jm(r.firestore._databaseId||i.databaseId,r._key.path)}}throw i.Du(`Unsupported field value: ${Ym(r)}`)}(t,e)}function CT(t,e){const n={};return w1(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Hs(t,(r,i)=>{const s=ra(i,e.pu(r));s!=null&&(n[r]=s)}),{mapValue:{fields:n}}}function RT(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof Dt||t instanceof Zm||t instanceof Ko||t instanceof Mn||t instanceof Kl)}function ng(t,e,n){if(!RT(n)||!function(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}(n)){const r=Ym(n);throw r==="an object"?e.Du(t+" a custom object"):e.Du(t+" "+r)}}function hp(t,e,n){if((e=Lt(e))instanceof Od)return e._internalPath;if(typeof e=="string")return rg(t,e);throw Uc("Field path arguments must be of type string or ",t,!1,void 0,n)}const vO=new RegExp("[~\\*/\\[\\]]");function rg(t,e,n){if(e.search(vO)>=0)throw Uc(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new Od(...e.split("."))._internalPath}catch{throw Uc(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function Uc(t,e,n,r,i){const s=r&&!r.isEmpty(),o=i!==void 0;let a=`Function ${e}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let u="";return(s||o)&&(u+=" (found",s&&(u+=` in field ${r}`),o&&(u+=` in document ${i}`),u+=")"),new de(Q.INVALID_ARGUMENT,a+t+u)}function AT(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kT{constructor(e,n,r,i,s){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new Mn(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new _O(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(bT("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class _O extends kT{data(){return super.data()}}function bT(t,e){return typeof e=="string"?rg(t,e):e instanceof Od?e._internalPath:e._delegate._internalPath}class wO{convertValue(e,n="none"){switch(Ds(e)){case 0:return null;case 1:return e.booleanValue;case 2:return At(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Os(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 10:return this.convertObject(e.mapValue,n);default:throw Ee()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return Hs(e,(i,s)=>{r[i]=this.convertValue(s,n)}),r}convertGeoPoint(e){return new Zm(At(e.latitude),At(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=xm(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(Tl(e));default:return null}}convertTimestamp(e){const n=Yi(e);return new Dt(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=Tt.fromString(e);tt(Z1(r));const i=new Sl(r.get(1),r.get(3)),s=new he(r.popFirst(5));return i.isEqual(n)||ni(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function EO(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TO{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class xT extends kT{constructor(e,n,r,i,s,o){super(e,n,r,i,o),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new SO(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(bT("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}}class SO extends xT{data(e={}){return super.data(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Md(t){t=Ls(t,Mn);const e=Ls(t.firestore,Nd);return oO(wT(e),t._key).then(n=>PO(e,t,n))}class IO extends wO{constructor(e){super(),this.firestore=e}convertBytes(e){return new Ko(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Mn(this.firestore,null,n)}}function ig(t,e,n){t=Ls(t,Mn);const r=Ls(t.firestore,Nd),i=EO(t.converter,e,n);return NT(r,[mO(IT(r),"setDoc",t._key,i,t.converter!==null,n).toMutation(t._key,Rr.none())])}function zc(t,e,n,...r){t=Ls(t,Mn);const i=Ls(t.firestore,Nd),s=IT(i);let o;return o=typeof(e=Lt(e))=="string"||e instanceof Od?yO(s,"updateDoc",t._key,e,n,r):gO(s,"updateDoc",t._key,e),NT(i,[o.toMutation(t._key,Rr.exists(!0))])}function NT(t,e){return function(r,i){const s=new Wi;return r.asyncQueue.enqueueAndForget(async()=>WN(await iO(r),i,s)),s.promise}(wT(t),e)}function PO(t,e,n){const r=n.docs.get(e._key),i=new IO(t);return new xT(t,i,e._key,r,new TO(n.hasPendingWrites,n.fromCache),e.converter)}function CO(...t){return new eg("arrayUnion",t)}function RO(...t){return new tg("arrayRemove",t)}(function(e,n=!0){(function(i){ea=i})(Zo),jo(new bs("firestore",(r,{instanceIdentifier:i,options:s})=>{const o=r.getProvider("app").getImmediate(),a=new Nd(new Tx(r.getProvider("auth-internal")),new Cx(r.getProvider("app-check-internal")),function(c,d){if(!Object.prototype.hasOwnProperty.apply(c.options,["projectId"]))throw new de(Q.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Sl(c.options.projectId,d)}(o,i),o);return s=Object.assign({useFetchStreams:n},s),a._setSettings(s),a},"PUBLIC").setMultipleInstances(!0)),Hi(Bv,"4.6.4",e),Hi(Bv,"4.6.4","esm2017")})();var AO="firebase",kO="10.12.4";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Hi(AO,kO,"app");function sg(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n}function OT(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const bO=OT,DT=new Fl("auth","Firebase",OT());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bc=new Pm("@firebase/auth");function xO(t,...e){Bc.logLevel<=Oe.WARN&&Bc.warn(`Auth (${Zo}): ${t}`,...e)}function Zu(t,...e){Bc.logLevel<=Oe.ERROR&&Bc.error(`Auth (${Zo}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pr(t,...e){throw og(t,...e)}function kr(t,...e){return og(t,...e)}function LT(t,e,n){const r=Object.assign(Object.assign({},bO()),{[e]:n});return new Fl("auth","Firebase",r).create(e,{appName:t.name})}function Xr(t){return LT(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function og(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return DT.create(t,...e)}function me(t,e,...n){if(!t)throw og(e,...n)}function Wr(t){const e="INTERNAL ASSERTION FAILED: "+t;throw Zu(e),new Error(e)}function ii(t,e){t||Wr(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fp(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function NO(){return E_()==="http:"||E_()==="https:"}function E_(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function OO(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(NO()||tb()||"connection"in navigator)?navigator.onLine:!0}function DO(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gl{constructor(e,n){this.shortDelay=e,this.longDelay=n,ii(n>e,"Short delay should be less than long delay!"),this.isMobile=Zk()||nb()}get(){return OO()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ag(t,e){ii(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MT{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Wr("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Wr("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Wr("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LO={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MO=new Gl(3e4,6e4);function ci(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function gr(t,e,n,r,i={}){return VT(t,i,async()=>{let s={},o={};r&&(e==="GET"?o=r:s={body:JSON.stringify(r)});const a=Ul(Object.assign({key:t.config.apiKey},o)).slice(1),u=await t._getAdditionalHeaders();return u["Content-Type"]="application/json",t.languageCode&&(u["X-Firebase-Locale"]=t.languageCode),MT.fetch()(jT(t,t.config.apiHost,n,a),Object.assign({method:e,headers:u,referrerPolicy:"no-referrer"},s))})}async function VT(t,e,n){t._canInitEmulator=!1;const r=Object.assign(Object.assign({},LO),e);try{const i=new jO(t),s=await Promise.race([n(),i.promise]);i.clearNetworkTimeout();const o=await s.json();if("needConfirmation"in o)throw xu(t,"account-exists-with-different-credential",o);if(s.ok&&!("errorMessage"in o))return o;{const a=s.ok?o.errorMessage:o.error.message,[u,c]=a.split(" : ");if(u==="FEDERATED_USER_ID_ALREADY_LINKED")throw xu(t,"credential-already-in-use",o);if(u==="EMAIL_EXISTS")throw xu(t,"email-already-in-use",o);if(u==="USER_DISABLED")throw xu(t,"user-disabled",o);const d=r[u]||u.toLowerCase().replace(/[_\s]+/g,"-");if(c)throw LT(t,d,c);pr(t,d)}}catch(i){if(i instanceof ui)throw i;pr(t,"network-request-failed",{message:String(i)})}}async function Ql(t,e,n,r,i={}){const s=await gr(t,e,n,r,i);return"mfaPendingCredential"in s&&pr(t,"multi-factor-auth-required",{_serverResponse:s}),s}function jT(t,e,n,r){const i=`${e}${n}?${r}`;return t.config.emulator?ag(t.config,i):`${t.config.apiScheme}://${i}`}function VO(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class jO{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(kr(this.auth,"network-request-failed")),MO.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function xu(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const i=kr(t,e,r);return i.customData._tokenResponse=n,i}function T_(t){return t!==void 0&&t.enterprise!==void 0}class FO{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return VO(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}}async function UO(t,e){return gr(t,"GET","/v2/recaptchaConfig",ci(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function zO(t,e){return gr(t,"POST","/v1/accounts:delete",e)}async function FT(t,e){return gr(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ja(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function BO(t,e=!1){const n=Lt(t),r=await n.getIdToken(e),i=lg(r);me(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");const s=typeof i.firebase=="object"?i.firebase:void 0,o=s==null?void 0:s.sign_in_provider;return{claims:i,token:r,authTime:Ja(Fh(i.auth_time)),issuedAtTime:Ja(Fh(i.iat)),expirationTime:Ja(Fh(i.exp)),signInProvider:o||null,signInSecondFactor:(s==null?void 0:s.sign_in_second_factor)||null}}function Fh(t){return Number(t)*1e3}function lg(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return Zu("JWT malformed, contained fewer than 3 sections"),null;try{const i=t1(n);return i?JSON.parse(i):(Zu("Failed to decode base64 JWT payload"),null)}catch(i){return Zu("Caught error parsing JWT payload as JSON",i==null?void 0:i.toString()),null}}function S_(t){const e=lg(t);return me(e,"internal-error"),me(typeof e.exp<"u","internal-error"),me(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ms(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof ui&&$O(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function $O({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HO{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const i=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pp{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Ja(this.lastLoginAt),this.creationTime=Ja(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function $c(t){var e;const n=t.auth,r=await t.getIdToken(),i=await Ms(t,FT(n,{idToken:r}));me(i==null?void 0:i.users.length,n,"internal-error");const s=i.users[0];t._notifyReloadListener(s);const o=!((e=s.providerUserInfo)===null||e===void 0)&&e.length?UT(s.providerUserInfo):[],a=qO(t.providerData,o),u=t.isAnonymous,c=!(t.email&&s.passwordHash)&&!(a!=null&&a.length),d=u?c:!1,f={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new pp(s.createdAt,s.lastLoginAt),isAnonymous:d};Object.assign(t,f)}async function WO(t){const e=Lt(t);await $c(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function qO(t,e){return[...t.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function UT(t){return t.map(e=>{var{providerId:n}=e,r=sg(e,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function KO(t,e){const n=await VT(t,{},async()=>{const r=Ul({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:s}=t.config,o=jT(t,i,"/v1/token",`key=${s}`),a=await t._getAdditionalHeaders();return a["Content-Type"]="application/x-www-form-urlencoded",MT.fetch()(o,{method:"POST",headers:a,body:r})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function GO(t,e){return gr(t,"POST","/v2/accounts:revokeToken",ci(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ro{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){me(e.idToken,"internal-error"),me(typeof e.idToken<"u","internal-error"),me(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):S_(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){me(e.length!==0,"internal-error");const n=S_(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(me(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:i,expiresIn:s}=await KO(e,n);this.updateTokensAndExpiration(r,i,Number(s))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:i,expirationTime:s}=n,o=new Ro;return r&&(me(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),i&&(me(typeof i=="string","internal-error",{appName:e}),o.accessToken=i),s&&(me(typeof s=="number","internal-error",{appName:e}),o.expirationTime=s),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Ro,this.toJSON())}_performRefresh(){return Wr("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ei(t,e){me(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class qr{constructor(e){var{uid:n,auth:r,stsTokenManager:i}=e,s=sg(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new HO(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new pp(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(e){const n=await Ms(this,this.stsTokenManager.getToken(this.auth,e));return me(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return BO(this,e)}reload(){return WO(this)}_assign(e){this!==e&&(me(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new qr(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){me(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await $c(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Sr(this.auth.app))return Promise.reject(Xr(this.auth));const e=await this.getIdToken();return await Ms(this,zO(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var r,i,s,o,a,u,c,d;const f=(r=n.displayName)!==null&&r!==void 0?r:void 0,m=(i=n.email)!==null&&i!==void 0?i:void 0,E=(s=n.phoneNumber)!==null&&s!==void 0?s:void 0,C=(o=n.photoURL)!==null&&o!==void 0?o:void 0,A=(a=n.tenantId)!==null&&a!==void 0?a:void 0,O=(u=n._redirectEventId)!==null&&u!==void 0?u:void 0,P=(c=n.createdAt)!==null&&c!==void 0?c:void 0,v=(d=n.lastLoginAt)!==null&&d!==void 0?d:void 0,{uid:I,emailVerified:M,isAnonymous:F,providerData:k,stsTokenManager:S}=n;me(I&&S,e,"internal-error");const g=Ro.fromJSON(this.name,S);me(typeof I=="string",e,"internal-error"),Ei(f,e.name),Ei(m,e.name),me(typeof M=="boolean",e,"internal-error"),me(typeof F=="boolean",e,"internal-error"),Ei(E,e.name),Ei(C,e.name),Ei(A,e.name),Ei(O,e.name),Ei(P,e.name),Ei(v,e.name);const w=new qr({uid:I,auth:e,email:m,emailVerified:M,displayName:f,isAnonymous:F,photoURL:C,phoneNumber:E,tenantId:A,stsTokenManager:g,createdAt:P,lastLoginAt:v});return k&&Array.isArray(k)&&(w.providerData=k.map(T=>Object.assign({},T))),O&&(w._redirectEventId=O),w}static async _fromIdTokenResponse(e,n,r=!1){const i=new Ro;i.updateFromServerResponse(n);const s=new qr({uid:n.localId,auth:e,stsTokenManager:i,isAnonymous:r});return await $c(s),s}static async _fromGetAccountInfoResponse(e,n,r){const i=n.users[0];me(i.localId!==void 0,"internal-error");const s=i.providerUserInfo!==void 0?UT(i.providerUserInfo):[],o=!(i.email&&i.passwordHash)&&!(s!=null&&s.length),a=new Ro;a.updateFromIdToken(r);const u=new qr({uid:i.localId,auth:e,stsTokenManager:a,isAnonymous:o}),c={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:s,metadata:new pp(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!(s!=null&&s.length)};return Object.assign(u,c),u}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const I_=new Map;function Kr(t){ii(t instanceof Function,"Expected a class definition");let e=I_.get(t);return e?(ii(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,I_.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zT{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}zT.type="NONE";const P_=zT;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ec(t,e,n){return`firebase:${t}:${e}:${n}`}class Ao{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:i,name:s}=this.auth;this.fullUserKey=ec(this.userKey,i.apiKey,s),this.fullPersistenceKey=ec("persistence",i.apiKey,s),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?qr._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new Ao(Kr(P_),e,r);const i=(await Promise.all(n.map(async c=>{if(await c._isAvailable())return c}))).filter(c=>c);let s=i[0]||Kr(P_);const o=ec(r,e.config.apiKey,e.name);let a=null;for(const c of n)try{const d=await c._get(o);if(d){const f=qr._fromJSON(e,d);c!==s&&(a=f),s=c;break}}catch{}const u=i.filter(c=>c._shouldAllowMigration);return!s._shouldAllowMigration||!u.length?new Ao(s,e,r):(s=u[0],a&&await s._set(o,a.toJSON()),await Promise.all(n.map(async c=>{if(c!==s)try{await c._remove(o)}catch{}})),new Ao(s,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function C_(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(HT(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(BT(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(qT(e))return"Blackberry";if(KT(e))return"Webos";if(ug(e))return"Safari";if((e.includes("chrome/")||$T(e))&&!e.includes("edge/"))return"Chrome";if(WT(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function BT(t=Gt()){return/firefox\//i.test(t)}function ug(t=Gt()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function $T(t=Gt()){return/crios\//i.test(t)}function HT(t=Gt()){return/iemobile/i.test(t)}function WT(t=Gt()){return/android/i.test(t)}function qT(t=Gt()){return/blackberry/i.test(t)}function KT(t=Gt()){return/webos/i.test(t)}function Vd(t=Gt()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function QO(t=Gt()){var e;return Vd(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function YO(){return rb()&&document.documentMode===10}function GT(t=Gt()){return Vd(t)||WT(t)||KT(t)||qT(t)||/windows phone/i.test(t)||HT(t)}function XO(){try{return!!(window&&window!==window.top)}catch{return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function QT(t,e=[]){let n;switch(t){case"Browser":n=C_(Gt());break;case"Worker":n=`${C_(Gt())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${Zo}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JO{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=s=>new Promise((o,a)=>{try{const u=e(s);o(u)}catch(u){a(u)}});r.onAbort=n,this.queue.push(r);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const i of n)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ZO(t,e={}){return gr(t,"GET","/v2/passwordPolicy",ci(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eD=6;class tD{constructor(e){var n,r,i,s;const o=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=o.minPasswordLength)!==null&&n!==void 0?n:eD,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(s=e.forceUpgradeOnSignin)!==null&&s!==void 0?s:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,r,i,s,o,a;const u={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,u),this.validatePasswordCharacterOptions(e,u),u.isValid&&(u.isValid=(n=u.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),u.isValid&&(u.isValid=(r=u.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),u.isValid&&(u.isValid=(i=u.containsLowercaseLetter)!==null&&i!==void 0?i:!0),u.isValid&&(u.isValid=(s=u.containsUppercaseLetter)!==null&&s!==void 0?s:!0),u.isValid&&(u.isValid=(o=u.containsNumericCharacter)!==null&&o!==void 0?o:!0),u.isValid&&(u.isValid=(a=u.containsNonAlphanumericCharacter)!==null&&a!==void 0?a:!0),u}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),i&&(n.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,i,s){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nD{constructor(e,n,r,i){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new R_(this),this.idTokenSubscription=new R_(this),this.beforeStateQueue=new JO(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=DT,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=Kr(n)),this._initializationPromise=this.queue(async()=>{var r,i;if(!this._deleted&&(this.persistenceManager=await Ao.create(this,e),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((i=this.currentUser)===null||i===void 0?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await FT(this,{idToken:e}),r=await qr._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var n;if(Sr(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(a=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(a,a))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let i=r,s=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,a=i==null?void 0:i._redirectEventId,u=await this.tryRedirectSignIn(e);(!o||o===a)&&(u!=null&&u.user)&&(i=u.user,s=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(i)}catch(o){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return me(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await $c(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=DO()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Sr(this.app))return Promise.reject(Xr(this));const n=e?Lt(e):null;return n&&me(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&me(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Sr(this.app)?Promise.reject(Xr(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Sr(this.app)?Promise.reject(Xr(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Kr(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await ZO(this),n=new tD(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new Fl("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await GO(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&Kr(e)||this._popupRedirectResolver;me(n,this,"argument-error"),this.redirectPersistenceManager=await Ao.create(this,[Kr(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,i){if(this._deleted)return()=>{};const s=typeof n=="function"?n:n.next.bind(n);let o=!1;const a=this._isInitialized?Promise.resolve():this._initializationPromise;if(me(a,this,"internal-error"),a.then(()=>{o||s(this.currentUser)}),typeof n=="function"){const u=e.addObserver(n,r,i);return()=>{o=!0,u()}}else{const u=e.addObserver(n);return()=>{o=!0,u()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return me(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=QT(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(n["X-Firebase-Client"]=r);const i=await this._getAppCheckToken();return i&&(n["X-Firebase-AppCheck"]=i),n}async _getAppCheckToken(){var e;const n=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return n!=null&&n.error&&xO(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function ns(t){return Lt(t)}class R_{constructor(e){this.auth=e,this.observer=null,this.addObserver=db(n=>this.observer=n)}get next(){return me(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let jd={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function rD(t){jd=t}function YT(t){return jd.loadJS(t)}function iD(){return jd.recaptchaEnterpriseScript}function sD(){return jd.gapiScript}function oD(t){return`__${t}${Math.floor(Math.random()*1e6)}`}const aD="recaptcha-enterprise",lD="NO_RECAPTCHA";class uD{constructor(e){this.type=aD,this.auth=ns(e)}async verify(e="verify",n=!1){async function r(s){if(!n){if(s.tenantId==null&&s._agentRecaptchaConfig!=null)return s._agentRecaptchaConfig.siteKey;if(s.tenantId!=null&&s._tenantRecaptchaConfigs[s.tenantId]!==void 0)return s._tenantRecaptchaConfigs[s.tenantId].siteKey}return new Promise(async(o,a)=>{UO(s,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(u=>{if(u.recaptchaKey===void 0)a(new Error("recaptcha Enterprise site key undefined"));else{const c=new FO(u);return s.tenantId==null?s._agentRecaptchaConfig=c:s._tenantRecaptchaConfigs[s.tenantId]=c,o(c.siteKey)}}).catch(u=>{a(u)})})}function i(s,o,a){const u=window.grecaptcha;T_(u)?u.enterprise.ready(()=>{u.enterprise.execute(s,{action:e}).then(c=>{o(c)}).catch(()=>{o(lD)})}):a(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((s,o)=>{r(this.auth).then(a=>{if(!n&&T_(window.grecaptcha))i(a,s,o);else{if(typeof window>"u"){o(new Error("RecaptchaVerifier is only supported in browser"));return}let u=iD();u.length!==0&&(u+=a),YT(u).then(()=>{i(a,s,o)}).catch(c=>{o(c)})}}).catch(a=>{o(a)})})}}async function A_(t,e,n,r=!1){const i=new uD(t);let s;try{s=await i.verify(n)}catch{s=await i.verify(n,!0)}const o=Object.assign({},e);return r?Object.assign(o,{captchaResp:s}):Object.assign(o,{captchaResponse:s}),Object.assign(o,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(o,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),o}async function Hc(t,e,n,r){var i;if(!((i=t._getRecaptchaConfig())===null||i===void 0)&&i.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const s=await A_(t,e,n,n==="getOobCode");return r(t,s)}else return r(t,e).catch(async s=>{if(s.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const o=await A_(t,e,n,n==="getOobCode");return r(t,o)}else return Promise.reject(s)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cD(t,e){const n=Rm(t,"auth");if(n.isInitialized()){const i=n.getImmediate(),s=n.getOptions();if(Vo(s,e??{}))return i;pr(i,"already-initialized")}return n.initialize({options:e})}function dD(t,e){const n=(e==null?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map(Kr);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function hD(t,e,n){const r=ns(t);me(r._canInitEmulator,r,"emulator-config-failed"),me(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const i=!1,s=XT(e),{host:o,port:a}=fD(e),u=a===null?"":`:${a}`;r.config.emulator={url:`${s}//${o}${u}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:o,port:a,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:i})}),pD()}function XT(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function fD(t){const e=XT(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const s=i[1];return{host:s,port:k_(r.substr(s.length+1))}}else{const[s,o]=r.split(":");return{host:s,port:k_(o)}}}function k_(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function pD(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cg{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return Wr("not implemented")}_getIdTokenResponse(e){return Wr("not implemented")}_linkToIdToken(e,n){return Wr("not implemented")}_getReauthenticationResolver(e){return Wr("not implemented")}}async function mD(t,e){return gr(t,"POST","/v1/accounts:update",e)}async function gD(t,e){return gr(t,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function yD(t,e){return Ql(t,"POST","/v1/accounts:signInWithPassword",ci(t,e))}async function vD(t,e){return gr(t,"POST","/v1/accounts:sendOobCode",ci(t,e))}async function _D(t,e){return vD(t,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function wD(t,e){return Ql(t,"POST","/v1/accounts:signInWithEmailLink",ci(t,e))}async function ED(t,e){return Ql(t,"POST","/v1/accounts:signInWithEmailLink",ci(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cl extends cg{constructor(e,n,r,i=null){super("password",r),this._email=e,this._password=n,this._tenantId=i}static _fromEmailAndPassword(e,n){return new Cl(e,n,"password")}static _fromEmailAndCode(e,n,r=null){return new Cl(e,n,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Hc(e,n,"signInWithPassword",yD);case"emailLink":return wD(e,{email:this._email,oobCode:this._password});default:pr(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const r={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Hc(e,r,"signUpPassword",gD);case"emailLink":return ED(e,{idToken:n,email:this._email,oobCode:this._password});default:pr(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ko(t,e){return Ql(t,"POST","/v1/accounts:signInWithIdp",ci(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TD="http://localhost";class Vs extends cg{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new Vs(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):pr("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:i}=n,s=sg(n,["providerId","signInMethod"]);if(!r||!i)return null;const o=new Vs(r,i);return o.idToken=s.idToken||void 0,o.accessToken=s.accessToken||void 0,o.secret=s.secret,o.nonce=s.nonce,o.pendingToken=s.pendingToken||null,o}_getIdTokenResponse(e){const n=this.buildRequest();return ko(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,ko(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,ko(e,n)}buildRequest(){const e={requestUri:TD,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=Ul(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function SD(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function ID(t){const e=xa(Na(t)).link,n=e?xa(Na(e)).deep_link_id:null,r=xa(Na(t)).deep_link_id;return(r?xa(Na(r)).link:null)||r||n||e||t}class dg{constructor(e){var n,r,i,s,o,a;const u=xa(Na(e)),c=(n=u.apiKey)!==null&&n!==void 0?n:null,d=(r=u.oobCode)!==null&&r!==void 0?r:null,f=SD((i=u.mode)!==null&&i!==void 0?i:null);me(c&&d&&f,"argument-error"),this.apiKey=c,this.operation=f,this.code=d,this.continueUrl=(s=u.continueUrl)!==null&&s!==void 0?s:null,this.languageCode=(o=u.languageCode)!==null&&o!==void 0?o:null,this.tenantId=(a=u.tenantId)!==null&&a!==void 0?a:null}static parseLink(e){const n=ID(e);try{return new dg(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ks{constructor(){this.providerId=Ks.PROVIDER_ID}static credential(e,n){return Cl._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const r=dg.parseLink(n);return me(r,"argument-error"),Cl._fromEmailAndCode(e,r.code,r.tenantId)}}Ks.PROVIDER_ID="password";Ks.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Ks.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JT{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yl extends JT{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ri extends Yl{constructor(){super("facebook.com")}static credential(e){return Vs._fromParams({providerId:Ri.PROVIDER_ID,signInMethod:Ri.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Ri.credentialFromTaggedObject(e)}static credentialFromError(e){return Ri.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Ri.credential(e.oauthAccessToken)}catch{return null}}}Ri.FACEBOOK_SIGN_IN_METHOD="facebook.com";Ri.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ai extends Yl{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return Vs._fromParams({providerId:Ai.PROVIDER_ID,signInMethod:Ai.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return Ai.credentialFromTaggedObject(e)}static credentialFromError(e){return Ai.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return Ai.credential(n,r)}catch{return null}}}Ai.GOOGLE_SIGN_IN_METHOD="google.com";Ai.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ki extends Yl{constructor(){super("github.com")}static credential(e){return Vs._fromParams({providerId:ki.PROVIDER_ID,signInMethod:ki.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return ki.credentialFromTaggedObject(e)}static credentialFromError(e){return ki.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return ki.credential(e.oauthAccessToken)}catch{return null}}}ki.GITHUB_SIGN_IN_METHOD="github.com";ki.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bi extends Yl{constructor(){super("twitter.com")}static credential(e,n){return Vs._fromParams({providerId:bi.PROVIDER_ID,signInMethod:bi.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return bi.credentialFromTaggedObject(e)}static credentialFromError(e){return bi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return bi.credential(n,r)}catch{return null}}}bi.TWITTER_SIGN_IN_METHOD="twitter.com";bi.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function PD(t,e){return Ql(t,"POST","/v1/accounts:signUp",ci(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class js{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,i=!1){const s=await qr._fromIdTokenResponse(e,r,i),o=b_(r);return new js({user:s,providerId:o,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const i=b_(r);return new js({user:e,providerId:i,_tokenResponse:r,operationType:n})}}function b_(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wc extends ui{constructor(e,n,r,i){var s;super(n.code,n.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,Wc.prototype),this.customData={appName:e.name,tenantId:(s=e.tenantId)!==null&&s!==void 0?s:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,i){return new Wc(e,n,r,i)}}function ZT(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?Wc._fromErrorAndOperation(t,s,e,r):s})}async function CD(t,e,n=!1){const r=await Ms(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return js._forOperation(t,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function eS(t,e,n=!1){const{auth:r}=t;if(Sr(r.app))return Promise.reject(Xr(r));const i="reauthenticate";try{const s=await Ms(t,ZT(r,i,e,t),n);me(s.idToken,r,"internal-error");const o=lg(s.idToken);me(o,r,"internal-error");const{sub:a}=o;return me(t.uid===a,r,"user-mismatch"),js._forOperation(t,i,s)}catch(s){throw(s==null?void 0:s.code)==="auth/user-not-found"&&pr(r,"user-mismatch"),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function tS(t,e,n=!1){if(Sr(t.app))return Promise.reject(Xr(t));const r="signIn",i=await ZT(t,r,e),s=await js._fromIdTokenResponse(t,r,i);return n||await t._updateCurrentUser(s.user),s}async function RD(t,e){return tS(ns(t),e)}async function AD(t,e){return eS(Lt(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function nS(t){const e=ns(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function kD(t,e,n){const r=ns(t);await Hc(r,{requestType:"PASSWORD_RESET",email:e,clientType:"CLIENT_TYPE_WEB"},"getOobCode",_D)}async function bD(t,e,n){if(Sr(t.app))return Promise.reject(Xr(t));const r=ns(t),o=await Hc(r,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",PD).catch(u=>{throw u.code==="auth/password-does-not-meet-requirements"&&nS(t),u}),a=await js._fromIdTokenResponse(r,"signIn",o);return await r._updateCurrentUser(a.user),a}function xD(t,e,n){return Sr(t.app)?Promise.reject(Xr(t)):RD(Lt(t),Ks.credential(e,n)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&nS(t),r})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ND(t,e){return gr(t,"POST","/v1/accounts:update",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function rS(t,{displayName:e,photoURL:n}){if(e===void 0&&n===void 0)return;const r=Lt(t),s={idToken:await r.getIdToken(),displayName:e,photoUrl:n,returnSecureToken:!0},o=await Ms(r,ND(r.auth,s));r.displayName=o.displayName||null,r.photoURL=o.photoUrl||null;const a=r.providerData.find(({providerId:u})=>u==="password");a&&(a.displayName=r.displayName,a.photoURL=r.photoURL),await r._updateTokensIfNecessary(o)}function OD(t,e){return DD(Lt(t),null,e)}async function DD(t,e,n){const{auth:r}=t,s={idToken:await t.getIdToken(),returnSecureToken:!0};n&&(s.password=n);const o=await Ms(t,mD(r,s));await t._updateTokensIfNecessary(o,!0)}function LD(t,e,n,r){return Lt(t).onIdTokenChanged(e,n,r)}function MD(t,e,n){return Lt(t).beforeAuthStateChanged(e,n)}function VD(t,e,n,r){return Lt(t).onAuthStateChanged(e,n,r)}function jD(t){return Lt(t).signOut()}const qc="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iS{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(qc,"1"),this.storage.removeItem(qc),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function FD(){const t=Gt();return ug(t)||Vd(t)}const UD=1e3,zD=10;class sS extends iS{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=FD()&&XO(),this.fallbackToPolling=GT(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),i=this.localCache[n];r!==i&&e(n,i,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((o,a,u)=>{this.notifyListeners(o,u)});return}const r=e.key;if(n?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const o=this.storage.getItem(r);if(e.newValue!==o)e.newValue!==null?this.storage.setItem(r,e.newValue):this.storage.removeItem(r);else if(this.localCache[r]===e.newValue&&!n)return}const i=()=>{const o=this.storage.getItem(r);!n&&this.localCache[r]===o||this.notifyListeners(r,o)},s=this.storage.getItem(r);YO()&&s!==e.newValue&&e.newValue!==e.oldValue?setTimeout(i,zD):i()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},UD)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}sS.type="LOCAL";const BD=sS;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oS extends iS{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}oS.type="SESSION";const aS=oS;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $D(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fd{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(i=>i.isListeningto(e));if(n)return n;const r=new Fd(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:i,data:s}=n.data,o=this.handlersMap[i];if(!(o!=null&&o.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:i});const a=Array.from(o).map(async c=>c(n.origin,s)),u=await $D(a);n.ports[0].postMessage({status:"done",eventId:r,eventType:i,response:u})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Fd.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hg(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HD{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let s,o;return new Promise((a,u)=>{const c=hg("",20);i.port1.start();const d=setTimeout(()=>{u(new Error("unsupported_event"))},r);o={messageChannel:i,onMessage(f){const m=f;if(m.data.eventId===c)switch(m.data.status){case"ack":clearTimeout(d),s=setTimeout(()=>{u(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),a(m.data.response);break;default:clearTimeout(d),clearTimeout(s),u(new Error("invalid_response"));break}}},this.handlers.add(o),i.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:c,data:n},[i.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function br(){return window}function WD(t){br().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lS(){return typeof br().WorkerGlobalScope<"u"&&typeof br().importScripts=="function"}async function qD(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function KD(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function GD(){return lS()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uS="firebaseLocalStorageDb",QD=1,Kc="firebaseLocalStorage",cS="fbase_key";class Xl{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function Ud(t,e){return t.transaction([Kc],e?"readwrite":"readonly").objectStore(Kc)}function YD(){const t=indexedDB.deleteDatabase(uS);return new Xl(t).toPromise()}function mp(){const t=indexedDB.open(uS,QD);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(Kc,{keyPath:cS})}catch(i){n(i)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(Kc)?e(r):(r.close(),await YD(),e(await mp()))})})}async function x_(t,e,n){const r=Ud(t,!0).put({[cS]:e,value:n});return new Xl(r).toPromise()}async function XD(t,e){const n=Ud(t,!1).get(e),r=await new Xl(n).toPromise();return r===void 0?null:r.value}function N_(t,e){const n=Ud(t,!0).delete(e);return new Xl(n).toPromise()}const JD=800,ZD=3;class dS{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await mp(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>ZD)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return lS()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Fd._getInstance(GD()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var e,n;if(this.activeServiceWorker=await qD(),!this.activeServiceWorker)return;this.sender=new HD(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((e=r[0])===null||e===void 0)&&e.fulfilled&&!((n=r[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||KD()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await mp();return await x_(e,qc,"1"),await N_(e,qc),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>x_(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>XD(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>N_(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(i=>{const s=Ud(i,!1).getAll();return new Xl(s).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:i,value:s}of e)r.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(s)&&(this.notifyListeners(i,s),n.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!r.has(i)&&(this.notifyListeners(i,null),n.push(i));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),JD)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}dS.type="LOCAL";const eL=dS;new Gl(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tL(t,e){return e?Kr(e):(me(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fg extends cg{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return ko(e,this._buildIdpRequest())}_linkToIdToken(e,n){return ko(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return ko(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function nL(t){return tS(t.auth,new fg(t),t.bypassAuthState)}function rL(t){const{auth:e,user:n}=t;return me(n,e,"internal-error"),eS(n,new fg(t),t.bypassAuthState)}async function iL(t){const{auth:e,user:n}=t;return me(n,e,"internal-error"),CD(n,new fg(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hS{constructor(e,n,r,i,s=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:i,tenantId:s,error:o,type:a}=e;if(o){this.reject(o);return}const u={auth:this.auth,requestUri:n,sessionId:r,tenantId:s||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(a)(u))}catch(c){this.reject(c)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return nL;case"linkViaPopup":case"linkViaRedirect":return iL;case"reauthViaPopup":case"reauthViaRedirect":return rL;default:pr(this.auth,"internal-error")}}resolve(e){ii(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){ii(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sL=new Gl(2e3,1e4);class _o extends hS{constructor(e,n,r,i,s){super(e,n,i,s),this.provider=r,this.authWindow=null,this.pollId=null,_o.currentPopupAction&&_o.currentPopupAction.cancel(),_o.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return me(e,this.auth,"internal-error"),e}async onExecution(){ii(this.filter.length===1,"Popup operations only handle one event");const e=hg();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(kr(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(kr(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,_o.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,r;if(!((r=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(kr(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,sL.get())};e()}}_o.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oL="pendingRedirect",tc=new Map;class aL extends hS{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=tc.get(this.auth._key());if(!e){try{const r=await lL(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}tc.set(this.auth._key(),e)}return this.bypassAuthState||tc.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function lL(t,e){const n=dL(e),r=cL(t);if(!await r._isAvailable())return!1;const i=await r._get(n)==="true";return await r._remove(n),i}function uL(t,e){tc.set(t._key(),e)}function cL(t){return Kr(t._redirectPersistence)}function dL(t){return ec(oL,t.config.apiKey,t.name)}async function hL(t,e,n=!1){if(Sr(t.app))return Promise.reject(Xr(t));const r=ns(t),i=tL(r,e),o=await new aL(r,i,n).execute();return o&&!n&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,e)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fL=10*60*1e3;class pL{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!mL(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!fS(e)){const i=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";n.onError(kr(this.auth,i))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=fL&&this.cachedEventUids.clear(),this.cachedEventUids.has(O_(e))}saveEventToCache(e){this.cachedEventUids.add(O_(e)),this.lastProcessedEventTime=Date.now()}}function O_(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function fS({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function mL(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return fS(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function gL(t,e={}){return gr(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yL=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,vL=/^https?/;async function _L(t){if(t.config.emulator)return;const{authorizedDomains:e}=await gL(t);for(const n of e)try{if(wL(n))return}catch{}pr(t,"unauthorized-domain")}function wL(t){const e=fp(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const o=new URL(t);return o.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===r}if(!vL.test(n))return!1;if(yL.test(t))return r===t;const i=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EL=new Gl(3e4,6e4);function D_(){const t=br().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function TL(t){return new Promise((e,n)=>{var r,i,s;function o(){D_(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{D_(),n(kr(t,"network-request-failed"))},timeout:EL.get()})}if(!((i=(r=br().gapi)===null||r===void 0?void 0:r.iframes)===null||i===void 0)&&i.Iframe)e(gapi.iframes.getContext());else if(!((s=br().gapi)===null||s===void 0)&&s.load)o();else{const a=oD("iframefcb");return br()[a]=()=>{gapi.load?o():n(kr(t,"network-request-failed"))},YT(`${sD()}?onload=${a}`).catch(u=>n(u))}}).catch(e=>{throw nc=null,e})}let nc=null;function SL(t){return nc=nc||TL(t),nc}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IL=new Gl(5e3,15e3),PL="__/auth/iframe",CL="emulator/auth/iframe",RL={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},AL=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function kL(t){const e=t.config;me(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?ag(e,CL):`https://${t.config.authDomain}/${PL}`,r={apiKey:e.apiKey,appName:t.name,v:Zo},i=AL.get(t.config.apiHost);i&&(r.eid=i);const s=t._getFrameworks();return s.length&&(r.fw=s.join(",")),`${n}?${Ul(r).slice(1)}`}async function bL(t){const e=await SL(t),n=br().gapi;return me(n,t,"internal-error"),e.open({where:document.body,url:kL(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:RL,dontclear:!0},r=>new Promise(async(i,s)=>{await r.restyle({setHideOnLeave:!1});const o=kr(t,"network-request-failed"),a=br().setTimeout(()=>{s(o)},IL.get());function u(){br().clearTimeout(a),i(r)}r.ping(u).then(u,()=>{s(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xL={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},NL=500,OL=600,DL="_blank",LL="http://localhost";class L_{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function ML(t,e,n,r=NL,i=OL){const s=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let a="";const u=Object.assign(Object.assign({},xL),{width:r.toString(),height:i.toString(),top:s,left:o}),c=Gt().toLowerCase();n&&(a=$T(c)?DL:n),BT(c)&&(e=e||LL,u.scrollbars="yes");const d=Object.entries(u).reduce((m,[E,C])=>`${m}${E}=${C},`,"");if(QO(c)&&a!=="_self")return VL(e||"",a),new L_(null);const f=window.open(e||"",a,d);me(f,t,"popup-blocked");try{f.focus()}catch{}return new L_(f)}function VL(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jL="__/auth/handler",FL="emulator/auth/handler",UL=encodeURIComponent("fac");async function M_(t,e,n,r,i,s){me(t.config.authDomain,t,"auth-domain-config-required"),me(t.config.apiKey,t,"invalid-api-key");const o={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:Zo,eventId:i};if(e instanceof JT){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",cb(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[d,f]of Object.entries({}))o[d]=f}if(e instanceof Yl){const d=e.getScopes().filter(f=>f!=="");d.length>0&&(o.scopes=d.join(","))}t.tenantId&&(o.tid=t.tenantId);const a=o;for(const d of Object.keys(a))a[d]===void 0&&delete a[d];const u=await t._getAppCheckToken(),c=u?`#${UL}=${encodeURIComponent(u)}`:"";return`${zL(t)}?${Ul(a).slice(1)}${c}`}function zL({config:t}){return t.emulator?ag(t,FL):`https://${t.authDomain}/${jL}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Uh="webStorageSupport";class BL{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=aS,this._completeRedirectFn=hL,this._overrideRedirectResult=uL}async _openPopup(e,n,r,i){var s;ii((s=this.eventManagers[e._key()])===null||s===void 0?void 0:s.manager,"_initialize() not called before _openPopup()");const o=await M_(e,n,r,fp(),i);return ML(e,o,hg())}async _openRedirect(e,n,r,i){await this._originValidation(e);const s=await M_(e,n,r,fp(),i);return WD(s),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:i,promise:s}=this.eventManagers[n];return i?Promise.resolve(i):(ii(s,"If manager is not set, promise should be"),s)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await bL(e),r=new pL(e);return n.register("authEvent",i=>(me(i==null?void 0:i.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(Uh,{type:Uh},i=>{var s;const o=(s=i==null?void 0:i[0])===null||s===void 0?void 0:s[Uh];o!==void 0&&n(!!o),pr(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=_L(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return GT()||ug()||Vd()}}const $L=BL;var V_="@firebase/auth",j_="1.7.5";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HL{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){me(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function WL(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function qL(t){jo(new bs("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=r.options;me(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const u={apiKey:o,authDomain:a,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:QT(t)},c=new nD(r,i,s,u);return dD(c,n),c},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),jo(new bs("auth-internal",e=>{const n=ns(e.getProvider("auth").getImmediate());return(r=>new HL(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Hi(V_,j_,WL(t)),Hi(V_,j_,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KL=5*60,GL=i1("authIdTokenMaxAge")||KL;let F_=null;const QL=t=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>GL)return;const i=n==null?void 0:n.token;F_!==i&&(F_=i,await fetch(t,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))};function zd(t=l1()){const e=Rm(t,"auth");if(e.isInitialized())return e.getImmediate();const n=cD(t,{popupRedirectResolver:$L,persistence:[eL,BD,aS]}),r=i1("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const s=new URL(r,location.origin);if(location.origin===s.origin){const o=QL(s.toString());MD(n,o,()=>o(n.currentUser)),LD(n,a=>o(a))}}const i=n1("auth");return i&&hD(n,`http://${i}`),n}function YL(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}rD({loadJS(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=i=>{const s=kr("internal-error");s.customData=i,n(s)},r.type="text/javascript",r.charset="UTF-8",YL().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});qL("Browser");const XL={apiKey:"AIzaSyAYD3eXVa52pLRzsU-L_JbZQXNeSRnYB4I",authDomain:"react-shopping-cart-2.firebaseapp.com",projectId:"react-shopping-cart-2",storageBucket:"react-shopping-cart-2.appspot.com",messagingSenderId:"235368754699",appId:"1:235368754699:web:48f7488605bde6fb8b610e",measurementId:"G-49PNNXTLYM"},pS=a1(XL),JL=zd(pS),ZL=dO(pS),Jl={auth:JL,db:ZL},ia=Jl.db;async function eM(t,e){try{const n=qs(ia,"users",t);await ig(n,{cart:e},{merge:!0})}catch(n){console.log(n)}}async function mS(t){try{const e=qs(ia,"users",t),n=await Md(e);return n.exists()?n.data().cart:null}catch(e){console.log(e)}}async function tM(t,e){try{const n=qs(ia,"users",t);await zc(n,{cart:e})}catch(n){console.log(n)}}async function U_(t,e){try{const n=qs(ia,"users",t),r=await Md(n);r.exists()?r.data().favorites?await zc(n,{favorites:CO(e)}):await zc(n,{favorites:[e]}):await ig(n,{favorites:[e]})}catch(n){console.error("Error adding favorite to Firestore:",n)}}async function nM(t,e){try{const n=qs(ia,"users",t);(await Md(n)).exists()&&await zc(n,{favorites:RO(e)})}catch(n){console.log("Error removing favorite from Firestore",n)}}async function gS(t){try{const e=qs(ia,"users",t),n=await Md(e);return n.exists()?n.data().favorites:[]}catch(e){console.log("Failed to get favorites from Firestore",e)}}function zt(t){return`Minified Redux error #${t}; visit https://redux.js.org/Errors?code=${t} for the full message or use the non-minified dev environment for full errors. `}var rM=typeof Symbol=="function"&&Symbol.observable||"@@observable",z_=rM,zh=()=>Math.random().toString(36).substring(7).split("").join("."),iM={INIT:`@@redux/INIT${zh()}`,REPLACE:`@@redux/REPLACE${zh()}`,PROBE_UNKNOWN_ACTION:()=>`@@redux/PROBE_UNKNOWN_ACTION${zh()}`},Gc=iM;function pg(t){if(typeof t!="object"||t===null)return!1;let e=t;for(;Object.getPrototypeOf(e)!==null;)e=Object.getPrototypeOf(e);return Object.getPrototypeOf(t)===e||Object.getPrototypeOf(t)===null}function yS(t,e,n){if(typeof t!="function")throw new Error(zt(2));if(typeof e=="function"&&typeof n=="function"||typeof n=="function"&&typeof arguments[3]=="function")throw new Error(zt(0));if(typeof e=="function"&&typeof n>"u"&&(n=e,e=void 0),typeof n<"u"){if(typeof n!="function")throw new Error(zt(1));return n(yS)(t,e)}let r=t,i=e,s=new Map,o=s,a=0,u=!1;function c(){o===s&&(o=new Map,s.forEach((O,P)=>{o.set(P,O)}))}function d(){if(u)throw new Error(zt(3));return i}function f(O){if(typeof O!="function")throw new Error(zt(4));if(u)throw new Error(zt(5));let P=!0;c();const v=a++;return o.set(v,O),function(){if(P){if(u)throw new Error(zt(6));P=!1,c(),o.delete(v),s=null}}}function m(O){if(!pg(O))throw new Error(zt(7));if(typeof O.type>"u")throw new Error(zt(8));if(typeof O.type!="string")throw new Error(zt(17));if(u)throw new Error(zt(9));try{u=!0,i=r(i,O)}finally{u=!1}return(s=o).forEach(v=>{v()}),O}function E(O){if(typeof O!="function")throw new Error(zt(10));r=O,m({type:Gc.REPLACE})}function C(){const O=f;return{subscribe(P){if(typeof P!="object"||P===null)throw new Error(zt(11));function v(){const M=P;M.next&&M.next(d())}return v(),{unsubscribe:O(v)}},[z_](){return this}}}return m({type:Gc.INIT}),{dispatch:m,subscribe:f,getState:d,replaceReducer:E,[z_]:C}}function sM(t){Object.keys(t).forEach(e=>{const n=t[e];if(typeof n(void 0,{type:Gc.INIT})>"u")throw new Error(zt(12));if(typeof n(void 0,{type:Gc.PROBE_UNKNOWN_ACTION()})>"u")throw new Error(zt(13))})}function oM(t){const e=Object.keys(t),n={};for(let s=0;s<e.length;s++){const o=e[s];typeof t[o]=="function"&&(n[o]=t[o])}const r=Object.keys(n);let i;try{sM(n)}catch(s){i=s}return function(o={},a){if(i)throw i;let u=!1;const c={};for(let d=0;d<r.length;d++){const f=r[d],m=n[f],E=o[f],C=m(E,a);if(typeof C>"u")throw a&&a.type,new Error(zt(14));c[f]=C,u=u||C!==E}return u=u||r.length!==Object.keys(o).length,u?c:o}}function Qc(...t){return t.length===0?e=>e:t.length===1?t[0]:t.reduce((e,n)=>(...r)=>e(n(...r)))}function aM(...t){return e=>(n,r)=>{const i=e(n,r);let s=()=>{throw new Error(zt(15))};const o={getState:i.getState,dispatch:(u,...c)=>s(u,...c)},a=t.map(u=>u(o));return s=Qc(...a)(i.dispatch),{...i,dispatch:s}}}function lM(t){return pg(t)&&"type"in t&&typeof t.type=="string"}var vS=Symbol.for("immer-nothing"),B_=Symbol.for("immer-draftable"),Ge=Symbol.for("immer-state");function Yn(t,...e){throw new Error(`[Immer] minified error nr: ${t}. Full error at: https://bit.ly/3cXEKWf`)}var Go=Object.getPrototypeOf;function Fs(t){return!!t&&!!t[Ge]}function mr(t){var e;return t?_S(t)||Array.isArray(t)||!!t[B_]||!!((e=t.constructor)!=null&&e[B_])||$d(t)||Hd(t):!1}var uM=Object.prototype.constructor.toString();function _S(t){if(!t||typeof t!="object")return!1;const e=Go(t);if(e===null)return!0;const n=Object.hasOwnProperty.call(e,"constructor")&&e.constructor;return n===Object?!0:typeof n=="function"&&Function.toString.call(n)===uM}function Rl(t,e){Bd(t)===0?Reflect.ownKeys(t).forEach(n=>{e(n,t[n],t)}):t.forEach((n,r)=>e(r,n,t))}function Bd(t){const e=t[Ge];return e?e.type_:Array.isArray(t)?1:$d(t)?2:Hd(t)?3:0}function gp(t,e){return Bd(t)===2?t.has(e):Object.prototype.hasOwnProperty.call(t,e)}function wS(t,e,n){const r=Bd(t);r===2?t.set(e,n):r===3?t.add(n):t[e]=n}function cM(t,e){return t===e?t!==0||1/t===1/e:t!==t&&e!==e}function $d(t){return t instanceof Map}function Hd(t){return t instanceof Set}function Mt(t){return t.copy_||t.base_}function yp(t,e){if($d(t))return new Map(t);if(Hd(t))return new Set(t);if(Array.isArray(t))return Array.prototype.slice.call(t);const n=_S(t);if(e===!0||e==="class_only"&&!n){const r=Object.getOwnPropertyDescriptors(t);delete r[Ge];let i=Reflect.ownKeys(r);for(let s=0;s<i.length;s++){const o=i[s],a=r[o];a.writable===!1&&(a.writable=!0,a.configurable=!0),(a.get||a.set)&&(r[o]={configurable:!0,writable:!0,enumerable:a.enumerable,value:t[o]})}return Object.create(Go(t),r)}else{const r=Go(t);if(r!==null&&n)return{...t};const i=Object.create(r);return Object.assign(i,t)}}function mg(t,e=!1){return Wd(t)||Fs(t)||!mr(t)||(Bd(t)>1&&(t.set=t.add=t.clear=t.delete=dM),Object.freeze(t),e&&Object.entries(t).forEach(([n,r])=>mg(r,!0))),t}function dM(){Yn(2)}function Wd(t){return Object.isFrozen(t)}var vp={};function Us(t){const e=vp[t];return e||Yn(0,t),e}function hM(t,e){vp[t]||(vp[t]=e)}var Al;function Yc(){return Al}function fM(t,e){return{drafts_:[],parent_:t,immer_:e,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function $_(t,e){e&&(Us("Patches"),t.patches_=[],t.inversePatches_=[],t.patchListener_=e)}function _p(t){wp(t),t.drafts_.forEach(pM),t.drafts_=null}function wp(t){t===Al&&(Al=t.parent_)}function H_(t){return Al=fM(Al,t)}function pM(t){const e=t[Ge];e.type_===0||e.type_===1?e.revoke_():e.revoked_=!0}function W_(t,e){e.unfinalizedDrafts_=e.drafts_.length;const n=e.drafts_[0];return t!==void 0&&t!==n?(n[Ge].modified_&&(_p(e),Yn(4)),mr(t)&&(t=Xc(e,t),e.parent_||Jc(e,t)),e.patches_&&Us("Patches").generateReplacementPatches_(n[Ge].base_,t,e.patches_,e.inversePatches_)):t=Xc(e,n,[]),_p(e),e.patches_&&e.patchListener_(e.patches_,e.inversePatches_),t!==vS?t:void 0}function Xc(t,e,n){if(Wd(e))return e;const r=e[Ge];if(!r)return Rl(e,(i,s)=>q_(t,r,e,i,s,n)),e;if(r.scope_!==t)return e;if(!r.modified_)return Jc(t,r.base_,!0),r.base_;if(!r.finalized_){r.finalized_=!0,r.scope_.unfinalizedDrafts_--;const i=r.copy_;let s=i,o=!1;r.type_===3&&(s=new Set(i),i.clear(),o=!0),Rl(s,(a,u)=>q_(t,r,i,a,u,n,o)),Jc(t,i,!1),n&&t.patches_&&Us("Patches").generatePatches_(r,n,t.patches_,t.inversePatches_)}return r.copy_}function q_(t,e,n,r,i,s,o){if(Fs(i)){const a=s&&e&&e.type_!==3&&!gp(e.assigned_,r)?s.concat(r):void 0,u=Xc(t,i,a);if(wS(n,r,u),Fs(u))t.canAutoFreeze_=!1;else return}else o&&n.add(i);if(mr(i)&&!Wd(i)){if(!t.immer_.autoFreeze_&&t.unfinalizedDrafts_<1)return;Xc(t,i),(!e||!e.scope_.parent_)&&typeof r!="symbol"&&Object.prototype.propertyIsEnumerable.call(n,r)&&Jc(t,i)}}function Jc(t,e,n=!1){!t.parent_&&t.immer_.autoFreeze_&&t.canAutoFreeze_&&mg(e,n)}function mM(t,e){const n=Array.isArray(t),r={type_:n?1:0,scope_:e?e.scope_:Yc(),modified_:!1,finalized_:!1,assigned_:{},parent_:e,base_:t,draft_:null,copy_:null,revoke_:null,isManual_:!1};let i=r,s=gg;n&&(i=[r],s=kl);const{revoke:o,proxy:a}=Proxy.revocable(i,s);return r.draft_=a,r.revoke_=o,a}var gg={get(t,e){if(e===Ge)return t;const n=Mt(t);if(!gp(n,e))return gM(t,n,e);const r=n[e];return t.finalized_||!mr(r)?r:r===Bh(t.base_,e)?($h(t),t.copy_[e]=bl(r,t)):r},has(t,e){return e in Mt(t)},ownKeys(t){return Reflect.ownKeys(Mt(t))},set(t,e,n){const r=ES(Mt(t),e);if(r!=null&&r.set)return r.set.call(t.draft_,n),!0;if(!t.modified_){const i=Bh(Mt(t),e),s=i==null?void 0:i[Ge];if(s&&s.base_===n)return t.copy_[e]=n,t.assigned_[e]=!1,!0;if(cM(n,i)&&(n!==void 0||gp(t.base_,e)))return!0;$h(t),Br(t)}return t.copy_[e]===n&&(n!==void 0||e in t.copy_)||Number.isNaN(n)&&Number.isNaN(t.copy_[e])||(t.copy_[e]=n,t.assigned_[e]=!0),!0},deleteProperty(t,e){return Bh(t.base_,e)!==void 0||e in t.base_?(t.assigned_[e]=!1,$h(t),Br(t)):delete t.assigned_[e],t.copy_&&delete t.copy_[e],!0},getOwnPropertyDescriptor(t,e){const n=Mt(t),r=Reflect.getOwnPropertyDescriptor(n,e);return r&&{writable:!0,configurable:t.type_!==1||e!=="length",enumerable:r.enumerable,value:n[e]}},defineProperty(){Yn(11)},getPrototypeOf(t){return Go(t.base_)},setPrototypeOf(){Yn(12)}},kl={};Rl(gg,(t,e)=>{kl[t]=function(){return arguments[0]=arguments[0][0],e.apply(this,arguments)}});kl.deleteProperty=function(t,e){return kl.set.call(this,t,e,void 0)};kl.set=function(t,e,n){return gg.set.call(this,t[0],e,n,t[0])};function Bh(t,e){const n=t[Ge];return(n?Mt(n):t)[e]}function gM(t,e,n){var i;const r=ES(e,n);return r?"value"in r?r.value:(i=r.get)==null?void 0:i.call(t.draft_):void 0}function ES(t,e){if(!(e in t))return;let n=Go(t);for(;n;){const r=Object.getOwnPropertyDescriptor(n,e);if(r)return r;n=Go(n)}}function Br(t){t.modified_||(t.modified_=!0,t.parent_&&Br(t.parent_))}function $h(t){t.copy_||(t.copy_=yp(t.base_,t.scope_.immer_.useStrictShallowCopy_))}var yM=class{constructor(t){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.produce=(e,n,r)=>{if(typeof e=="function"&&typeof n!="function"){const s=n;n=e;const o=this;return function(u=s,...c){return o.produce(u,d=>n.call(this,d,...c))}}typeof n!="function"&&Yn(6),r!==void 0&&typeof r!="function"&&Yn(7);let i;if(mr(e)){const s=H_(this),o=bl(e,void 0);let a=!0;try{i=n(o),a=!1}finally{a?_p(s):wp(s)}return $_(s,r),W_(i,s)}else if(!e||typeof e!="object"){if(i=n(e),i===void 0&&(i=e),i===vS&&(i=void 0),this.autoFreeze_&&mg(i,!0),r){const s=[],o=[];Us("Patches").generateReplacementPatches_(e,i,s,o),r(s,o)}return i}else Yn(1,e)},this.produceWithPatches=(e,n)=>{if(typeof e=="function")return(o,...a)=>this.produceWithPatches(o,u=>e(u,...a));let r,i;return[this.produce(e,n,(o,a)=>{r=o,i=a}),r,i]},typeof(t==null?void 0:t.autoFreeze)=="boolean"&&this.setAutoFreeze(t.autoFreeze),typeof(t==null?void 0:t.useStrictShallowCopy)=="boolean"&&this.setUseStrictShallowCopy(t.useStrictShallowCopy)}createDraft(t){mr(t)||Yn(8),Fs(t)&&(t=vM(t));const e=H_(this),n=bl(t,void 0);return n[Ge].isManual_=!0,wp(e),n}finishDraft(t,e){const n=t&&t[Ge];(!n||!n.isManual_)&&Yn(9);const{scope_:r}=n;return $_(r,e),W_(void 0,r)}setAutoFreeze(t){this.autoFreeze_=t}setUseStrictShallowCopy(t){this.useStrictShallowCopy_=t}applyPatches(t,e){let n;for(n=e.length-1;n>=0;n--){const i=e[n];if(i.path.length===0&&i.op==="replace"){t=i.value;break}}n>-1&&(e=e.slice(n+1));const r=Us("Patches").applyPatches_;return Fs(t)?r(t,e):this.produce(t,i=>r(i,e))}};function bl(t,e){const n=$d(t)?Us("MapSet").proxyMap_(t,e):Hd(t)?Us("MapSet").proxySet_(t,e):mM(t,e);return(e?e.scope_:Yc()).drafts_.push(n),n}function vM(t){return Fs(t)||Yn(10,t),TS(t)}function TS(t){if(!mr(t)||Wd(t))return t;const e=t[Ge];let n;if(e){if(!e.modified_)return e.base_;e.finalized_=!0,n=yp(t,e.scope_.immer_.useStrictShallowCopy_)}else n=yp(t,!0);return Rl(n,(r,i)=>{wS(n,r,TS(i))}),e&&(e.finalized_=!1),n}function _M(){class t extends Map{constructor(u,c){super(),this[Ge]={type_:2,parent_:c,scope_:c?c.scope_:Yc(),modified_:!1,finalized_:!1,copy_:void 0,assigned_:void 0,base_:u,draft_:this,isManual_:!1,revoked_:!1}}get size(){return Mt(this[Ge]).size}has(u){return Mt(this[Ge]).has(u)}set(u,c){const d=this[Ge];return o(d),(!Mt(d).has(u)||Mt(d).get(u)!==c)&&(n(d),Br(d),d.assigned_.set(u,!0),d.copy_.set(u,c),d.assigned_.set(u,!0)),this}delete(u){if(!this.has(u))return!1;const c=this[Ge];return o(c),n(c),Br(c),c.base_.has(u)?c.assigned_.set(u,!1):c.assigned_.delete(u),c.copy_.delete(u),!0}clear(){const u=this[Ge];o(u),Mt(u).size&&(n(u),Br(u),u.assigned_=new Map,Rl(u.base_,c=>{u.assigned_.set(c,!1)}),u.copy_.clear())}forEach(u,c){const d=this[Ge];Mt(d).forEach((f,m,E)=>{u.call(c,this.get(m),m,this)})}get(u){const c=this[Ge];o(c);const d=Mt(c).get(u);if(c.finalized_||!mr(d)||d!==c.base_.get(u))return d;const f=bl(d,c);return n(c),c.copy_.set(u,f),f}keys(){return Mt(this[Ge]).keys()}values(){const u=this.keys();return{[Symbol.iterator]:()=>this.values(),next:()=>{const c=u.next();return c.done?c:{done:!1,value:this.get(c.value)}}}}entries(){const u=this.keys();return{[Symbol.iterator]:()=>this.entries(),next:()=>{const c=u.next();if(c.done)return c;const d=this.get(c.value);return{done:!1,value:[c.value,d]}}}}[Symbol.iterator](){return this.entries()}}function e(a,u){return new t(a,u)}function n(a){a.copy_||(a.assigned_=new Map,a.copy_=new Map(a.base_))}class r extends Set{constructor(u,c){super(),this[Ge]={type_:3,parent_:c,scope_:c?c.scope_:Yc(),modified_:!1,finalized_:!1,copy_:void 0,base_:u,draft_:this,drafts_:new Map,revoked_:!1,isManual_:!1}}get size(){return Mt(this[Ge]).size}has(u){const c=this[Ge];return o(c),c.copy_?!!(c.copy_.has(u)||c.drafts_.has(u)&&c.copy_.has(c.drafts_.get(u))):c.base_.has(u)}add(u){const c=this[Ge];return o(c),this.has(u)||(s(c),Br(c),c.copy_.add(u)),this}delete(u){if(!this.has(u))return!1;const c=this[Ge];return o(c),s(c),Br(c),c.copy_.delete(u)||(c.drafts_.has(u)?c.copy_.delete(c.drafts_.get(u)):!1)}clear(){const u=this[Ge];o(u),Mt(u).size&&(s(u),Br(u),u.copy_.clear())}values(){const u=this[Ge];return o(u),s(u),u.copy_.values()}entries(){const u=this[Ge];return o(u),s(u),u.copy_.entries()}keys(){return this.values()}[Symbol.iterator](){return this.values()}forEach(u,c){const d=this.values();let f=d.next();for(;!f.done;)u.call(c,f.value,f.value,this),f=d.next()}}function i(a,u){return new r(a,u)}function s(a){a.copy_||(a.copy_=new Set,a.base_.forEach(u=>{if(mr(u)){const c=bl(u,a);a.drafts_.set(u,c),a.copy_.add(c)}else a.copy_.add(u)}))}function o(a){a.revoked_&&Yn(3,JSON.stringify(Mt(a)))}hM("MapSet",{proxyMap_:e,proxySet_:i})}var jn=new yM,SS=jn.produce;jn.produceWithPatches.bind(jn);jn.setAutoFreeze.bind(jn);jn.setUseStrictShallowCopy.bind(jn);jn.applyPatches.bind(jn);jn.createDraft.bind(jn);jn.finishDraft.bind(jn);function IS(t){return({dispatch:n,getState:r})=>i=>s=>typeof s=="function"?s(n,r,t):i(s)}var wM=IS(),EM=IS,TM=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(arguments.length!==0)return typeof arguments[0]=="object"?Qc:Qc.apply(null,arguments)};function K_(t,e){function n(...r){if(e){let i=e(...r);if(!i)throw new Error(hr(0));return{type:t,payload:i.payload,..."meta"in i&&{meta:i.meta},..."error"in i&&{error:i.error}}}return{type:t,payload:r[0]}}return n.toString=()=>`${t}`,n.type=t,n.match=r=>lM(r)&&r.type===t,n}var PS=class Ma extends Array{constructor(...e){super(...e),Object.setPrototypeOf(this,Ma.prototype)}static get[Symbol.species](){return Ma}concat(...e){return super.concat.apply(this,e)}prepend(...e){return e.length===1&&Array.isArray(e[0])?new Ma(...e[0].concat(this)):new Ma(...e.concat(this))}};function G_(t){return mr(t)?SS(t,()=>{}):t}function Q_(t,e,n){if(t.has(e)){let i=t.get(e);return n.update&&(i=n.update(i,e,t),t.set(e,i)),i}if(!n.insert)throw new Error(hr(10));const r=n.insert(e,t);return t.set(e,r),r}function SM(t){return typeof t=="boolean"}var IM=()=>function(e){const{thunk:n=!0,immutableCheck:r=!0,serializableCheck:i=!0,actionCreatorCheck:s=!0}=e??{};let o=new PS;return n&&(SM(n)?o.push(wM):o.push(EM(n.extraArgument))),o},PM="RTK_autoBatch",CS=t=>e=>{setTimeout(e,t)},CM=typeof window<"u"&&window.requestAnimationFrame?window.requestAnimationFrame:CS(10),RM=(t={type:"raf"})=>e=>(...n)=>{const r=e(...n);let i=!0,s=!1,o=!1;const a=new Set,u=t.type==="tick"?queueMicrotask:t.type==="raf"?CM:t.type==="callback"?t.queueNotification:CS(t.timeout),c=()=>{o=!1,s&&(s=!1,a.forEach(d=>d()))};return Object.assign({},r,{subscribe(d){const f=()=>i&&d(),m=r.subscribe(f);return a.add(d),()=>{m(),a.delete(d)}},dispatch(d){var f;try{return i=!((f=d==null?void 0:d.meta)!=null&&f[PM]),s=!i,s&&(o||(o=!0,u(c))),r.dispatch(d)}finally{i=!0}}})},AM=t=>function(n){const{autoBatch:r=!0}=n??{};let i=new PS(t);return r&&i.push(RM(typeof r=="object"?r:void 0)),i};function kM(t){const e=IM(),{reducer:n=void 0,middleware:r,devTools:i=!0,preloadedState:s=void 0,enhancers:o=void 0}=t||{};let a;if(typeof n=="function")a=n;else if(pg(n))a=oM(n);else throw new Error(hr(1));let u;typeof r=="function"?u=r(e):u=e();let c=Qc;i&&(c=TM({trace:!1,...typeof i=="object"&&i}));const d=aM(...u),f=AM(d);let m=typeof o=="function"?o(f):f();const E=c(...m);return yS(a,s,E)}function RS(t){const e={},n=[];let r;const i={addCase(s,o){const a=typeof s=="string"?s:s.type;if(!a)throw new Error(hr(28));if(a in e)throw new Error(hr(29));return e[a]=o,i},addMatcher(s,o){return n.push({matcher:s,reducer:o}),i},addDefaultCase(s){return r=s,i}};return t(i),[e,n,r]}function bM(t){return typeof t=="function"}function xM(t,e){let[n,r,i]=RS(e),s;if(bM(t))s=()=>G_(t());else{const a=G_(t);s=()=>a}function o(a=s(),u){let c=[n[u.type],...r.filter(({matcher:d})=>d(u)).map(({reducer:d})=>d)];return c.filter(d=>!!d).length===0&&(c=[i]),c.reduce((d,f)=>{if(f)if(Fs(d)){const E=f(d,u);return E===void 0?d:E}else{if(mr(d))return SS(d,m=>f(m,u));{const m=f(d,u);if(m===void 0){if(d===null)return d;throw new Error(hr(9))}return m}}return d},a)}return o.getInitialState=s,o}var NM=Symbol.for("rtk-slice-createasyncthunk");function OM(t,e){return`${t}/${e}`}function DM({creators:t}={}){var n;const e=(n=t==null?void 0:t.asyncThunk)==null?void 0:n[NM];return function(i){const{name:s,reducerPath:o=s}=i;if(!s)throw new Error(hr(11));typeof process<"u";const a=(typeof i.reducers=="function"?i.reducers(MM()):i.reducers)||{},u=Object.keys(a),c={sliceCaseReducersByName:{},sliceCaseReducersByType:{},actionCreators:{},sliceMatchers:[]},d={addCase(I,M){const F=typeof I=="string"?I:I.type;if(!F)throw new Error(hr(12));if(F in c.sliceCaseReducersByType)throw new Error(hr(13));return c.sliceCaseReducersByType[F]=M,d},addMatcher(I,M){return c.sliceMatchers.push({matcher:I,reducer:M}),d},exposeAction(I,M){return c.actionCreators[I]=M,d},exposeCaseReducer(I,M){return c.sliceCaseReducersByName[I]=M,d}};u.forEach(I=>{const M=a[I],F={reducerName:I,type:OM(s,I),createNotation:typeof i.reducers=="function"};jM(M)?UM(F,M,d,e):VM(F,M,d)});function f(){const[I={},M=[],F=void 0]=typeof i.extraReducers=="function"?RS(i.extraReducers):[i.extraReducers],k={...I,...c.sliceCaseReducersByType};return xM(i.initialState,S=>{for(let g in k)S.addCase(g,k[g]);for(let g of c.sliceMatchers)S.addMatcher(g.matcher,g.reducer);for(let g of M)S.addMatcher(g.matcher,g.reducer);F&&S.addDefaultCase(F)})}const m=I=>I,E=new Map;let C;function A(I,M){return C||(C=f()),C(I,M)}function O(){return C||(C=f()),C.getInitialState()}function P(I,M=!1){function F(S){let g=S[I];return typeof g>"u"&&M&&(g=O()),g}function k(S=m){const g=Q_(E,M,{insert:()=>new WeakMap});return Q_(g,S,{insert:()=>{const w={};for(const[T,b]of Object.entries(i.selectors??{}))w[T]=LM(b,S,O,M);return w}})}return{reducerPath:I,getSelectors:k,get selectors(){return k(F)},selectSlice:F}}const v={name:s,reducer:A,actions:c.actionCreators,caseReducers:c.sliceCaseReducersByName,getInitialState:O,...P(o),injectInto(I,{reducerPath:M,...F}={}){const k=M??o;return I.inject({reducerPath:k,reducer:A},F),{...v,...P(k,!0)}}};return v}}function LM(t,e,n,r){function i(s,...o){let a=e(s);return typeof a>"u"&&r&&(a=n()),t(a,...o)}return i.unwrapped=t,i}var yg=DM();function MM(){function t(e,n){return{_reducerDefinitionType:"asyncThunk",payloadCreator:e,...n}}return t.withTypes=()=>t,{reducer(e){return Object.assign({[e.name](...n){return e(...n)}}[e.name],{_reducerDefinitionType:"reducer"})},preparedReducer(e,n){return{_reducerDefinitionType:"reducerWithPrepare",prepare:e,reducer:n}},asyncThunk:t}}function VM({type:t,reducerName:e,createNotation:n},r,i){let s,o;if("reducer"in r){if(n&&!FM(r))throw new Error(hr(17));s=r.reducer,o=r.prepare}else s=r;i.addCase(t,s).exposeCaseReducer(e,s).exposeAction(e,o?K_(t,o):K_(t))}function jM(t){return t._reducerDefinitionType==="asyncThunk"}function FM(t){return t._reducerDefinitionType==="reducerWithPrepare"}function UM({type:t,reducerName:e},n,r,i){if(!i)throw new Error(hr(18));const{payloadCreator:s,fulfilled:o,pending:a,rejected:u,settled:c,options:d}=n,f=i(t,s,d);r.exposeAction(e,f),o&&r.addCase(f.fulfilled,o),a&&r.addCase(f.pending,a),u&&r.addCase(f.rejected,u),c&&r.addMatcher(f.settled,c),r.exposeCaseReducer(e,{fulfilled:o||Nu,pending:a||Nu,rejected:u||Nu,settled:c||Nu})}function Nu(){}function hr(t){return`Minified Redux Toolkit error #${t}; visit https://redux-toolkit.js.org/Errors?code=${t} for the full message or use the non-minified dev environment for full errors. `}function Va(t){return Array.isArray(t)?parseFloat(t.reduce((n,r)=>n+r.price*r.quantity,0).toFixed(2)):0}function zM(){const t=localStorage.getItem("cart");if(t){const e=JSON.parse(t);return{items:e.items||[],total:e.total||0,syncing:!1}}return{items:[],total:0,syncing:!1}}const AS=yg({name:"cart",initialState:zM(),reducers:{addToCart(t,e){t.items.push(e.payload),t.total=Va(t.items)},setCart(t,e){Array.isArray(e.payload)?(t.items=e.payload,t.total=Va(e.payload)):(t.items=e.payload.items,t.total=e.payload.total)},removeFromCart(t,e){t.items=t.items.filter(n=>n.id!==e.payload.id),t.total=Va(t.items)},updateCartItem(t,e){const n=t.items.findIndex(r=>r.id===e.payload.id);n!==-1&&(t.items[n].quantity=e.payload.quantity,t.total=Va(t.items))},clearCart(t){t.items=[],t.total=0},setSyncing(t,e){t.syncing=e.payload}}}),{setCart:Ep,addToCart:BM,removeFromCart:Y_,updateCartItem:X_,clearCart:$M,setSyncing:J_}=AS.actions,HM=AS.reducer;function vg(){const t=li(),e=Ot(d=>d.cart.items),n=Ot(d=>d.users.currentUser),{uiDispatch:r}=V.useContext(gt);function i(d,f){r({type:"SET_BUTTON_TEXT",payload:{id:d,text:f}}),setTimeout(()=>{r({type:"SET_BUTTON_INITIAL_STATE"})},1e3)}async function s(d,f){let m=!1;if(n)try{await tM(n.id,d),m=!0}catch(E){console.log("Failed to update firestore cart",E)}else m=!0;m&&f&&i(f,"Added!")}function o(d,f){let m;d==="increase"?m=f.quantity+1:d==="decrease"&&(m=f.quantity-1);const E={...f,quantity:m},C=e.map(A=>A.id===f.id?E:A);return{updatedCartItem:E,updatedItems:C}}async function a(d){const{id:f,title:m,price:E,thumbnail:C}=d,A=e.find(O=>O.id===f);if(A)c(A,"increase");else{const O={id:f,title:m,price:E,thumbnail:C,quantity:1},P=[...e,O];t(BM(O)),s(P,f)}}async function u(d){const f=e.filter(m=>m.id!==d.id);t(Y_(d)),s(f)}async function c(d,f){let m;if(f==="increase"){const{updatedCartItem:E,updatedItems:C}=o(f,d);m=C,t(X_(E))}else if(f==="decrease"&&d.quantity===1)m=e.filter(E=>E.id!==d.id),t(Y_(d));else{const{updatedCartItem:E,updatedItems:C}=o(f,d);m=C,t(X_(E))}s(m,d.id)}return{handleAddToCart:a,handleUpdateQuantity:c,handleRemoveFromCart:u}}var kS={exports:{}};(()=>{var t={181:(i,s,o)=>{var a=/^\s+|\s+$/g,u=/^[-+]0x[0-9a-f]+$/i,c=/^0b[01]+$/i,d=/^0o[0-7]+$/i,f=parseInt,m=typeof o.g=="object"&&o.g&&o.g.Object===Object&&o.g,E=typeof self=="object"&&self&&self.Object===Object&&self,C=m||E||Function("return this")(),A=Object.prototype.toString,O=Math.max,P=Math.min,v=function(){return C.Date.now()};function I(F){var k=typeof F;return!!F&&(k=="object"||k=="function")}function M(F){if(typeof F=="number")return F;if(function(g){return typeof g=="symbol"||function(w){return!!w&&typeof w=="object"}(g)&&A.call(g)=="[object Symbol]"}(F))return NaN;if(I(F)){var k=typeof F.valueOf=="function"?F.valueOf():F;F=I(k)?k+"":k}if(typeof F!="string")return F===0?F:+F;F=F.replace(a,"");var S=c.test(F);return S||d.test(F)?f(F.slice(2),S?2:8):u.test(F)?NaN:+F}i.exports=function(F,k,S){var g,w,T,b,N,R,oe=0,Fe=!1,Be=!1,ge=!0;if(typeof F!="function")throw new TypeError("Expected a function");function X(_e){var Ce=g,$e=w;return g=w=void 0,oe=_e,b=F.apply($e,Ce)}function re(_e){var Ce=_e-R;return R===void 0||Ce>=k||Ce<0||Be&&_e-oe>=T}function te(){var _e=v();if(re(_e))return ye(_e);N=setTimeout(te,function(Ce){var $e=k-(Ce-R);return Be?P($e,T-(Ce-oe)):$e}(_e))}function ye(_e){return N=void 0,ge&&g?X(_e):(g=w=void 0,b)}function ve(){var _e=v(),Ce=re(_e);if(g=arguments,w=this,R=_e,Ce){if(N===void 0)return function($e){return oe=$e,N=setTimeout(te,k),Fe?X($e):b}(R);if(Be)return N=setTimeout(te,k),X(R)}return N===void 0&&(N=setTimeout(te,k)),b}return k=M(k)||0,I(S)&&(Fe=!!S.leading,T=(Be="maxWait"in S)?O(M(S.maxWait)||0,k):T,ge="trailing"in S?!!S.trailing:ge),ve.cancel=function(){N!==void 0&&clearTimeout(N),oe=0,g=R=w=N=void 0},ve.flush=function(){return N===void 0?b:ye(v())},ve}},858:(i,s,o)=>{var a="Expected a function",u=NaN,c="[object Symbol]",d=/^\s+|\s+$/g,f=/^[-+]0x[0-9a-f]+$/i,m=/^0b[01]+$/i,E=/^0o[0-7]+$/i,C=parseInt,A=typeof o.g=="object"&&o.g&&o.g.Object===Object&&o.g,O=typeof self=="object"&&self&&self.Object===Object&&self,P=A||O||Function("return this")(),v=Object.prototype.toString,I=Math.max,M=Math.min,F=function(){return P.Date.now()};function k(g){var w=typeof g;return!!g&&(w=="object"||w=="function")}function S(g){if(typeof g=="number")return g;if(function(b){return typeof b=="symbol"||function(N){return!!N&&typeof N=="object"}(b)&&v.call(b)==c}(g))return u;if(k(g)){var w=typeof g.valueOf=="function"?g.valueOf():g;g=k(w)?w+"":w}if(typeof g!="string")return g===0?g:+g;g=g.replace(d,"");var T=m.test(g);return T||E.test(g)?C(g.slice(2),T?2:8):f.test(g)?u:+g}i.exports=function(g,w,T){var b=!0,N=!0;if(typeof g!="function")throw new TypeError(a);return k(T)&&(b="leading"in T?!!T.leading:b,N="trailing"in T?!!T.trailing:N),function(R,oe,Fe){var Be,ge,X,re,te,ye,ve=0,_e=!1,Ce=!1,$e=!0;if(typeof R!="function")throw new TypeError(a);function ct(vt){var He=Be,nt=ge;return Be=ge=void 0,ve=vt,re=R.apply(nt,He)}function Yt(vt){var He=vt-ye;return ye===void 0||He>=oe||He<0||Ce&&vt-ve>=X}function Rn(){var vt=F();if(Yt(vt))return tr(vt);te=setTimeout(Rn,function(He){var nt=oe-(He-ye);return Ce?M(nt,X-(He-ve)):nt}(vt))}function tr(vt){return te=void 0,$e&&Be?ct(vt):(Be=ge=void 0,re)}function _n(){var vt=F(),He=Yt(vt);if(Be=arguments,ge=this,ye=vt,He){if(te===void 0)return function(nt){return ve=nt,te=setTimeout(Rn,oe),_e?ct(nt):re}(ye);if(Ce)return te=setTimeout(Rn,oe),ct(ye)}return te===void 0&&(te=setTimeout(Rn,oe)),re}return oe=S(oe)||0,k(Fe)&&(_e=!!Fe.leading,X=(Ce="maxWait"in Fe)?I(S(Fe.maxWait)||0,oe):X,$e="trailing"in Fe?!!Fe.trailing:$e),_n.cancel=function(){te!==void 0&&clearTimeout(te),ve=0,Be=ye=ge=te=void 0},_n.flush=function(){return te===void 0?re:tr(F())},_n}(g,w,{leading:b,maxWait:w,trailing:N})}},694:(i,s,o)=>{var a=o(925);function u(){}function c(){}c.resetWarningCache=u,i.exports=function(){function d(E,C,A,O,P,v){if(v!==a){var I=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw I.name="Invariant Violation",I}}function f(){return d}d.isRequired=d;var m={array:d,bigint:d,bool:d,func:d,number:d,object:d,string:d,symbol:d,any:d,arrayOf:f,element:d,elementType:d,instanceOf:f,node:d,objectOf:f,oneOf:f,oneOfType:f,shape:f,exact:f,checkPropTypes:c,resetWarningCache:u};return m.PropTypes=m,m}},556:(i,s,o)=>{i.exports=o(694)()},925:i=>{i.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"}},e={};function n(i){var s=e[i];if(s!==void 0)return s.exports;var o=e[i]={exports:{}};return t[i](o,o.exports,n),o.exports}n.n=i=>{var s=i&&i.__esModule?()=>i.default:()=>i;return n.d(s,{a:s}),s},n.d=(i,s)=>{for(var o in s)n.o(s,o)&&!n.o(i,o)&&Object.defineProperty(i,o,{enumerable:!0,get:s[o]})},n.g=function(){if(typeof globalThis=="object")return globalThis;try{return this||new Function("return this")()}catch{if(typeof window=="object")return window}}(),n.o=(i,s)=>Object.prototype.hasOwnProperty.call(i,s),n.r=i=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(i,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(i,"__esModule",{value:!0})};var r={};(()=>{n.r(r),n.d(r,{LazyLoadComponent:()=>is,LazyLoadImage:()=>pi,trackWindowScroll:()=>_e});const i=V;var s=n.n(i),o=n(556);function a(){return typeof window<"u"&&"IntersectionObserver"in window&&"isIntersecting"in window.IntersectionObserverEntry.prototype}function u(H){return u=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(D){return typeof D}:function(D){return D&&typeof Symbol=="function"&&D.constructor===Symbol&&D!==Symbol.prototype?"symbol":typeof D},u(H)}function c(H,D){var B=Object.keys(H);if(Object.getOwnPropertySymbols){var K=Object.getOwnPropertySymbols(H);D&&(K=K.filter(function(U){return Object.getOwnPropertyDescriptor(H,U).enumerable})),B.push.apply(B,K)}return B}function d(H,D,B){return(D=m(D))in H?Object.defineProperty(H,D,{value:B,enumerable:!0,configurable:!0,writable:!0}):H[D]=B,H}function f(H,D){for(var B=0;B<D.length;B++){var K=D[B];K.enumerable=K.enumerable||!1,K.configurable=!0,"value"in K&&(K.writable=!0),Object.defineProperty(H,m(K.key),K)}}function m(H){var D=function(B,K){if(u(B)!="object"||!B)return B;var U=B[Symbol.toPrimitive];if(U!==void 0){var W=U.call(B,"string");if(u(W)!="object")return W;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(B)}(H);return u(D)=="symbol"?D:D+""}function E(H,D,B){return D=A(D),function(K,U){if(U&&(u(U)=="object"||typeof U=="function"))return U;if(U!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return function(W){if(W===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return W}(K)}(H,C()?Reflect.construct(D,B||[],A(H).constructor):D.apply(H,B))}function C(){try{var H=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(C=function(){return!!H})()}function A(H){return A=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(D){return D.__proto__||Object.getPrototypeOf(D)},A(H)}function O(H,D){return O=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(B,K){return B.__proto__=K,B},O(H,D)}var P=function(H){H.forEach(function(D){D.isIntersecting&&D.target.onVisible()})},v={},I=function(H){function D(U){var W;if(function(se,pe){if(!(se instanceof pe))throw new TypeError("Cannot call a class as a function")}(this,D),(W=E(this,D,[U])).supportsObserver=!U.scrollPosition&&U.useIntersectionObserver&&a(),W.supportsObserver){var ce=U.threshold;W.observer=function(se){return v[se]=v[se]||new IntersectionObserver(P,{rootMargin:se+"px"}),v[se]}(ce)}return W}return function(U,W){if(typeof W!="function"&&W!==null)throw new TypeError("Super expression must either be null or a function");U.prototype=Object.create(W&&W.prototype,{constructor:{value:U,writable:!0,configurable:!0}}),Object.defineProperty(U,"prototype",{writable:!1}),W&&O(U,W)}(D,H),B=D,K=[{key:"componentDidMount",value:function(){this.placeholder&&this.observer&&(this.placeholder.onVisible=this.props.onVisible,this.observer.observe(this.placeholder)),this.supportsObserver||this.updateVisibility()}},{key:"componentWillUnmount",value:function(){this.observer&&this.placeholder&&this.observer.unobserve(this.placeholder)}},{key:"componentDidUpdate",value:function(){this.supportsObserver||this.updateVisibility()}},{key:"getPlaceholderBoundingBox",value:function(){var U=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.props.scrollPosition,W=this.placeholder.getBoundingClientRect(),ce=this.placeholder.style,se=parseInt(ce.getPropertyValue("margin-left"),10)||0,pe=parseInt(ce.getPropertyValue("margin-top"),10)||0;return{bottom:U.y+W.bottom+pe,left:U.x+W.left+se,right:U.x+W.right+se,top:U.y+W.top+pe}}},{key:"isPlaceholderInViewport",value:function(){if(typeof window>"u"||!this.placeholder)return!1;var U=this.props,W=U.scrollPosition,ce=U.threshold,se=this.getPlaceholderBoundingBox(W),pe=W.y+window.innerHeight,De=W.x,qe=W.x+window.innerWidth,Qe=W.y;return Qe-ce<=se.bottom&&pe+ce>=se.top&&De-ce<=se.right&&qe+ce>=se.left}},{key:"updateVisibility",value:function(){this.isPlaceholderInViewport()&&this.props.onVisible()}},{key:"render",value:function(){var U=this,W=this.props,ce=W.className,se=W.height,pe=W.placeholder,De=W.style,qe=W.width;if(pe&&typeof pe.type!="function")return s().cloneElement(pe,{ref:function(be){return U.placeholder=be}});var Qe=function(be){for(var rt=1;rt<arguments.length;rt++){var xe=arguments[rt]!=null?arguments[rt]:{};rt%2?c(Object(xe),!0).forEach(function(_t){d(be,_t,xe[_t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(be,Object.getOwnPropertyDescriptors(xe)):c(Object(xe)).forEach(function(_t){Object.defineProperty(be,_t,Object.getOwnPropertyDescriptor(xe,_t))})}return be}({display:"inline-block"},De);return qe!==void 0&&(Qe.width=qe),se!==void 0&&(Qe.height=se),s().createElement("span",{className:ce,ref:function(be){return U.placeholder=be},style:Qe},pe)}}],K&&f(B.prototype,K),Object.defineProperty(B,"prototype",{writable:!1}),B;var B,K}(s().Component);I.propTypes={onVisible:o.PropTypes.func.isRequired,className:o.PropTypes.string,height:o.PropTypes.oneOfType([o.PropTypes.number,o.PropTypes.string]),placeholder:o.PropTypes.element,threshold:o.PropTypes.number,useIntersectionObserver:o.PropTypes.bool,scrollPosition:o.PropTypes.shape({x:o.PropTypes.number.isRequired,y:o.PropTypes.number.isRequired}),width:o.PropTypes.oneOfType([o.PropTypes.number,o.PropTypes.string])},I.defaultProps={className:"",placeholder:null,threshold:100,useIntersectionObserver:!0};const M=I;var F=n(181),k=n.n(F),S=n(858),g=n.n(S),w=function(H){var D=getComputedStyle(H,null);return D.getPropertyValue("overflow")+D.getPropertyValue("overflow-y")+D.getPropertyValue("overflow-x")};const T=function(H){if(!(H instanceof HTMLElement))return window;for(var D=H;D&&D instanceof HTMLElement;){if(/(scroll|auto)/.test(w(D)))return D;D=D.parentNode}return window};function b(H){return b=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(D){return typeof D}:function(D){return D&&typeof Symbol=="function"&&D.constructor===Symbol&&D!==Symbol.prototype?"symbol":typeof D},b(H)}var N=["delayMethod","delayTime"];function R(){return R=Object.assign?Object.assign.bind():function(H){for(var D=1;D<arguments.length;D++){var B=arguments[D];for(var K in B)({}).hasOwnProperty.call(B,K)&&(H[K]=B[K])}return H},R.apply(null,arguments)}function oe(H,D){for(var B=0;B<D.length;B++){var K=D[B];K.enumerable=K.enumerable||!1,K.configurable=!0,"value"in K&&(K.writable=!0),Object.defineProperty(H,Fe(K.key),K)}}function Fe(H){var D=function(B,K){if(b(B)!="object"||!B)return B;var U=B[Symbol.toPrimitive];if(U!==void 0){var W=U.call(B,"string");if(b(W)!="object")return W;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(B)}(H);return b(D)=="symbol"?D:D+""}function Be(H,D,B){return D=re(D),ge(H,X()?Reflect.construct(D,B||[],re(H).constructor):D.apply(H,B))}function ge(H,D){if(D&&(b(D)=="object"||typeof D=="function"))return D;if(D!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return function(B){if(B===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return B}(H)}function X(){try{var H=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(X=function(){return!!H})()}function re(H){return re=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(D){return D.__proto__||Object.getPrototypeOf(D)},re(H)}function te(H,D){return te=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(B,K){return B.__proto__=K,B},te(H,D)}var ye=function(){return typeof window>"u"?0:window.scrollX||window.pageXOffset},ve=function(){return typeof window>"u"?0:window.scrollY||window.pageYOffset};const _e=function(H){var D=function(B){function K(ce){var se;if(function(De,qe){if(!(De instanceof qe))throw new TypeError("Cannot call a class as a function")}(this,K),(se=Be(this,K,[ce])).useIntersectionObserver=ce.useIntersectionObserver&&a(),se.useIntersectionObserver)return ge(se);var pe=se.onChangeScroll.bind(se);return ce.delayMethod==="debounce"?se.delayedScroll=k()(pe,ce.delayTime):ce.delayMethod==="throttle"&&(se.delayedScroll=g()(pe,ce.delayTime)),se.state={scrollPosition:{x:ye(),y:ve()}},se.baseComponentRef=s().createRef(),se}return function(ce,se){if(typeof se!="function"&&se!==null)throw new TypeError("Super expression must either be null or a function");ce.prototype=Object.create(se&&se.prototype,{constructor:{value:ce,writable:!0,configurable:!0}}),Object.defineProperty(ce,"prototype",{writable:!1}),se&&te(ce,se)}(K,B),U=K,W=[{key:"componentDidMount",value:function(){this.addListeners()}},{key:"componentWillUnmount",value:function(){this.removeListeners()}},{key:"componentDidUpdate",value:function(){typeof window>"u"||this.useIntersectionObserver||T(this.baseComponentRef.current)!==this.scrollElement&&(this.removeListeners(),this.addListeners())}},{key:"addListeners",value:function(){typeof window>"u"||this.useIntersectionObserver||(this.scrollElement=T(this.baseComponentRef.current),this.scrollElement.addEventListener("scroll",this.delayedScroll,{passive:!0}),window.addEventListener("resize",this.delayedScroll,{passive:!0}),this.scrollElement!==window&&window.addEventListener("scroll",this.delayedScroll,{passive:!0}))}},{key:"removeListeners",value:function(){typeof window>"u"||this.useIntersectionObserver||(this.scrollElement.removeEventListener("scroll",this.delayedScroll),window.removeEventListener("resize",this.delayedScroll),this.scrollElement!==window&&window.removeEventListener("scroll",this.delayedScroll))}},{key:"onChangeScroll",value:function(){this.useIntersectionObserver||this.setState({scrollPosition:{x:ye(),y:ve()}})}},{key:"render",value:function(){var ce=this.props,se=(ce.delayMethod,ce.delayTime,function(De,qe){if(De==null)return{};var Qe,be,rt=function(_t,x){if(_t==null)return{};var L={};for(var z in _t)if({}.hasOwnProperty.call(_t,z)){if(x.indexOf(z)>=0)continue;L[z]=_t[z]}return L}(De,qe);if(Object.getOwnPropertySymbols){var xe=Object.getOwnPropertySymbols(De);for(be=0;be<xe.length;be++)Qe=xe[be],qe.indexOf(Qe)>=0||{}.propertyIsEnumerable.call(De,Qe)&&(rt[Qe]=De[Qe])}return rt}(ce,N)),pe=this.useIntersectionObserver?null:this.state.scrollPosition;return s().createElement(H,R({forwardRef:this.baseComponentRef,scrollPosition:pe},se))}}],W&&oe(U.prototype,W),Object.defineProperty(U,"prototype",{writable:!1}),U;var U,W}(s().Component);return D.propTypes={delayMethod:o.PropTypes.oneOf(["debounce","throttle"]),delayTime:o.PropTypes.number,useIntersectionObserver:o.PropTypes.bool},D.defaultProps={delayMethod:"throttle",delayTime:300,useIntersectionObserver:!0},D};function Ce(H){return Ce=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(D){return typeof D}:function(D){return D&&typeof Symbol=="function"&&D.constructor===Symbol&&D!==Symbol.prototype?"symbol":typeof D},Ce(H)}function $e(H,D){for(var B=0;B<D.length;B++){var K=D[B];K.enumerable=K.enumerable||!1,K.configurable=!0,"value"in K&&(K.writable=!0),Object.defineProperty(H,ct(K.key),K)}}function ct(H){var D=function(B,K){if(Ce(B)!="object"||!B)return B;var U=B[Symbol.toPrimitive];if(U!==void 0){var W=U.call(B,"string");if(Ce(W)!="object")return W;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(B)}(H);return Ce(D)=="symbol"?D:D+""}function Yt(H,D,B){return D=tr(D),function(K,U){if(U&&(Ce(U)=="object"||typeof U=="function"))return U;if(U!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return function(W){if(W===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return W}(K)}(H,Rn()?Reflect.construct(D,B||[],tr(H).constructor):D.apply(H,B))}function Rn(){try{var H=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Rn=function(){return!!H})()}function tr(H){return tr=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(D){return D.__proto__||Object.getPrototypeOf(D)},tr(H)}function _n(H,D){return _n=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(B,K){return B.__proto__=K,B},_n(H,D)}var vt=function(H){function D(U){return function(W,ce){if(!(W instanceof ce))throw new TypeError("Cannot call a class as a function")}(this,D),Yt(this,D,[U])}return function(U,W){if(typeof W!="function"&&W!==null)throw new TypeError("Super expression must either be null or a function");U.prototype=Object.create(W&&W.prototype,{constructor:{value:U,writable:!0,configurable:!0}}),Object.defineProperty(U,"prototype",{writable:!1}),W&&_n(U,W)}(D,H),B=D,(K=[{key:"render",value:function(){return s().createElement(M,this.props)}}])&&$e(B.prototype,K),Object.defineProperty(B,"prototype",{writable:!1}),B;var B,K}(s().Component);const He=_e(vt);function nt(H){return nt=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(D){return typeof D}:function(D){return D&&typeof Symbol=="function"&&D.constructor===Symbol&&D!==Symbol.prototype?"symbol":typeof D},nt(H)}function hi(H,D){for(var B=0;B<D.length;B++){var K=D[B];K.enumerable=K.enumerable||!1,K.configurable=!0,"value"in K&&(K.writable=!0),Object.defineProperty(H,rs(K.key),K)}}function rs(H){var D=function(B,K){if(nt(B)!="object"||!B)return B;var U=B[Symbol.toPrimitive];if(U!==void 0){var W=U.call(B,"string");if(nt(W)!="object")return W;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(B)}(H);return nt(D)=="symbol"?D:D+""}function zn(H,D,B){return D=fi(D),function(K,U){if(U&&(nt(U)=="object"||typeof U=="function"))return U;if(U!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return function(W){if(W===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return W}(K)}(H,Gs()?Reflect.construct(D,B||[],fi(H).constructor):D.apply(H,B))}function Gs(){try{var H=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Gs=function(){return!!H})()}function fi(H){return fi=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(D){return D.__proto__||Object.getPrototypeOf(D)},fi(H)}function Or(H,D){return Or=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(B,K){return B.__proto__=K,B},Or(H,D)}var Dr=function(H){function D(U){var W;(function(qe,Qe){if(!(qe instanceof Qe))throw new TypeError("Cannot call a class as a function")})(this,D),W=zn(this,D,[U]);var ce=U.afterLoad,se=U.beforeLoad,pe=U.scrollPosition,De=U.visibleByDefault;return W.state={visible:De},De&&(se(),ce()),W.onVisible=W.onVisible.bind(W),W.isScrollTracked=!!(pe&&Number.isFinite(pe.x)&&pe.x>=0&&Number.isFinite(pe.y)&&pe.y>=0),W}return function(U,W){if(typeof W!="function"&&W!==null)throw new TypeError("Super expression must either be null or a function");U.prototype=Object.create(W&&W.prototype,{constructor:{value:U,writable:!0,configurable:!0}}),Object.defineProperty(U,"prototype",{writable:!1}),W&&Or(U,W)}(D,H),B=D,(K=[{key:"componentDidUpdate",value:function(U,W){W.visible!==this.state.visible&&this.props.afterLoad()}},{key:"onVisible",value:function(){this.props.beforeLoad(),this.setState({visible:!0})}},{key:"render",value:function(){if(this.state.visible)return this.props.children;var U=this.props,W=U.className,ce=U.delayMethod,se=U.delayTime,pe=U.height,De=U.placeholder,qe=U.scrollPosition,Qe=U.style,be=U.threshold,rt=U.useIntersectionObserver,xe=U.width;return this.isScrollTracked||rt&&a()?s().createElement(M,{className:W,height:pe,onVisible:this.onVisible,placeholder:De,scrollPosition:qe,style:Qe,threshold:be,useIntersectionObserver:rt,width:xe}):s().createElement(He,{className:W,delayMethod:ce,delayTime:se,height:pe,onVisible:this.onVisible,placeholder:De,style:Qe,threshold:be,width:xe})}}])&&hi(B.prototype,K),Object.defineProperty(B,"prototype",{writable:!1}),B;var B,K}(s().Component);Dr.propTypes={afterLoad:o.PropTypes.func,beforeLoad:o.PropTypes.func,useIntersectionObserver:o.PropTypes.bool,visibleByDefault:o.PropTypes.bool},Dr.defaultProps={afterLoad:function(){return{}},beforeLoad:function(){return{}},useIntersectionObserver:!0,visibleByDefault:!1};const is=Dr;function yr(H){return yr=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(D){return typeof D}:function(D){return D&&typeof Symbol=="function"&&D.constructor===Symbol&&D!==Symbol.prototype?"symbol":typeof D},yr(H)}var ss=["afterLoad","beforeLoad","delayMethod","delayTime","effect","placeholder","placeholderSrc","scrollPosition","threshold","useIntersectionObserver","visibleByDefault","wrapperClassName","wrapperProps"];function Bn(H,D){var B=Object.keys(H);if(Object.getOwnPropertySymbols){var K=Object.getOwnPropertySymbols(H);D&&(K=K.filter(function(U){return Object.getOwnPropertyDescriptor(H,U).enumerable})),B.push.apply(B,K)}return B}function nr(H){for(var D=1;D<arguments.length;D++){var B=arguments[D]!=null?arguments[D]:{};D%2?Bn(Object(B),!0).forEach(function(K){St(H,K,B[K])}):Object.getOwnPropertyDescriptors?Object.defineProperties(H,Object.getOwnPropertyDescriptors(B)):Bn(Object(B)).forEach(function(K){Object.defineProperty(H,K,Object.getOwnPropertyDescriptor(B,K))})}return H}function St(H,D,B){return(D=hn(D))in H?Object.defineProperty(H,D,{value:B,enumerable:!0,configurable:!0,writable:!0}):H[D]=B,H}function lt(){return lt=Object.assign?Object.assign.bind():function(H){for(var D=1;D<arguments.length;D++){var B=arguments[D];for(var K in B)({}).hasOwnProperty.call(B,K)&&(H[K]=B[K])}return H},lt.apply(null,arguments)}function dn(H,D){for(var B=0;B<D.length;B++){var K=D[B];K.enumerable=K.enumerable||!1,K.configurable=!0,"value"in K&&(K.writable=!0),Object.defineProperty(H,hn(K.key),K)}}function hn(H){var D=function(B,K){if(yr(B)!="object"||!B)return B;var U=B[Symbol.toPrimitive];if(U!==void 0){var W=U.call(B,"string");if(yr(W)!="object")return W;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(B)}(H);return yr(D)=="symbol"?D:D+""}function os(H,D,B){return D=$n(D),function(K,U){if(U&&(yr(U)=="object"||typeof U=="function"))return U;if(U!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return function(W){if(W===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return W}(K)}(H,Lr()?Reflect.construct(D,B||[],$n(H).constructor):D.apply(H,B))}function Lr(){try{var H=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Lr=function(){return!!H})()}function $n(H){return $n=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(D){return D.__proto__||Object.getPrototypeOf(D)},$n(H)}function fn(H,D){return fn=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(B,K){return B.__proto__=K,B},fn(H,D)}var Mr=function(H){function D(U){var W;return function(ce,se){if(!(ce instanceof se))throw new TypeError("Cannot call a class as a function")}(this,D),(W=os(this,D,[U])).state={loaded:!1},W}return function(U,W){if(typeof W!="function"&&W!==null)throw new TypeError("Super expression must either be null or a function");U.prototype=Object.create(W&&W.prototype,{constructor:{value:U,writable:!0,configurable:!0}}),Object.defineProperty(U,"prototype",{writable:!1}),W&&fn(U,W)}(D,H),B=D,K=[{key:"onImageLoad",value:function(){var U=this;return this.state.loaded?null:function(W){U.props.onLoad(W),U.props.afterLoad(),U.setState({loaded:!0})}}},{key:"getImg",value:function(){var U=this.props,W=(U.afterLoad,U.beforeLoad,U.delayMethod,U.delayTime,U.effect,U.placeholder,U.placeholderSrc,U.scrollPosition,U.threshold,U.useIntersectionObserver,U.visibleByDefault,U.wrapperClassName,U.wrapperProps,function(ce,se){if(ce==null)return{};var pe,De,qe=function(be,rt){if(be==null)return{};var xe={};for(var _t in be)if({}.hasOwnProperty.call(be,_t)){if(rt.indexOf(_t)>=0)continue;xe[_t]=be[_t]}return xe}(ce,se);if(Object.getOwnPropertySymbols){var Qe=Object.getOwnPropertySymbols(ce);for(De=0;De<Qe.length;De++)pe=Qe[De],se.indexOf(pe)>=0||{}.propertyIsEnumerable.call(ce,pe)&&(qe[pe]=ce[pe])}return qe}(U,ss));return s().createElement("img",lt({},W,{onLoad:this.onImageLoad()}))}},{key:"getLazyLoadImage",value:function(){var U=this.props,W=U.beforeLoad,ce=U.className,se=U.delayMethod,pe=U.delayTime,De=U.height,qe=U.placeholder,Qe=U.scrollPosition,be=U.style,rt=U.threshold,xe=U.useIntersectionObserver,_t=U.visibleByDefault,x=U.width;return s().createElement(is,{beforeLoad:W,className:ce,delayMethod:se,delayTime:pe,height:De,placeholder:qe,scrollPosition:Qe,style:be,threshold:rt,useIntersectionObserver:xe,visibleByDefault:_t,width:x},this.getImg())}},{key:"getWrappedLazyLoadImage",value:function(U){var W=this.props,ce=W.effect,se=W.height,pe=W.placeholderSrc,De=W.width,qe=W.wrapperClassName,Qe=W.wrapperProps,be=this.state.loaded,rt=be?" lazy-load-image-loaded":"",xe=be||!pe?{}:{backgroundImage:"url(".concat(pe,")"),backgroundSize:"100% 100%"};return s().createElement("span",lt({className:qe+" lazy-load-image-background "+ce+rt,style:nr(nr({},xe),{},{color:"transparent",display:"inline-block",height:se,width:De})},Qe),U)}},{key:"render",value:function(){var U=this.props,W=U.effect,ce=U.placeholderSrc,se=U.visibleByDefault,pe=U.wrapperClassName,De=U.wrapperProps,qe=this.getLazyLoadImage();return(W||ce)&&!se||pe||De?this.getWrappedLazyLoadImage(qe):qe}}],K&&dn(B.prototype,K),Object.defineProperty(B,"prototype",{writable:!1}),B;var B,K}(s().Component);Mr.propTypes={onLoad:o.PropTypes.func,afterLoad:o.PropTypes.func,beforeLoad:o.PropTypes.func,delayMethod:o.PropTypes.string,delayTime:o.PropTypes.number,effect:o.PropTypes.string,placeholderSrc:o.PropTypes.string,threshold:o.PropTypes.number,useIntersectionObserver:o.PropTypes.bool,visibleByDefault:o.PropTypes.bool,wrapperClassName:o.PropTypes.string,wrapperProps:o.PropTypes.object},Mr.defaultProps={onLoad:function(){},afterLoad:function(){return{}},beforeLoad:function(){return{}},delayMethod:"throttle",delayTime:300,effect:"",placeholderSrc:null,threshold:100,useIntersectionObserver:!0,visibleByDefault:!1,wrapperClassName:""};const pi=Mr})(),kS.exports=r})();var bS=kS.exports;const WM="_imgContainer_1vdo3_1",qM="_hoverCursor_1vdo3_17",Z_={imgContainer:WM,hoverCursor:qM},KM={favorites:[]},xS=yg({name:"favorites",initialState:KM,reducers:{addToFavoritesSlice(t,e){t.favorites.push(e.payload)},setFavoritesSlice(t,e){t.favorites=e.payload},removeFromFavoritesSlice(t,e){t.favorites=t.favorites.filter(n=>n.id!==e.payload.id)},clearFavoritesSlice(t,e){t.favorites=e.payload||[]}}}),{addToFavoritesSlice:GM,setFavoritesSlice:NS,removeFromFavoritesSlice:QM,clearFavoritesSlice:YM}=xS.actions,XM=xS.reducer;function OS(){const t=li(),e=Ot(o=>o.users.currentUser);function n(o){const{id:a,title:u,thumbnail:c,price:d,rating:f,description:m}=o;return{id:a,title:u,thumbnail:c,price:d,rating:f,description:m}}async function r(){if(e)try{const o=await gS(e.id);t(NS(o))}catch(o){console.log("Failed to fetch and set favorites",o)}}async function i(o,a){try{const u=n(o);(a||e)&&t(GM(u)),a?await U_(a.id,u):e&&await U_(e.id,u)}catch(u){console.log("Failed to add to favorites",u)}}async function s(o){if(e){const a=n(o);try{t(QM(a)),nM(e.id,a)}catch(u){console.log("Failed to remove from favorites",u)}}}return{handleFetchFavorites:r,handleAddToFavorites:i,handleRemoveFromFavorites:s}}function qd({product:t,parent:e}){const n=Qt(),{state:r,uiDispatch:i}=V.useContext(gt),s=Ot(T=>T.users.currentUser),{width:o}=_d(),[a,u]=V.useState(null),{handleAddToFavorites:c,handleRemoveFromFavorites:d}=OS(),f=Ot(T=>T.favorites.favorites),[m,E]=V.useState(!1),[C,A]=V.useState(null),[O,P]=V.useState(null),[v,I]=V.useState(null),M=Cn();function F(){i({type:"SHOW_MODAL",payload:{content:t,type:"quickShop"}})}function k(){i({type:"SHOW_MODAL",payload:{content:t,type:"requestLogin"}})}function S(){O&&n(`/product-details/${t.id}`,{state:{from:M}})}function g(T){if(s&&!m)c(T);else if(s&&m)d(T);else{const{title:b,thumbnail:N,id:R,rating:oe,price:Fe,description:Be}=T,ge={title:b,thumbnail:N,id:R,rating:oe,price:Fe,description:Be};localStorage.setItem("pendingFavorite",JSON.stringify(ge)),k()}}function w(){const T={products:{1024:188.8,768:(o-70)/4,default:(o-50)/2},favorites:{1024:164.8,768:(o-190)/4,default:(o-70)/2},details:{768:300,432:400,default:o*.9},quickShop:{768:300,432:Math.min(o*.7-72,320),default:o*.8-72}};u(((N,R)=>{const oe=T[N]||{},Fe=Object.keys(oe).map(Number).sort((Be,ge)=>ge-Be);for(const Be of Fe)if(R>=Be)return oe[Be];return oe.default||300})(e,o))}return V.useEffect(()=>{w()},[o]),V.useEffect(()=>{const T=f.find(b=>b.id===t.id);E(!!T)},[f]),V.useEffect(()=>{e==="favorites"||e==="products"?(A(!1),P(!0),I(!0)):(A(!0),P(!1),I(!1))},[e]),y.jsxs("div",{className:Z_.imgContainer,"data-visible":!!C,children:[y.jsx(bS.LazyLoadImage,{src:t.thumbnail,alt:t.title,className:O?Z_.hoverCursor:"",width:a,height:a,effect:"blur",onClick:S,onKeyDown:T=>{T.key==="Enter"&&S()},tabIndex:r.overlayVisible||!O?"-1":"0"}),y.jsx(je,{icon:m?y.jsx(Wf,{className:"red"}):y.jsx(Wf,{className:"grey"}),type:"favorite",item:t,handleAction:g}),v&&y.jsx(je,{text:"quick shop",item:t,type:"quickShop",handleAction:F})]})}qd.propTypes={product:we.object,parent:we.string};function JM(t){return cn({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M9.4 233.4c-12.5 12.5-12.5 32.8 0 45.3l128 128c12.5 12.5 32.8 12.5 45.3 0s12.5-32.8 0-45.3L109.3 288 480 288c17.7 0 32-14.3 32-32s-14.3-32-32-32l-370.7 0 73.4-73.4c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0l-128 128z"},child:[]}]})(t)}function ja(t){return cn({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M502.6 278.6c12.5-12.5 12.5-32.8 0-45.3l-128-128c-12.5-12.5-32.8-12.5-45.3 0s-12.5 32.8 0 45.3L402.7 224 32 224c-17.7 0-32 14.3-32 32s14.3 32 32 32l370.7 0-73.4 73.4c-12.5 12.5-12.5 32.8 0 45.3s32.8 12.5 45.3 0l128-128z"},child:[]}]})(t)}function DS({product:t}){const e=Qt(),{state:n,uiDispatch:r}=V.useContext(gt),i=n.buttonText[t.id]||"Add to cart",{handleAddToCart:s}=vg(),o=Cn();function a(){e(`/product-details/${t.id}`,{state:{from:o}}),r({type:"HIDE_MODAL"})}return y.jsxs("div",{className:to.quickShopContainer,children:[y.jsx(qd,{product:t,parent:"quickShop"}),y.jsxs("div",{className:to.detailsContainer,children:[y.jsx("h4",{children:t.title}),y.jsxs("p",{className:to.rating,children:[y.jsx("span",{children:[...Array(Math.round(t==null?void 0:t.rating))].map((u,c)=>(c+=1,y.jsx(qf,{},c)))}),y.jsxs("span",{children:[t.rating," out of 5"]})]}),y.jsx("p",{className:to.description,children:t.description}),y.jsxs("div",{className:to.priceContainer,children:[y.jsxs("p",{className:to.price,children:["$",t.price]}),y.jsx(je,{text:i,type:"addToCart",item:t,handleAction:s})]}),y.jsx(je,{text:"view full details",icon:y.jsx(ja,{}),type:"navigate",handleAction:a})]})]})}DS.propTypes={product:we.object};const ZM="_loginRequestModal_1rs49_1",e4={loginRequestModal:ZM};function t4(){const t=Qt(),{uiDispatch:e}=V.useContext(gt);function n(){e({type:"HIDE_MODAL"}),t("/login")}return y.jsx("div",{className:e4.loginRequestModal,children:y.jsxs("div",{children:[y.jsx("h3",{children:"Please log in to add to favorites"}),y.jsx(je,{text:"Log In",type:"login",handleAction:n})]})})}const n4={currentUser:null},LS=yg({name:"users",initialState:n4,reducers:{setUser(t,e){t.currentUser=e.payload},updateUser(t,e){t.currentUser={...t.currentUser,...e.payload}}}}),{setUser:Zc,updateUser:r4}=LS.actions,i4=LS.reducer;function s4(){const t=li(),e=Jl.auth;function n(){jD(e).then(()=>{t(Zc(null)),t($M()),localStorage.removeItem("cart"),sessionStorage.removeItem("currentViewType"),t(YM())}).catch(r=>{console.log(r)})}return n}const o4="_logoutConfirmationModal_4b518_1",a4={logoutConfirmationModal:o4};function l4(){const t=s4(),[e,n]=V.useState(!1);function r(){t(),n(!0)}return y.jsx("div",{className:a4.logoutConfirmationModal,children:e?y.jsx("div",{children:y.jsx("h3",{children:"You have been logged out."})}):y.jsxs("div",{children:[y.jsx("h3",{children:"Are you sure you want to log out?"}),y.jsx(je,{text:"yes",type:"confirmation",handleAction:r})]})})}const u4="_passwordResetModal_e5mvm_1",c4="_resultMsg_e5mvm_23",Hh={passwordResetModal:u4,resultMsg:c4},d4=[{label:"first name",id:"firstname-update",name:"firstname",componentType:"input",type:"text"},{label:"last name",id:"lastname-update",name:"lastname",componentType:"input",type:"text"}],h4=[{label:"current password",id:"password-current",name:"current",componentType:"input",type:"password"},{label:"new password",id:"password-new",name:"new",componentType:"input",type:"password"},{label:"confirm new password",id:"password-confirm",name:"confirm",componentType:"input",type:"password"}],f4=[{label:"Email address",id:"user-email",name:"userEmail",placeholder:"Enter email... ",componentType:"input",type:"email"}];var p4={cm:!0,mm:!0,in:!0,px:!0,pt:!0,pc:!0,em:!0,ex:!0,ch:!0,rem:!0,vw:!0,vh:!0,vmin:!0,vmax:!0,"%":!0};function m4(t){if(typeof t=="number")return{value:t,unit:"px"};var e,n=(t.match(/^[0-9.]*/)||"").toString();n.includes(".")?e=parseFloat(n):e=parseInt(n,10);var r=(t.match(/[^0-9]*$/)||"").toString();return p4[r]?{value:e,unit:r}:(console.warn("React Spinners: ".concat(t," is not a valid css value. Defaulting to ").concat(e,"px.")),{value:e,unit:"px"})}function Wh(t){var e=m4(t);return"".concat(e.value).concat(e.unit)}var g4=function(t,e,n){var r="react-spinners-".concat(t,"-").concat(n);if(typeof window>"u"||!window.document)return r;var i=document.createElement("style");document.head.appendChild(i);var s=i.sheet,o=`
    @keyframes `.concat(r,` {
      `).concat(e,`
    }
  `);return s&&s.insertRule(o,0),r},ed=function(){return ed=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++){e=arguments[n];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},ed.apply(this,arguments)},y4=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n},v4=g4("PulseLoader","0% {transform: scale(1); opacity: 1} 45% {transform: scale(0.1); opacity: 0.7} 80% {transform: scale(1); opacity: 1}","pulse");function di(t){var e=t.loading,n=e===void 0?!0:e,r=t.color,i=r===void 0?"#000000":r,s=t.speedMultiplier,o=s===void 0?1:s,a=t.cssOverride,u=a===void 0?{}:a,c=t.size,d=c===void 0?15:c,f=t.margin,m=f===void 0?2:f,E=y4(t,["loading","color","speedMultiplier","cssOverride","size","margin"]),C=ed({display:"inherit"},u),A=function(O){return{backgroundColor:i,width:Wh(d),height:Wh(d),margin:Wh(m),borderRadius:"100%",display:"inline-block",animation:"".concat(v4," ").concat(.75/o,"s ").concat(O*.12/o,"s infinite cubic-bezier(0.2, 0.68, 0.18, 1.08)"),animationFillMode:"both"}};return n?V.createElement("span",ed({style:C},E),V.createElement("span",{style:A(1)}),V.createElement("span",{style:A(2)}),V.createElement("span",{style:A(3)})):null}const _4={"auth/network-request-failed":"Network error, please try again.","auth/weak-password":"Please enter a valid password. It must be at least six characters.","auth/internal-error":"An error occurred, please try again. If the problem persists, please contact support.","auth/invalid-argument":"Your entry was invalid. Please try again.","auth/too-many-requests":"You've made too many requests. Please try again later."},w4={login:{"auth/invalid-credential":"No user found with that email and password. Please try again.","auth/user-not-found":"No user found with that email and password. Have you registered?","auth/invalid-email":"Please enter a valid email.","auth/missing-email":"Please enter your email.","auth/invalid-password":"Incorrect password. Please try again.","auth/missing-password":"Please enter a password."},register:{"auth/email-already-in-use":"That email is already in use. Try logging in?","auth/invalid-display-name":"Please enter a valid username.","auth/invalid-email":"Please enter a valid email.","auth/missing-email":"Please enter your email.","auth/missing-password":"Please enter a password."},updatePassword:{"auth/invalid-credential":"Current password is incorrect, please try again.","auth/invalid-password":"Incorrect password. Please try again.","auth/missing-password":"Please enter your current password."},updateName:{}};function xl(t,e){var n;return console.log(t,e),((n=w4[e])==null?void 0:n[t])||_4[t]||"An error occurred. Please try again."}const e0={userEmail:""};function E4(){const[t,e]=V.useState(e0),[n,r]=V.useState(null),[i,s]=V.useState(null),[o,a]=V.useState(!1),u=zd();function c(f){e({...t,[f.target.name]:f.target.value})}async function d(f){if(f.preventDefault(),o)return;s(""),r("");const m=t.userEmail;console.log(m);try{await kD(u,m),a(!1),s(`Reset link sent to ${m}.`),r(""),e(e0)}catch(E){r(xl(E.code,"login")),console.log(E.code),a(!1)}}return y.jsxs("div",{className:Hh.passwordResetModal,children:[n&&y.jsx("p",{className:`error ${Hh.resultMsg}`,children:n}),i&&y.jsx("p",{className:`success ${Hh.resultMsg}`,children:i}),o&&y.jsx(di,{color:"#a0a0a0",size:5}),y.jsx("div",{children:y.jsx(ks,{formControls:f4,btnText:"reset password",formData:t,setFormData:c,onSubmit:d,className:"passwordUpdate"})})]})}function MS(){const{state:t,uiDispatch:e}=V.useContext(gt),{isVisible:n,type:r,content:i}=t.modal;function s(){e({type:"HIDE_MODAL"})}function o(){switch(r){case"quickShop":return y.jsx(DS,{product:i});case"requestLogin":return y.jsx(t4,{});case"logoutConfirmation":return y.jsx(l4,{});case"passwordReset":return y.jsx(E4,{});default:return null}}return y.jsxs("div",{className:`${Rv.modal} ${Rv[r]}`,"data-visible":!!n,children:[y.jsx(je,{handleAction:s,icon:y.jsx($E,{}),type:"closeModal"}),o()]})}MS.propTypes={type:we.string,content:we.node};const T4="_socials_co6nx_1",S4="_menu_co6nx_41",t0={socials:T4,menu:S4},I4=[{id:1,name:"home",link:"/"},{id:2,name:"account",link:"/account"},{id:3,name:"help",link:"/help"},{id:4,name:"contact",link:"/contact"},{id:5,name:"about",link:"/about"},{id:6,name:"terms",link:"/terms"}],P4=`${String.fromCodePoint(169)} 2024 react cart app, llc`,C4=[{id:1,name:"Instagram",icon:AA,link:""},{id:2,name:"Facebook",icon:RA,link:""},{id:3,name:"Pinterest",icon:kA,link:""},{id:4,name:"YouTube",icon:xA,link:""},{id:5,name:"Spotify",icon:bA,link:""}];function R4(){const t=Qt(),{state:e}=V.useContext(gt);return y.jsxs("footer",{children:[y.jsx("div",{className:t0.socials,children:y.jsx("ul",{children:C4.map(n=>y.jsx("li",{children:y.jsx(je,{icon:y.jsx(n.icon,{}),type:"social",handleAction:()=>t(n.link)})},n.id))})}),y.jsxs("div",{className:t0.menu,children:[y.jsx("ul",{children:I4.map(n=>y.jsx("li",{onClick:()=>t(n.link),tabIndex:e.modal.isVisible||e.overlayVisible?"-1":"0",children:n.name},n.id))}),y.jsx("p",{children:P4})]})]})}function A4(){const[t,e]=V.useState(!1);function n(){window.scrollTo({top:0,behavior:"smooth"})}return V.useEffect(()=>{function r(){window.scrollY>80?e(!0):e(!1)}return window.addEventListener("scroll",r),()=>{window.removeEventListener("scroll",r)}},[]),t&&y.jsx(je,{handleAction:n,type:"scrollToTop","aria-label":"scroll to top",icon:y.jsx(NA,{})})}function k4(){return y.jsxs(y.Fragment,{children:[y.jsx(lk,{}),y.jsx(sk,{}),y.jsxs("main",{children:[y.jsx($R,{}),y.jsx(MS,{}),y.jsx(R4,{}),y.jsx(A4,{})]})]})}function Kd(){const[t,e]=V.useState(!0),n=li(),r=Jl.auth;return V.useEffect(()=>{const i=VD(r,s=>{n(Zc(s?{id:s.uid,email:s.email,username:s.displayName}:null)),e(!1)});return()=>i()},[r,n]),t}function VS(){const t=li();Kd();const e=Ot(s=>s.users.currentUser),n=Ot(s=>s.cart.syncing),[r,i]=V.useState(!1);return V.useEffect(()=>{e&&!n?(async()=>{try{const o=await mS(e.id);o&&t(Ep(o))}catch(o){console.log(o)}finally{i(!0)}})():i(!0)},[e,t,n]),r}function jS(){const t=li();Kd();const e=Ot(s=>s.users.currentUser),[n,r]=V.useState(!1);async function i(){try{const s=await gS(e.id);s&&t(NS(s))}catch(s){console.log(s)}finally{r(!0)}}return V.useEffect(()=>{e?i():r(!0)},[e,t]),n}function _g(t,e){const n=VS(),r=jS(),i=Ot(u=>u.cart.items),s=Ot(u=>u.favorites.favorites),[o,a]=V.useState(!0);return V.useEffect(()=>{n&&r&&i&&s&&t&&e&&a(!1)},[n,r,i,s,t,e]),{loading:o,cartItems:i,favorites:s}}function b4(){var u;const{data:t,dataLoaded:e}=wd("https://dummyjson.com/products/"),{loading:n}=_g(((u=t==null?void 0:t.products)==null?void 0:u.length)>0,e),r=Qt(),{uiDispatch:i}=V.useContext(gt),s=Cn();function o(c){i({type:"UPDATE_CATEGORY",payload:c}),r("/products")}const a=y.jsxs(y.Fragment,{children:[y.jsxs("div",{className:"hero",children:[y.jsx("img",{src:t==null?void 0:t.products[0].thumbnail,alt:t==null?void 0:t.products[0].title,onClick:()=>r(`/product-details/${t==null?void 0:t.products[0].id}`,{state:{from:s}})}),y.jsxs("div",{children:[y.jsx("h2",{children:"New Beauty Products"}),y.jsx(je,{text:"see all",icon:y.jsx(ja,{}),type:"navigate",handleAction:()=>o("beauty")})]})]}),y.jsxs("div",{className:"category-container",tabIndex:"-1",children:[y.jsx(je,{text:"shop furniture",icon:y.jsx(ja,{}),type:"navigate",handleAction:()=>o("furniture")}),y.jsx("div",{className:"category-images",children:t==null?void 0:t.products.map(c=>{if(c.category==="furniture")return y.jsx("img",{src:c.thumbnail,alt:c.title,onClick:()=>r(`/product-details/${c.id}`,{state:{from:s}})},c.id)})})]}),y.jsxs("div",{className:"grid",children:[y.jsxs("div",{className:"row",children:[y.jsx("div",{className:"img-container",children:y.jsx("img",{src:t==null?void 0:t.products[29].thumbnail,alt:t==null?void 0:t.products[29].title,onClick:()=>r(`/product-details/${t==null?void 0:t.products[29].id}`,{state:{from:s}})})}),y.jsxs("div",{className:"text-container",children:[y.jsx("h2",{children:"Fresh Groceries"}),y.jsx(je,{text:"browse products",icon:y.jsx(ja,{}),type:"navigate",handleAction:()=>o("groceries")})]})]}),y.jsxs("div",{className:"row",children:[y.jsxs("div",{className:"text-container",children:[y.jsx("h2",{children:"Popular Perfumes"}),y.jsx(je,{text:"browse products",icon:y.jsx(ja,{}),type:"navigate",handleAction:()=>o("fragrances")})]}),y.jsx("div",{className:"img-container",children:y.jsx("img",{src:t==null?void 0:t.products[7].thumbnail,alt:t==null?void 0:t.products[7].title,onClick:()=>r(`/product-details/${t==null?void 0:t.products[7].id}`,{state:{from:s}})})})]})]})]});return y.jsx("div",{className:"home-page",children:n?y.jsx(di,{color:"#a0a0a0",margin:1,size:12,className:"loading"}):a})}const x4="_productContainer_1h249_1",N4="_detailsContainer_1h249_16",O4="_details_1h249_16",D4="_description_1h249_58",L4="_ratingContainer_1h249_69",M4="_purchaseContainer_1h249_76",V4="_price_1h249_92",j4="_reviewsContainer_1h249_96",F4="_reviewsList_1h249_109",U4="_reviewRating_1h249_119",z4="_reviewComment_1h249_130",B4="_reviewName_1h249_134",Wn={productContainer:x4,detailsContainer:N4,details:O4,description:D4,ratingContainer:L4,purchaseContainer:M4,price:V4,reviewsContainer:j4,reviewsList:F4,reviewRating:U4,reviewComment:z4,reviewName:B4};function FS({product:t}){var i;const{state:e}=V.useContext(gt),n=e.buttonText[t.id]||"Add to cart",{handleAddToCart:r}=vg();return y.jsxs("div",{className:Wn.productContainer,children:[y.jsxs("div",{className:Wn.detailsContainer,children:[y.jsx(qd,{product:t,parent:"details"}),y.jsxs("div",{className:Wn.details,children:[y.jsxs("div",{children:[y.jsx("h1",{children:t==null?void 0:t.title}),y.jsxs("div",{className:Wn.ratingContainer,children:[y.jsx("span",{children:[...Array(Math.round(t==null?void 0:t.rating))].map((s,o)=>(o+=1,y.jsx(qf,{},o)))}),y.jsx("span",{children:`${t==null?void 0:t.rating} out of 5`})]})]}),y.jsx("p",{className:Wn.description,children:t==null?void 0:t.description}),y.jsxs("div",{className:Wn.purchaseContainer,children:[y.jsx("p",{className:Wn.price,children:`$${t==null?void 0:t.price}`}),y.jsx(je,{type:"addToCart",handleAction:r,item:t,text:n})]})]})]}),y.jsxs("div",{className:Wn.reviewsContainer,children:[y.jsx("h2",{children:"Ratings & Reviews"}),y.jsx("ul",{className:Wn.reviewsList,children:((i=t==null?void 0:t.reviews)==null?void 0:i.length)>0?t.reviews.map((s,o)=>y.jsxs("li",{children:[y.jsx("span",{className:Wn.reviewRating,children:[...Array(Math.round(s.rating))].map((a,u)=>(u+=1,y.jsx(qf,{},u)))}),y.jsxs("p",{children:[y.jsx("span",{className:Wn.reviewComment,children:`"${s.comment}"`}),y.jsx("span",{className:Wn.reviewName,children:`- ${s.reviewerName}`})]})]},o)):y.jsx("p",{children:"No reviews."})})]})]})}FS.propTypes={product:we.object};function $4(){const t=NR(),{id:e}=t,n=Qt(),{data:r,dataLoaded:i}=wd(`https://dummyjson.com/products/${e}`),{loading:s}=_g(r,i),o=Cn(),[a,u]=V.useState(null);function c(){var f;n((f=o.state)==null?void 0:f.from,{state:{from:o}})}function d(){return r?y.jsx(FS,{product:r}):y.jsx("p",{children:"No details found"})}return V.useEffect(()=>{var f;switch((f=o.state)==null?void 0:f.from.pathname){case"/account":u("favorites");break;case"/cart":u("cart");break;case"/":u("home");break;default:u("products");break}},[]),y.jsxs("div",{className:"page-container details-page",children:[y.jsxs("div",{className:"back-btn-container",children:[y.jsx(je,{handleAction:c,type:"back",icon:y.jsx(JM,{})}),y.jsx("span",{children:a})]}),s?y.jsx(di,{color:"#a0a0a0",margin:1,size:12}):d()]})}const H4="_cartCard_z1g1e_1",W4="_col_z1g1e_19",q4="_title_z1g1e_24",K4="_quantity_z1g1e_25",G4="_price_z1g1e_26",Q4="_itemDetailsContainer_z1g1e_31",Y4="_itemQuantityContainer_z1g1e_60",X4="_quantityBtnContainer_z1g1e_82",J4="_itemPriceContainer_z1g1e_87",qn={cartCard:H4,col:W4,title:q4,quantity:K4,price:G4,itemDetailsContainer:Q4,itemQuantityContainer:Y4,quantityBtnContainer:X4,itemPriceContainer:J4};function US({item:t}){const{title:e,price:n,thumbnail:r,quantity:i}=t,s=Qt(),{handleRemoveFromCart:o,handleUpdateQuantity:a}=vg(),u=Cn(),{state:c}=V.useContext(gt);function d(f){f.key==="Enter"&&s(`/product-details/${t.id}`,{state:{from:u}})}return y.jsxs("div",{className:qn.cartCard,children:[y.jsxs("div",{className:`${qn.col} ${qn.itemDetailsContainer}`,children:[y.jsx(bS.LazyLoadImage,{src:r,alt:e,effect:"blur",width:100,height:100,className:qn.image,tabIndex:c.overlayVisible?"-1":"0",onClick:()=>s(`/product-details/${t.id}`,{state:{from:u}}),onKeyDown:d}),y.jsxs("div",{children:[y.jsx("p",{className:qn.title,onClick:()=>s(`/product-details/${t.id}`,{state:{from:u}}),children:e}),y.jsxs("p",{children:["$",n]})]})]}),y.jsxs("div",{className:`${qn.col} ${qn.itemQuantityContainer}`,children:[y.jsx("p",{className:qn.quantity,children:i}),y.jsxs("div",{className:qn.quantityBtnContainer,children:[y.jsx(je,{handleAction:a,text:"-",type:"decreaseQuantity",action:"decrease",item:t}),y.jsx(je,{handleAction:a,text:"+",type:"increaseQuantity",action:"increase",item:t})]})]}),y.jsxs("div",{className:`${qn.col} ${qn.itemPriceContainer}`,children:[y.jsx("p",{className:qn.price,children:`$${n*i}`}),y.jsx(je,{handleAction:o,text:"remove",type:"removeFromCart",item:t})]})]})}US.propTypes={item:we.object};function Z4(){const t=VS(),e=Qt(),[n,r]=V.useState(!0),i=Ot(d=>d.cart.total),s=Ot(d=>d.cart.items),o=Ot(d=>d.users.currentUser);function a(){e("/login",{state:{from:"/cart"}})}function u(){e("/products")}V.useEffect(()=>{t?t&&s.length===0?setTimeout(()=>{r(!1)},"1500"):t&&s.length>0&&r(!1):r(!0)},[t,s]);const c=s.length>0?y.jsxs("div",{children:[y.jsxs("div",{className:"cart-headers-container",children:[y.jsx("h2",{children:"Items"}),y.jsx("h2",{children:"Quantity"}),y.jsx("h2",{children:"Price"})]}),s.map(d=>y.jsx(US,{item:d},d.id)),y.jsx("div",{className:"total-container",children:i>0?y.jsx("p",{children:`Total: $${i}`}):null}),y.jsx("div",{className:"login-btn-container",children:o?y.jsx(je,{text:"check out",type:"checkOut"}):y.jsx(je,{handleAction:a,text:"Log in to checkout",type:"login"})})]}):y.jsxs("div",{children:[y.jsx("p",{children:"Your cart is empty."}),y.jsx(je,{text:"Go shopping",type:"navigate",handleAction:u})]});return y.jsxs("div",{className:"page-container cart-page",children:[y.jsx("h1",{className:"page-header cart-page-header",children:"Shopping Bag"}),n?y.jsx(di,{color:"#a0a0a0",margin:1,size:12}):c]})}const eV=[{label:"first name",id:"register-firstname",name:"firstname",placeholder:"Enter your first name... ",componentType:"input",type:"text"},{label:"last name",id:"register-lastname",name:"lastname",placeholder:"Enter your last name... ",componentType:"input",type:"text"},{label:"email",id:"register-email",name:"email",placeholder:"Enter your email... ",componentType:"input",type:"email"},{label:"password",id:"register-password",name:"password",placeholder:"Enter your password... ",componentType:"input",type:"password"}],tV=[{label:"Email",id:"email",name:"email",placeholder:"Enter your email... ",componentType:"input",type:"email"},{label:"Password",id:"password",name:"password",placeholder:"Enter your password... ",componentType:"input",type:"password"}];function nV(){const t=li(),e=Jl.auth;async function n(r,i){try{const s=await xD(e,r,i),{uid:o,userEmail:a,displayName:u}=s.user,c={id:o,email:a,username:u};return t(Zc(c)),c}catch(s){return console.log(s.code),s.code}}return n}function rV(){const{auth:t,db:e}=Jl;async function n(r,i,s){try{const a=(await bD(t,r,i)).user;await rS(a,{displayName:`${s.firstname} ${s.lastname}`});const u=[],c=qs(e,"users",a.uid);return await ig(c,{cart:u}),null}catch(o){return console.log(o.code),o.code}}return n}function iV(){const t=li(),e=Ot(o=>o.users.currentUser),n=Ot(o=>o.cart.items),r=Ot(o=>o.cart.total);function i(o,a){o.forEach(u=>{if(a.has(u.id)){const c=a.get(u.id);a.set(u.id,{...c,quantity:c.quantity+u.quantity})}else a.set(u.id,u)})}function s(o,a){if(o.length===0)return a;if(a.length===0)return o;const u=new Map;return i(o,u),i(a,u),Array.from(u.values())}V.useEffect(()=>{async function o(){t(J_(!0));try{const a=JSON.parse(localStorage.getItem("cart"))||{items:[]},u=await mS(e.id)||[],c=s(a.items,u),d={items:c,total:Va(c)};t(Ep(d)),await eM(e.id,c),localStorage.removeItem("cart")}catch(a){console.log(a)}finally{t(J_(!1))}}if(e)o();else{const a=JSON.parse(localStorage.getItem("cart"));a&&t(Ep(a))}},[e,t]),V.useEffect(()=>{e||localStorage.setItem("cart",JSON.stringify({items:n,total:r}))},[e,n,r])}function zS(t){return/^(?=.*?[a-z])(?=.*?[0-9]).{6,}$/.test(t)}const sV={name:"",email:"",password:""};function oV(){const[t,e]=V.useState(!1),[n,r]=V.useState(sV),[i,s]=V.useState(null),o=Qt(),a=Cn(),u=Kd(),c=nV(),d=rV();iV();const{handleAddToFavorites:f}=OS(),{uiDispatch:m}=V.useContext(gt);function E(v){r({...n,[v.target.name]:v.target.value})}function C(){e(!t)}async function A(v){var T;if(v.preventDefault(),u)return;const{email:I,password:M}=n;let F,k;if(!zS(M)){s("Password must be at least 6 characters and contain at least one letter and number.");return}if(t){if(F=await d(I,M,n),F){console.log(F),s(xl(F,"register"));return}}else if(k=await c(I,M),!k||typeof k=="string"){console.log(k),s(xl(k,"login"));return}const S=JSON.parse(localStorage.getItem("pendingFavorite"));S&&(await f(S,k),localStorage.removeItem("pendingFavorite"));const w=((T=a.state)==null?void 0:T.from)||"/";o(w)}function O(){s(""),m({type:"SHOW_MODAL",payload:{content:null,type:"passwordReset"}})}V.useEffect(()=>{s(null)},[t]);const P=y.jsxs("div",{children:[t?y.jsx("div",{className:"form-container",children:y.jsx(ks,{formControls:eV,formData:n,setFormData:E,onSubmit:A,btnText:"submit"})}):y.jsxs("div",{className:"form-container",children:[y.jsx(ks,{formControls:tV,formData:n,setFormData:E,onSubmit:A,btnText:"submit"}),y.jsx(je,{text:"forgot your password?",handleAction:O,type:"forgotPassword"})]}),i&&y.jsx("p",{className:"error login-page-error-message",children:i}),u&&y.jsx(di,{color:"#a0a0a0",margin:0,size:8}),y.jsx("div",{className:t?"btn-container":"register-btn-container",children:t?y.jsxs(y.Fragment,{children:[y.jsx("p",{children:"Already have an account?"}),y.jsx(je,{text:"log in",handleAction:e,type:"login"})]}):y.jsxs(y.Fragment,{children:[y.jsx("p",{children:"Don't have an account?"}),y.jsx(je,{text:"register",handleAction:C,type:"register"})]})})]});return y.jsxs("div",{className:"page-container login-page-component",children:[y.jsx("h1",{className:"page-header",children:`${t?"Register":"Log In"}:`}),u?y.jsx("p",{className:"page-loading",children:"Loading... "}):P]})}const aV="_accountEmail_ircg9_1",lV="_formContainer_ircg9_8",uV="_resultMsg_ircg9_43",Ou={accountEmail:aV,formContainer:lV,resultMsg:uV};function cV(){var C;const t=Ot(A=>A.users.currentUser),e=zd(),n=t.username.split(" "),[r,i]=V.useState({firstname:n[0],lastname:n[1]}),[s,o]=V.useState(""),[a,u]=V.useState(""),[c,d]=V.useState(!1),f=li();function m(A){i({...r,[A.target.name]:A.target.value})}async function E(A){if(A.preventDefault(),!c){if(u(""),o(""),d(!0),r.firstname===""||r.lastname===""){o("Please fill out both fields."),d(!1);return}try{const O=e.currentUser;await rS(O,{displayName:`${r.firstname} ${r.lastname}`}),f(r4({username:`${r.firstname} ${r.lastname}`})),u("Name updated successfully."),o(""),d(!1)}catch(O){o(xl(O.code,"updateName")),d(!1)}}}return y.jsxs(y.Fragment,{children:[" ",y.jsx("h2",{className:"page-subheader",children:`welcome, ${((C=t.username)==null?void 0:C.split(" ")[0])||"shopper"}!`}),y.jsxs("p",{className:Ou.accountEmail,children:["email: ",y.jsx("span",{children:t.email})]}),y.jsxs("div",{className:Ou.formContainer,children:[y.jsx(ks,{formControls:d4,formData:r,setFormData:m,onSubmit:E,btnText:"update",className:"nameInput"}),s&&y.jsx("p",{className:`error ${Ou.resultMsg}`,children:s}),a&&y.jsx("p",{className:`success ${Ou.resultMsg}`,children:a}),c&&y.jsx(di,{color:"#a0a0a0",size:5})]})," "]})}const dV="_productCard_32a8r_1",hV="_title_32a8r_19",fV="_price_32a8r_20",pV="_favorites_32a8r_34",Du={productCard:dV,title:hV,price:fV,favorites:pV};function Za({product:t,parent:e}){const n=Qt(),r=Cn();return y.jsxs("li",{className:`${Du.productCard} ${Du[e]}`,children:[y.jsx(qd,{product:t,parent:e}),y.jsx("p",{className:Du.title,onClick:()=>n(`/product-details/${t.id}`,{state:{from:r}}),children:t.title}),t.price&&y.jsx("p",{className:Du.price,children:`$${t.price}`})]})}Za.propTypes={product:we.object,parent:we.string,handleAddToCart:we.func};const mV="_favoritesList_mss65_1",gV="_noFavorites_mss65_16",n0={favoritesList:mV,noFavorites:gV};function yV(){const t=jS(),e=Ot(s=>s.favorites.favorites),[n,r]=V.useState(!0);V.useEffect(()=>{t&&r(!1)},[t]);const i=y.jsx("ul",{className:n0.favoritesList,children:e!=null&&e.length?e.map(s=>y.jsx(Za,{product:s,parent:"favorites"},s.id)):y.jsx("p",{className:n0.noFavorites,children:"No favorites saved."})});return y.jsxs(y.Fragment,{children:[y.jsx("h2",{className:"page-subheader",children:"favorites"}),n?y.jsx(di,{color:"#a0a0a0",margin:1,size:8}):i]})}function vV(){const t=[],e=Qt();return y.jsxs(y.Fragment,{children:[y.jsx("h2",{className:"page-subheader",children:"orders"}),t!=null&&t.length?t.map(n=>{n.name,n.index}):y.jsxs("div",{children:[y.jsx("p",{children:"you have no past orders."}),y.jsx(je,{text:"go shopping",type:"navigate",handleAction:()=>e("/products")})]})]})}const _V="_passwordUpdateContainer_17gvn_1",wV="_resultMsg_17gvn_22",qh={passwordUpdateContainer:_V,resultMsg:wV},r0={current:"",new:"",confirm:""};function EV(){const e=zd().currentUser,[n,r]=V.useState(!1),[i,s]=V.useState(r0),[o,a]=V.useState(""),[u,c]=V.useState(""),[d,f]=V.useState(!1);function m(C){s({...i,[C.target.name]:C.target.value})}async function E(C){if(C.preventDefault(),!d){if(c(""),a(""),i.new!==i.confirm){a("Passwords must match. Please try again.");return}if(!zS(i.new)){a("Password must be at least 6 characters and contain at least one letter and number.");return}f(!0);try{const A=Ks.credential(e.email,i.current);await AD(e,A),await OD(e,i.new),f(!1),c("Password updated successfully."),a(""),s(r0)}catch(A){a(xl(A.code,"updatePassword")),f(!1)}}}return y.jsxs(y.Fragment,{children:[y.jsx("h2",{className:"page-subheader",children:"account password"}),y.jsx(je,{text:"change password",icon:y.jsx(BE,{}),handleAction:()=>r(!0),type:"dropDown"}),y.jsxs("div",{className:qh.passwordUpdateContainer,"data-visible":!!n,children:[y.jsx(ks,{formControls:h4,btnText:"update",formData:i,setFormData:m,onSubmit:E,className:"passwordUpdate"}),o&&y.jsx("p",{className:`error ${qh.resultMsg}`,children:o}),u&&y.jsx("p",{className:`success ${qh.resultMsg}`,children:u}),d&&y.jsx(di,{color:"#a0a0a0",size:5})]})]})}function TV(){const t=[];return y.jsxs(y.Fragment,{children:[y.jsx("h2",{className:"page-subheader",children:"reviews"}),t!=null&&t.length?t.map(e=>{e.name,e.index}):y.jsx("div",{children:y.jsx("p",{children:"you haven't left any reviews."})})]})}const i0=[{name:"overview",component:cV},{name:"password",component:EV},{name:"orders",component:vV},{name:"reviews",component:TV},{name:"favorites",component:yV}];function SV(){const t=Qt(),e=Kd(),n=Ot(v=>v.users.currentUser),[r,i]=V.useState(!1),{width:s}=_d(),{state:o,uiDispatch:a}=V.useContext(gt),u=V.useRef(null),c=V.useRef(null);V.useEffect(()=>{function v(I){r&&c.current&&!c.current.contains(I.target)&&!u.current.contains(I.target)&&s<768&&i(!1)}return document.addEventListener("mousedown",v),()=>{document.removeEventListener("mousedown",v)}},[r]);function d(){t("/login",{state:{from:"/account"}})}function f(v){a({type:"UPDATE_ACCOUNT_VIEW_TYPE",payload:v}),sessionStorage.setItem("currentAccountViewType",v),s<768&&i(!1)}function m(){a({type:"SHOW_MODAL",payload:{content:null,type:"logoutConfirmation"}})}function E(){s<768&&i(!1),n?(m(),a({type:"TOGGLE_MOBILE_NAV",payload:!1})):t("/login")}V.useEffect(()=>{s>=768?i(!0):i(!1)},[s]);function C(v){var M;const I=(M=i0.find(F=>F.name===v))==null?void 0:M.component;return y.jsx(I,{})}function A(){const v=sessionStorage.getItem("currentAccountViewType");return C(v||o.currentAccountViewType)}function O(){const v=sessionStorage.getItem("currentAccountViewType");return v||o.currentAccountViewType}const P=y.jsx(y.Fragment,{children:n?y.jsxs("div",{className:"view-container",children:[y.jsxs("p",{className:"current-view-type",tabIndex:o.overlayVisible?"-1":"0",onClick:()=>i(!r),onKeyDown:v=>v.key==="Enter"&&i(!r),ref:u,children:[y.jsx("span",{children:O()}),r?y.jsx(OA,{}):y.jsx(BE,{})]}),r?y.jsxs("ul",{className:"view-list",ref:c,children:[i0.map((v,I)=>y.jsx("li",{tabIndex:o.overlayVisible?"-1":"0",onClick:()=>f(v.name),className:O()===v.name&&s>=768?"current":"",onKeyDown:M=>{M.key==="Enter"&&f(v.name)},children:v.name},I)),y.jsx("li",{children:e?y.jsx("button",{}):y.jsx(je,{handleAction:E,text:"sign out",type:"logout"})})]}):"",y.jsx("div",{className:"current-view",children:A()})]}):y.jsxs("div",{children:[y.jsx("p",{children:"Please log in to access your account."}),y.jsx(je,{text:"log in",type:"login",handleAction:d})]})});return y.jsxs("div",{className:"page-container account-page",children:[y.jsx("h1",{className:"page-header account-page-header",children:"Account Details"}),e?y.jsx("p",{className:"page-loading",children:"Loading... "}):P]})}function IV(){const[t,e]=V.useState(null),n=DE();console.log(n);function r(){switch(n.status){case 404:e("This page does not exist");break;default:e(n.statusText);break}}return V.useEffect(()=>{r()},[]),y.jsxs("div",{className:"page-container error-page",children:[y.jsxs("h1",{className:"page-header error-page-header",children:["Oops, something went wrong..."," "]}),y.jsx("p",{className:"page-error",children:t}),y.jsx(dA,{to:"/",children:"Home"})]})}function PV(){var o,a;const{data:t,dataLoaded:e}=wd("https://dummyjson.com/products/"),{loading:n}=_g(((o=t==null?void 0:t.products)==null?void 0:o.length)>0,e),{state:r}=V.useContext(gt);function i(){var u,c;return n||r.search.searchInProgress?y.jsx(di,{color:"#a0a0a0",margin:1,size:12}):r.search.searchSubmitted&&((u=r.search.searchResults)==null?void 0:u.length)>0?y.jsx("ul",{className:"product-list",children:r.search.searchResults.map(d=>y.jsx(Za,{product:d,parent:"products"},d.id))}):r.search.searchSubmitted&&((c=r.search.searchResults)==null?void 0:c.length)===0?y.jsx("p",{children:"No results found."}):s}const s=y.jsx("ul",{className:"product-list",children:((a=t==null?void 0:t.products)==null?void 0:a.length)>0?t.products.map(u=>{if(r.selectedCategory){if(r.selectedCategory&&u.category===r.selectedCategory)return y.jsx(Za,{product:u,parent:"products"},u.id)}else return y.jsx(Za,{product:u,parent:"products"},u.id)}):y.jsx("p",{children:"no products found."})});return y.jsx("div",{className:"page-container",children:i()})}function Lu(){return y.jsx("div",{className:"page-container placeholder-page",children:y.jsx("h1",{children:"Coming soon... "})})}const CV=XR(Hf(y.jsxs(Kn,{path:"/",element:y.jsx(k4,{}),errorElement:y.jsx(IV,{}),children:[y.jsx(Kn,{index:!0,element:y.jsx(b4,{})}),y.jsx(Kn,{path:"/products",element:y.jsx(PV,{})}),y.jsx(Kn,{path:"/cart",element:y.jsx(Z4,{})}),y.jsx(Kn,{path:"/login",element:y.jsx(oV,{})}),y.jsx(Kn,{path:"/account",element:y.jsx(SV,{})}),y.jsx(Kn,{path:"/terms",element:y.jsx(Lu,{})}),y.jsx(Kn,{path:"/about",element:y.jsx(Lu,{})}),y.jsx(Kn,{path:"/contact",element:y.jsx(Lu,{})}),y.jsx(Kn,{path:"/help",element:y.jsx(Lu,{})}),y.jsx(Kn,{path:"/product-details/:id",element:y.jsx($4,{})})]})));function RV(){return y.jsx(y.Fragment,{children:y.jsx(oA,{router:CV})})}const AV=t=>e=>n=>{const r=e(n),i=t.getState(),s=i.users.currentUser,o=i.cart.items,a=i.cart.total;return!s&&n.type.startsWith("cart/")&&localStorage.setItem("cart",JSON.stringify({items:o,total:a})),r};_M();const kV=kM({reducer:{users:i4,cart:HM,favorites:XM},middleware:t=>t().concat(AV)});Gh.createRoot(document.getElementById("root")).render(y.jsx(Uk,{store:kV,children:y.jsx(FE,{children:y.jsx(RV,{})})}));
